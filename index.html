<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Club Turkaj</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'DM Sans',sans-serif;background:#f5f5f5;display:flex;justify-content:center;min-height:100vh}#root{width:100%;max-width:480px}#loading{display:flex;align-items:center;justify-content:center;height:100vh;flex-direction:column;gap:16px;font-family:'DM Sans',sans-serif}#loading .spinner{width:40px;height:40px;border:4px solid #eee;border-top:4px solid #FBBC04;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}</style>
</head>
<body>
<div id="root"><div id="loading"><div class="spinner"></div><div style="font-weight:700;color:#757575">Cargando Club Turkaj...</div></div></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const {useState, useCallback, useEffect, useRef} = React;
const SUPABASE_URL='https://rfharnrsatgliynzcuwp.supabase.co';
const SUPABASE_KEY='sb_publishable_W7UvMRT26o2NNeQvKeWCFQ__iM_dOnO';
const sb=window.supabase?window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY):null;

// ========== FUEL PRICES ==========
const FUEL = { super: 31.49, regular: 30.99, diesel: 28.99 };

// ========== CONFIG DEFAULTS ==========
const CFG_INIT = {
  qPerPt: 10,
  ticketPts: 5,
  regBase: 15,
  regOptional: 2,
  referralPts: 25,
  surveyPts: 3,
  surveyDaily: 5,
  tiers: {
    platino: { gal: 150, discGal: 0.15, discRedeem: 0.10, evtPts: 60 },
    black: { gal: 500, discGal: 0.25, discRedeem: 0.15, evtPts: 70 },
    oro: { evtPts: 50 },
  },
  degrad: [
    { tier: "BLACK", rules: [
      { days: 15, effect: "Baja a PLATINO" },
      { days: 30, effect: "Baja a ORO" },
      { days: 45, effect: "Pierde TODOS los puntos" },
    ]},
    { tier: "PLATINO", rules: [
      { days: 15, effect: "Baja a ORO" },
      { days: 45, effect: "Pierde TODOS los puntos" },
    ]},
    { tier: "ORO", rules: [
      { days: 45, effect: "Pierde TODOS los puntos" },
    ]},
  ],
  termsUse: [
    "La membresÃ­a Club Turkaj es personal e intransferible.",
    "No se puede prestar, vender ni compartir el cÃ³digo QR con terceros.",
    "Los puntos acumulados pertenecen exclusivamente al titular registrado.",
    "El uso indebido resultarÃ¡ en cancelaciÃ³n inmediata y pÃ©rdida de todos los puntos.",
    "Turkaj se reserva el derecho de modificar las reglas del programa con previo aviso.",
  ],
  termsCanje: [
    "Los canjes de premios estÃ¡n sujetos a disponibilidad.",
    "Los premios de rifa no son canjeables por efectivo.",
    "El ganador debe presentar su membresÃ­a activa para reclamar el premio.",
    "Los puntos usados en boletos de rifa se consumen sin importar el resultado.",
    "Premios no reclamados en 30 dÃ­as serÃ¡n reasignados.",
    "Los boletos de rifa no son reembolsables.",
  ],
};

// ========== TIER SYSTEM (uses cfg) ==========
const makeTier = (gal, cfg) => {
  const pt=cfg.tiers.platino, bk=cfg.tiers.black, or=cfg.tiers.oro;
  if (gal >= bk.gal) return { name:"BLACK", color:"#FFF", bg:"#000", discount:bk.discGal, redeemDisc:bk.discRedeem, wifi:"Ilimitado", bath:true, evtPts:bk.evtPts, next:null, rem:0, icon:"ğŸ–¤", grad:"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)", base:bk.gal, target:bk.gal };
  if (gal >= pt.gal) return { name:"PLATINO", color:"#1A1A1A", bg:"#E0E0E0", discount:pt.discGal, redeemDisc:pt.discRedeem, wifi:"Ilimitado", bath:true, evtPts:pt.evtPts, next:"BLACK", rem:+(bk.gal-gal).toFixed(1), icon:"ğŸ’", grad:"linear-gradient(135deg,#E0E0E0 0%,#BDBDBD 50%,#E0E0E0 100%)", base:pt.gal, target:bk.gal };
  return { name:"ORO", color:"#000", bg:"#FBBC04", discount:0, redeemDisc:0, wifi:"Ilimitado", bath:false, evtPts:or.evtPts, next:"PLATINO", rem:+(pt.gal-gal).toFixed(1), icon:"ğŸŸ¡", grad:"linear-gradient(135deg,#FBBC04 0%,#FFD540 50%,#FBBC04 100%)", base:0, target:pt.gal };
};
const getTier = (gal) => makeTier(gal, CFG_INIT);
const tierProg = (gal, t) => t.next ? Math.min(((gal - t.base) / (t.target - t.base)) * 100, 100) : 100;
const daysInactive = (d) => d ? Math.floor((Date.now() - new Date(d).getTime()) / 86400000) : 0;
const sMono={fontFamily:"'JetBrains Mono',monospace",fontWeight:700};

// ========== DATA ==========
const CARDS_INIT = [];

// ========== PROMOTIONS ==========
const PROMOS_INIT = [];

const CUSTOMERS_INIT = [];

// ========== OPERATORS ==========
const OPERATORS_INIT = [
  { id:"OP-001",name:"Luis PÃ©rez",user:"1",password:"1",dpi:"1",gafete:"1",phone:"5560-1111",station:"Turkaj I",bomba:"1",turno:"Matutino",email:"1",registered:"2025-06-01",active:true },
];

// ========== ADMIN CREDENTIALS ==========
const ADMIN_CRED = { dpi:"1", gafete:"1", email:"1", password:"1" };

const REWARDS_INIT = [];

const RAFFLE_CAL = [];

const RAFFLE_DATA = [
  {participants:[]},{participants:[]},{participants:[]},{participants:[]},{participants:[]},{participants:[]},
  {participants:[]},{participants:[]},{participants:[]},{participants:[]},{participants:[]},{participants:[]},
];


const SURVEYS_INIT = [];

const MONTH_NAMES=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];
const fmtBday=(b)=>{if(!b)return"â€”";const p=b.split("-");if(p.length!==2)return b;const m=parseInt(p[0])-1;const d=parseInt(p[1]);return m>=0&&m<12?`${d} de ${MONTH_NAMES[m]}`:b;};

const ACTIVITY_INIT = {};

const EVENTS = [
  { name:"ğŸ‚ CumpleaÃ±os",desc:"ORO 50 Â· PLATINO 60 Â· BLACK 70 pts" },
  { name:"ğŸ„ Navidad",desc:"ORO 50 Â· PLATINO 60 Â· BLACK 70 pts" },
  { name:"ğŸ’ DÃ­a del CariÃ±o",desc:"ORO 50 Â· PLATINO 60 Â· BLACK 70 pts" },
  { name:"ğŸ‰ Aniversario Turkaj",desc:"14 de mayo Â· ORO 50 Â· PLATINO 60 Â· BLACK 70 pts" },
];

let CAT_S = { combustible:{bg:"#FFF3E0",c:"#E65100"}, servicio:{bg:"#E8F5E9",c:"#2E7D32"}, merch:{bg:"#E3F2FD",c:"#1565C0"}, cultural:{bg:"#F3E5F5",c:"#7B1FA2"}, shell:{bg:"#FFEBEE",c:"#C62828"}, premium:{bg:"#FFF8E1",c:"#F57F17"}, apple:{bg:"#F5F5F5",c:"#333"} };
let CAT_L = { combustible:"Combustible",servicio:"Servicio",merch:"Club Turkaj",cultural:"Chichi",shell:"Shell",premium:"Premium",apple:"Apple" };

// ========== ICONS ==========
const IC = {
  Fuel:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("path", {d:"M3 22V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v17"}), React.createElement("path", {d:"M15 12h2a2 2 0 0 1 2 2v3a2 2 0 0 0 4 0V8l-4-4"}), React.createElement("path", {d:"M7 10h4"})),
  Users:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("path", {d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}), React.createElement("circle", {cx:"9", cy:"7", r:"4"}), React.createElement("path", {d:"M22 21v-2a4 4 0 0 0-3-3.87"}), React.createElement("path", {d:"M16 3.13a4 4 0 0 1 0 7.75"})),
  Gift:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("polyline", {points:"20 12 20 22 4 22 4 12"}), React.createElement("rect", {x:"2", y:"7", width:"20", height:"5"}), React.createElement("line", {x1:"12", y1:"22", x2:"12", y2:"7"}), React.createElement("path", {d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}), React.createElement("path", {d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})),
  Ticket:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("path", {d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"}), React.createElement("path", {d:"M13 5v2"}), React.createElement("path", {d:"M13 17v2"}), React.createElement("path", {d:"M13 11v2"})),
  Star:()=>React.createElement("svg", {width:"11", height:"11", viewBox:"0 0 24 24", fill:"currentColor"}, React.createElement("polygon", {points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})),
  Plus:()=>React.createElement("svg", {width:"16", height:"16", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2.5", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("line", {x1:"12", y1:"5", x2:"12", y2:"19"}), React.createElement("line", {x1:"5", y1:"12", x2:"19", y2:"12"})),
  Search:()=>React.createElement("svg", {width:"18", height:"18", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("circle", {cx:"11", cy:"11", r:"8"}), React.createElement("line", {x1:"21", y1:"21", x2:"16.65", y2:"16.65"})),
  Back:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("polyline", {points:"15 18 9 12 15 6"})),
  Check:()=>React.createElement("svg", {width:"14", height:"14", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2.5", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("polyline", {points:"20 6 9 17 4 12"})),
  Chev:()=>React.createElement("svg", {width:"14", height:"14", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("polyline", {points:"9 18 15 12 9 6"})),
  Pin:()=>React.createElement("svg", {width:"11", height:"11", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("path", {d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}), React.createElement("circle", {cx:"12", cy:"10", r:"3"})),
  Clock:()=>React.createElement("svg", {width:"16", height:"16", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("circle", {cx:"12", cy:"12", r:"10"}), React.createElement("polyline", {points:"12 6 12 12 16 14"})),
  Warn:()=>React.createElement("svg", {width:"14", height:"14", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("path", {d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}), React.createElement("line", {x1:"12", y1:"9", x2:"12", y2:"13"}), React.createElement("line", {x1:"12", y1:"17", x2:"12.01", y2:"17"})),
  QR:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("rect", {x:"3", y:"3", width:"7", height:"7"}), React.createElement("rect", {x:"14", y:"3", width:"7", height:"7"}), React.createElement("rect", {x:"3", y:"14", width:"7", height:"7"}), React.createElement("rect", {x:"14", y:"14", width:"3", height:"3"})),
  Gear:()=>React.createElement("svg", {width:"20", height:"20", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("circle", {cx:"12", cy:"12", r:"3"}), React.createElement("path", {d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})),
  Logout:()=>React.createElement("svg", {width:"18", height:"18", viewBox:"0 0 24 24", fill:"none", stroke:"currentColor", strokeWidth:"2", strokeLinecap:"round", strokeLinejoin:"round"}, React.createElement("path", {d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}), React.createElement("polyline", {points:"16 17 21 12 16 7"}), React.createElement("line", {x1:"21", y1:"12", x2:"9", y2:"12"})),
};

// ========== TINY COMPONENTS ==========
const Badge = ({t}) => t.name==="BLACK"?React.createElement("span", {style:{display:"inline-flex",alignItems:"center",gap:3,padding:"3px 10px",borderRadius:20,fontSize:10,fontWeight:800,letterSpacing:1.2,textTransform:"uppercase",color:"#fff",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,.15)"}}, React.createElement("span", {style:{position:"absolute",inset:0,background:"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)",zIndex:0}}), [...Array(10)].map((_,i)=>React.createElement("span", {key:i, style:{position:"absolute",width:i%3===0?1.2:0.6,height:i%3===0?1.2:0.6,borderRadius:"50%",background:`rgba(255,255,255,${i%3===0?.8:.3})`,left:`${(i*23+8)%100}%`,top:`${(i*31+12)%100}%`,zIndex:0}})), React.createElement("span", {style:{position:"relative",zIndex:1,display:"inline-flex",alignItems:"center",gap:3}}, React.createElement(IC.Star, null), t.name)):React.createElement("span", {style:{display:"inline-flex",alignItems:"center",gap:3,padding:"3px 10px",borderRadius:20,fontSize:10,fontWeight:800,letterSpacing:1.2,textTransform:"uppercase",background:t.bg,color:t.color}}, React.createElement(IC.Star, null), t.name);

const QR = ({code,sz=140,scanColor="#FBBC04"}) => {
  const sd = code.split("").reduce((a,c)=>a+c.charCodeAt(0),0);
  const s = sz/9; const cells=[];
  for(let r=0;r<9;r++) for(let c=0;c<9;c++){
    const cn=(r<3&&c<3)||(r<3&&c>5)||(r>5&&c<3);
    cells.push({r,c,f:cn?!(r%2===1&&c%2===1):((sd*(r+1)*(c+1))%3===0)});
  }
  return React.createElement("div", {style:{background:"#fff",borderRadius:20,padding:24,display:"inline-block",boxShadow:"0 4px 24px rgba(0,0,0,.06)",position:"relative"}}, React.createElement("div", {style:{position:"absolute",left:16,right:16,height:2,background:scanColor,boxShadow:`0 0 10px ${scanColor}`,animation:"scan 2s linear infinite",zIndex:10}}), React.createElement("svg", {width:sz, height:sz}, cells.map(({r,c,f})=>f?React.createElement("rect", {key:`${r}${c}`, x:c*s, y:r*s, width:s-1, height:s-1, rx:2, fill:"#0D0D0D"}):null)));
};

const Warn = ({last}) => {
  const d=daysInactive(last); if(d<20)return null;
  const col=d>=75?"#C62828":d>=55?"#E65100":d>=25?"#F57F17":"#757575";
  const msg=d>=90?"ğŸ’€ Puntos perdidos por inactividad":d>=75?`ğŸ”´ Â¡Puntos se pierden en ${90-d} dÃ­as!`:d>=55?`ğŸš¨ Nivel baja a ORO en ${60-d} dÃ­as`:d>=25?`âš ï¸ Nivel baja en ${30-d} dÃ­as`:"";
  if(!msg)return null;
  return React.createElement("div", {style:{margin:"8px 20px",padding:"12px 16px",background:d>=75?"#FFEBEE":d>=55?"#FFF3E0":"#FFF8E1",borderRadius:14,borderLeft:`3px solid ${col}`,fontSize:13,fontWeight:700,color:col,display:"flex",alignItems:"center",gap:8}}, React.createElement(IC.Warn, null), msg);
};

const tierShadow = (n) => n==="BLACK"?"0 16px 56px rgba(0,0,0,.7), 0 0 25px rgba(255,255,255,.05), 0 0 8px rgba(255,255,255,.03)":n==="PLATINO"?"0 6px 24px rgba(21,101,192,.25), 0 2px 8px rgba(21,101,192,.15), inset 0 1px 0 rgba(255,255,255,.4)":"0 8px 32px rgba(251,188,4,.2)";
const tierBorder = (n) => n==="BLACK"?"none":n==="PLATINO"?"2px solid #1565C0":"none";
const tierBg = (n) => n==="BLACK"?"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)":n==="PLATINO"?"linear-gradient(135deg,#9E9E9E,#BDBDBD,#CFD8DC,#BDBDBD)":null;

const TierDeco = ({name}) => React.createElement(React.Fragment, null, name==="BLACK"&&React.createElement(React.Fragment, null, React.createElement("div", {style:{position:"absolute",inset:-2,borderRadius:22,background:"conic-gradient(from 0deg, rgba(255,255,255,.55) 0%, rgba(255,255,255,.06) 8%, rgba(255,255,255,.4) 14%, rgba(255,255,255,.03) 22%, rgba(255,255,255,.6) 30%, rgba(255,255,255,.08) 40%, rgba(255,255,255,.35) 48%, rgba(255,255,255,.02) 55%, rgba(255,255,255,.5) 62%, rgba(255,255,255,.05) 72%, rgba(255,255,255,.45) 80%, rgba(255,255,255,.07) 88%, rgba(255,255,255,.55) 100%)",zIndex:0,animation:"bhRotate 12s linear infinite"}}), React.createElement("div", {style:{position:"absolute",inset:0,borderRadius:20,background:"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)",zIndex:0}}), React.createElement("div", {style:{position:"absolute",top:-2,left:"15%",width:"35%",height:3,background:"radial-gradient(ellipse, rgba(255,255,255,.7) 0%, rgba(200,210,255,.3) 40%, transparent 75%)",borderRadius:"50%",filter:"blur(1px)",zIndex:1,animation:"bhFlicker 4s ease-in-out infinite"}}), React.createElement("div", {style:{position:"absolute",bottom:-2,left:"40%",width:"30%",height:3,background:"radial-gradient(ellipse, rgba(255,255,255,.5) 0%, rgba(200,210,255,.2) 40%, transparent 75%)",borderRadius:"50%",filter:"blur(1px)",zIndex:1,animation:"bhFlicker 5s 1.5s ease-in-out infinite"}}), React.createElement("div", {style:{position:"absolute",top:"10%",left:-2,height:"35%",width:3,background:"radial-gradient(ellipse, rgba(255,255,255,.4) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(1px)",zIndex:1,animation:"bhFlicker 3.5s .8s ease-in-out infinite"}}), React.createElement("div", {style:{position:"absolute",top:"35%",right:-2,height:"40%",width:3,background:"radial-gradient(ellipse, rgba(255,255,255,.6) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(1px)",zIndex:1,animation:"bhFlicker 4.5s 2s ease-in-out infinite"}}), React.createElement("div", {style:{position:"absolute",inset:0,borderRadius:20,background:"radial-gradient(ellipse at 15% 35%, rgba(20,15,40,.5) 0%, transparent 55%), radial-gradient(ellipse at 85% 65%, rgba(15,10,35,.4) 0%, transparent 50%)",zIndex:1}}), React.createElement("div", {style:{position:"absolute",top:1,left:1,right:1,height:1,borderRadius:"20px 20px 0 0",background:"linear-gradient(90deg,transparent 10%,rgba(251,188,4,.1) 30%,rgba(251,188,4,.2) 50%,rgba(251,188,4,.1) 70%,transparent 90%)",zIndex:3}}), React.createElement("div", {style:{position:"absolute",width:"200%",height:"25%",top:"35%",left:"-50%",background:"linear-gradient(180deg, transparent 0%, rgba(140,130,180,.02) 25%, rgba(220,215,240,.06) 50%, rgba(140,130,180,.02) 75%, transparent 100%)",transform:"rotate(-30deg)",zIndex:1,animation:"milkyDrift 25s ease-in-out infinite"}}), [...Array(45)].map((_,i)=>{
      const x=(i*13.7+Math.sin(i*2.1)*35+50)%100;
      const y=(i*17.3+Math.cos(i*1.7)*30+50)%100;
      const sz=i<3?2.5:i<10?1.5:i<20?1:.6;
      const brightness=i<3?1:i<10?.5:i<20?.25:.12;
      const dur=4+Math.random()*6;
      const del=Math.random()*8;
      const isWarm=i%7===0;
      const color=isWarm?`rgba(251,200,120,${brightness})`:`rgba(200,210,255,${brightness})`;
      return React.createElement("div", {key:`s${i}`, style:{position:"absolute",width:sz,height:sz,borderRadius:"50%",background:color,left:`${x}%`,top:`${y}%`,boxShadow:i<3?`0 0 ${sz+3}px rgba(255,255,255,.6), 0 0 ${sz+8}px rgba(180,170,255,.15)`:i<10?`0 0 ${sz+1}px rgba(255,255,255,.2)`:"none",animation:`twinkle ${dur}s ${del}s ease-in-out infinite`,zIndex:1}});
    }), [{x:12,y:22,s:3},{x:78,y:38,s:3.5},{x:42,y:72,s:2.5}].map((st,i)=>
      React.createElement("div", {key:`bs${i}`, style:{position:"absolute",left:`${st.x}%`,top:`${st.y}%`,width:st.s,height:st.s,borderRadius:"50%",background:"#fff",boxShadow:`0 0 3px #fff, 0 0 6px rgba(200,200,255,.5), 0 0 14px rgba(120,110,200,.2)`,zIndex:1,animation:`twinkle ${5+i*1.5}s ${i*.8}s ease-in-out infinite`}}, React.createElement("div", {style:{position:"absolute",width:16,height:1,background:"linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent)",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}}), React.createElement("div", {style:{position:"absolute",width:1,height:16,background:"linear-gradient(180deg,transparent,rgba(255,255,255,.35),transparent)",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}}))
    ), React.createElement("div", {style:{position:"absolute",height:1,top:"15%",left:"-15%",transform:"rotate(-12deg)",zIndex:2,opacity:0,animation:"shootStar1 9s 3s linear infinite"}}, React.createElement("div", {style:{width:50,height:1,background:"linear-gradient(90deg,rgba(251,200,150,.9) 0%,rgba(255,255,255,.6) 30%,transparent 100%)",borderRadius:1,boxShadow:"0 0 6px rgba(251,188,4,.3)"}})), React.createElement("div", {style:{position:"absolute",height:1,top:"60%",left:"-15%",transform:"rotate(-18deg)",zIndex:2,opacity:0,animation:"shootStar2 14s 8s linear infinite"}}, React.createElement("div", {style:{width:35,height:1,background:"linear-gradient(90deg,rgba(200,210,255,.8) 0%,rgba(255,255,255,.4) 30%,transparent 100%)",borderRadius:1,boxShadow:"0 0 4px rgba(150,160,255,.2)"}})), React.createElement("div", {style:{position:"absolute",bottom:1,left:1,right:1,height:"30%",borderRadius:"0 0 20px 20px",background:"linear-gradient(to top, rgba(251,188,4,.02) 0%, transparent 100%)",zIndex:1}})), name==="PLATINO"&&React.createElement(React.Fragment, null, React.createElement("div", {style:{position:"absolute",top:0,left:0,right:0,height:3,background:"linear-gradient(90deg,transparent,#1565C0,#42A5F5,#1565C0,transparent)",zIndex:1}}), React.createElement("div", {style:{position:"absolute",bottom:0,left:0,right:0,height:2,background:"linear-gradient(90deg,transparent,#1565C0,#42A5F5,#1565C0,transparent)",zIndex:1}}), React.createElement("div", {style:{position:"absolute",top:0,left:0,bottom:0,width:1,background:"linear-gradient(180deg,rgba(21,101,192,.4),rgba(21,101,192,.1),rgba(21,101,192,.4))",zIndex:1}}), React.createElement("div", {style:{position:"absolute",top:0,right:0,bottom:0,width:1,background:"linear-gradient(180deg,rgba(21,101,192,.4),rgba(21,101,192,.1),rgba(21,101,192,.4))",zIndex:1}})), name==="ORO"&&React.createElement("div", {style:{position:"absolute",top:"-30%",right:"-20%",width:"50%",height:"80%",background:"rgba(255,255,255,.12)",borderRadius:"50%",zIndex:0}}));

const TierInfo = ({t,gal,small,cfg:c}) => {
  const cc=c||CFG_INIT;
  const bens=[
    {i:"â›½",t:"1 pt por cada Q"+cc.qPerPt},
    ...(t.discount>0?[{i:"ğŸ’°",t:`Descuento Q${t.discount.toFixed(2)}/galÃ³n`}]:[]),
    ...(t.redeemDisc>0?[{i:"ğŸ·ï¸",t:`-${Math.round(t.redeemDisc*100)}% en canje de premios`}]:[]),
    {i:"ğŸ“¶",t:"WiFi ilimitado"},
    ...(t.bath?[{i:"ğŸš»",t:"Acceso a baÃ±os"}]:[]),
    {i:"ğŸ‚",t:`${t.evtPts} pts en eventos especiales`},
    {i:"ğŸŸï¸",t:"Rifa mensual ("+cc.ticketPts+" pts = 1 boleto)"},
    {i:"ğŸ‘¥",t:"Invitar amigo = +"+cc.referralPts+" pts"},
  ];
  const pg=tierProg(gal,t);
  const bg=tierBg(t.name)||t.grad;
  return React.createElement("div", {style:{borderRadius:20,padding:small?16:20,margin:"10px 20px",background:bg,color:t.color,position:"relative",overflow:"hidden",boxShadow:tierShadow(t.name),border:tierBorder(t.name)}}, React.createElement(TierDeco, {name:t.name}), React.createElement("div", {style:{position:"relative",zIndex:2}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:small?8:14}}, React.createElement("div", {style:{fontSize:small?15:18,fontWeight:800,letterSpacing:2}}, t.icon, t.name), t.base>0&&React.createElement("div", {style:{fontSize:11,opacity:.6,fontWeight:700}}, t.base, "gls")), bens.map((b,i)=>React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:10,padding:`${small?6:9}px 0`,borderBottom:`1px solid ${t.name==="BLACK"?"rgba(255,255,255,.08)":t.name==="PLATINO"?"rgba(255,255,255,.15)":"rgba(0,0,0,.06)"}`,fontSize:small?12:13,fontWeight:600}}, React.createElement("span", {style:{width:28,textAlign:"center"}}, b.i), React.createElement("span", null, b.t))), t.next&&React.createElement("div", {style:{marginTop:12}}, React.createElement("div", {style:{display:"flex",justifyContent:"flex-end",fontSize:small?9:10,opacity:.5,marginBottom:6,fontWeight:700}}, React.createElement("span", null, gal.toFixed(0), "/", t.target, "gal")), React.createElement("div", {style:{position:"relative"}}, React.createElement("div", {style:{height:6,borderRadius:3,overflow:"hidden",background:t.name==="BLACK"?"rgba(255,255,255,.15)":t.name==="PLATINO"?"rgba(0,0,0,.15)":"rgba(0,0,0,.08)"}}, React.createElement("div", {style:{height:"100%",borderRadius:3,width:`${pg}%`,background:t.name==="BLACK"?"#fff":t.name==="PLATINO"?"#1565C0":"#000",transition:"width 1s ease"}})), pg>0&&React.createElement("div", {style:{position:"absolute",top:-18,left:`${pg}%`,transform:"translateX(-50%)",fontSize:small?8:10,fontWeight:800,color:t.color,...sMono,whiteSpace:"nowrap"}}, gal.toFixed(0))))));
};

// ========== STYLES ==========
const css = `
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600;700&display=swap');
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',sans-serif;background:#F5F5F5;color:#0D0D0D;-webkit-font-smoothing:antialiased}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideIn{from{opacity:0;transform:translateX(-12px)}to{opacity:1;transform:translateX(0)}}
@keyframes scan{0%{top:24px}100%{top:calc(100% - 24px)}}
@keyframes pop{from{opacity:0;transform:scale(.7)}to{opacity:1;transform:scale(1)}}
@keyframes scanBar{from{width:0%}to{width:100%}}
@keyframes bounce{0%{transform:scale(1)}25%{transform:scale(.92)}50%{transform:scale(1.06)}75%{transform:scale(.97)}100%{transform:scale(1)}}
@keyframes flipIn{0%{transform:rotateY(0deg)}50%{transform:rotateY(90deg)}100%{transform:rotateY(0deg)}}
@keyframes flipOut{0%{transform:rotateY(0deg)}50%{transform:rotateY(-90deg)}100%{transform:rotateY(0deg)}}
@keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
@keyframes twinkle{0%,100%{opacity:1}40%{opacity:.2}60%{opacity:.8}}
@keyframes twinkle{0%,100%{opacity:1;transform:scale(1)}25%{opacity:.2;transform:scale(.6)}50%{opacity:.9;transform:scale(1.05)}75%{opacity:.4;transform:scale(.8)}}
@keyframes milkyDrift{0%,100%{transform:rotate(-30deg) translateX(0) translateY(0)}33%{transform:rotate(-29.5deg) translateX(5px) translateY(2px)}66%{transform:rotate(-30.5deg) translateX(-3px) translateY(-1px)}}
@keyframes shootStar1{0%{left:-15%;top:15%;opacity:0;transform:rotate(-12deg)}2%{opacity:1}7%{left:115%;top:8%;opacity:0;transform:rotate(-12deg)}100%{left:115%;top:8%;opacity:0}}
@keyframes shootStar2{0%{left:-15%;top:60%;opacity:0;transform:rotate(-18deg)}1.5%{opacity:.8}5%{left:110%;top:45%;opacity:0;transform:rotate(-18deg)}100%{left:110%;top:45%;opacity:0}}
@keyframes bhRotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
@keyframes bhFlicker{0%,100%{opacity:1;transform:scaleX(1)}30%{opacity:.4;transform:scaleX(.85)}60%{opacity:.9;transform:scaleX(1.1)}}
::-webkit-scrollbar{width:3px}::-webkit-scrollbar-thumb{background:#E0E0E0;border-radius:2px}
`;

// ========== MAIN APP ==========
function App() {
  const [view,setView]=useState("client");
  const [scr,setScr]=useState("dash");
  const [cScr,setCScr]=useState("home");
  const [oScr,setOScr]=useState("ohome");
  const [oSel,setOSel]=useState(null);
  const [opSearch,setOpSearch]=useState("");
  const [oQ,setOQ]=useState("");
  const [custs,setCusts]=useState(CUSTOMERS_INIT);
  const [operators,setOperators]=useState(OPERATORS_INIT);
  const [rewards,setRewards]=useState(REWARDS_INIT);
  const [promos,setPromos]=useState(PROMOS_INIT);
  const [promoIdx,setPromoIdx]=useState(0);
  const [editPromo,setEditPromo]=useState(null);
  const [newPromo,setNewPromo]=useState({title:"",desc:"",icon:"ğŸ”¥",bg:"linear-gradient(135deg,#FF6B00,#FF9800)",color:"#fff",active:true});
  const activePromos=promos.filter(function(p){return p.active});
  useEffect(function(){
    if(activePromos.length>1){
      const t=setInterval(function(){setPromoIdx(function(i){return (i+1)%activePromos.length})},4000);
      return function(){clearInterval(t)};
    }
  },[activePromos.length]);

  // ===== AUTH =====
  const [authScreen,setAuthScreen]=useState("login"); // login | register | verify | profile | logged
  const [authOp,setAuthOp]=useState("login"); // login | logged
  const [authAdmin,setAuthAdmin]=useState("login"); // login | logged
  const [regPhone,setRegPhone]=useState("");
  const [regPass,setRegPass]=useState("");
  const [regPass2,setRegPass2]=useState("");
  const [regVerifyMethod,setRegVerifyMethod]=useState("whatsapp"); // whatsapp | sms
  const [regCode,setRegCode]=useState("");
  const [regSentCode,setRegSentCode]=useState(false);
  const [regProfile,setRegProfile]=useState({name:"",dpi:"",plate:"",email:"",bday:"",nit:""});
  const [loginPhone,setLoginPhone]=useState("");
  const [loginPass,setLoginPass]=useState("");
  const [opLoginGafete,setOpLoginGafete]=useState("");
  const [opLoginDpi,setOpLoginDpi]=useState("");
  const [opLoginUser,setOpLoginUser]=useState("");
  const [opLoginPass,setOpLoginPass]=useState("");
  const [adLoginDpi,setAdLoginDpi]=useState("");
  const [adLoginGafete,setAdLoginGafete]=useState("");
  const [adLoginEmail,setAdLoginEmail]=useState("");
  const [adLoginPass,setAdLoginPass]=useState("");
  const [authError,setAuthError]=useState("");
  // Operator registration in admin
  const [showOpReg,setShowOpReg]=useState(false);
  const [editOp,setEditOp]=useState(null);
  const [newOp,setNewOp]=useState({name:"",user:"",password:"",dpi:"",gafete:"",phone:"",station:"Turkaj I",bomba:"",turno:"Matutino",email:""});
  const [editReward,setEditReward]=useState(null);
  const [editMember,setEditMember]=useState(null);
  
  const [surveys,setSurveys]=useState(SURVEYS_INIT);
  const [mySurveyCount,setMySurveyCount]=useState(0);
  const [showSurveys,setShowSurveys]=useState(false);
  const [activityLog,setActivityLog]=useState(ACTIVITY_INIT);
  
  const [cfg,setCfg]=useState(CFG_INIT);
  const gT=useCallback((gal)=>makeTier(gal,cfg),[cfg]);
  const [sel,setSel]=useState(null);
  const [q,setQ]=useState("");
  const [memSort,setMemSort]=useState("all");
  const [stationFilter,setStationFilter]=useState(null);
  const [stationMode,setStationMode]=useState("last");
  const getMemberStation=(cid,mode)=>{const acts=(activityLog&&activityLog[cid])||[];const withStation=acts.filter(a=>a.station);if(!withStation.length)return null;if(mode==="last")return withStation[0].station;const counts={};withStation.forEach(a=>{counts[a.station]=(counts[a.station]||0)+1});return Object.entries(counts).sort((a,b)=>b[1]-a[1])[0][0]};

  const getCard=(custId)=>cards.find(c=>c.assignedTo===custId&&c.status==="active");
  const availCards=(tier)=>cards.filter(c=>c.status==="available"&&c.tier===tier);
  const inactiveCards=()=>cards.filter(c=>c.status==="inactive");
  const swapCard=(custId,newCardId,oldAction)=>{
    const today=new Date().toISOString().split("T")[0];
    setCards(prev=>prev.map(c=>{
      if(c.assignedTo===custId&&c.status==="active") return {...c,status:oldAction||"inactive",assignedTo:null,history:[...c.history,{action:oldAction==="destroyed"?"destroyed":"upgraded",from:custId,date:today}]};
      if(c.id===newCardId) return {...c,status:"active",assignedTo:custId,history:[...c.history,{action:"assigned",to:custId,date:today}]};
      return c;
    }));
    setCusts(prev=>prev.map(c=>c.id===custId?{...c,cardId:newCardId}:c));
    if(me.id===custId)setMe(p=>({...p,cardId:newCardId}));
  };
  const assignCard=(custId,cardId)=>{
    const today=new Date().toISOString().split("T")[0];
    setCards(prev=>prev.map(c=>c.id===cardId?{...c,status:"active",assignedTo:custId,history:[...c.history,{action:"assigned",to:custId,date:today}]}:c));
  };
  const recycleCard=(cardId)=>{
    setCards(prev=>prev.map(c=>c.id===cardId&&c.status==="inactive"?{...c,status:"available",history:[...c.history,{action:"recycled",date:new Date().toISOString().split("T")[0]}]}:c));
  };
  const destroyCard=(cardId)=>{
    setCards(prev=>prev.map(c=>c.id===cardId&&(c.status==="inactive")?{...c,status:"destroyed",history:[...c.history,{action:"destroyed",date:new Date().toISOString().split("T")[0]}]}:c));
  };
  const [sortDir,setSortDir]=useState("desc");
  const [modal,setModal]=useState(null);
  const [toast,setToast]=useState(null);
  const [amt,setAmt]=useState("");
  const [fuel,setFuel]=useState("super");
  const [invScan,setInvScan]=useState(null);
  const [cards,setCards]=useState(CARDS_INIT);
  const [showCardSwap,setShowCardSwap]=useState(null);
  const [cardScan,setCardScan]=useState(null);
  const [swapScan,setSwapScan]=useState(null);
  const [me,setMe]=useState(null);
  const [newC,setNewC]=useState({name:"",phone:"",dpi:"",plate:"",email:"",bday:"",nit:"",station:"",refCode:"",cardId:""});
  const [catF,setCatF]=useState("todos");
  const [rQty,setRQty]=useState(1);
  const [showHist,setShowHist]=useState(false);
  const [rafMonth,setRafMonth]=useState(new Date().getMonth());
  const [cRafMonth,setCRafMonth]=useState(new Date().getMonth());
  const [rafWinner,setRafWinner]=useState(null);
  const [rafSpinning,setRafSpinning]=useState(false);
  const [rafWinners,setRafWinners]=useState({});
  const [raffleCal,setRaffleCal]=useState(RAFFLE_CAL);
  const [rafData,setRafData]=useState(RAFFLE_DATA);
  const [editRafPrize,setEditRafPrize]=useState(null);
  const [showTerms,setShowTerms]=useState(false);
  const [redeemConfirm,setRedeemConfirm]=useState(null);
  const [showInvite,setShowInvite]=useState(false);
  const [showRedeemed,setShowRedeemed]=useState(false);
  const [showWifi,setShowWifi]=useState(false);
  const [showMap,setShowMap]=useState(false);
  const [rafFlip,setRafFlip]=useState(false);
  const [redeemedList,setRedeemedList]=useState([
    {id:"RD-001",reward:{name:"Vale Q100 Combustible",icon:"â›½",cat:"combustible"},cost:560,date:"2026-02-22",code:"TK-X9K4M2",collected:false},
    {id:"RD-002",reward:{name:"Lavado premium",icon:"ğŸš¿",cat:"servicio"},cost:280,date:"2026-02-20",code:"TK-B7H1N5",collected:false},
    {id:"RD-003",reward:{name:"AirPods Pro",icon:"ğŸ§",cat:"apple"},cost:3500,date:"2026-02-18",code:"TK-L3F8Q7",collected:false},
    {id:"RD-004",reward:{name:"Vale Q50 Combustible",icon:"â›½",cat:"combustible"},cost:350,date:"2026-02-15",code:"TK-D2J6R9",collected:true},
    {id:"RD-005",reward:{name:"Gorra Shell",icon:"ğŸ§¢",cat:"shell"},cost:168,date:"2026-02-10",code:"TK-P5W3A1",collected:true},
    {id:"RD-006",reward:{name:"Cambio de aceite",icon:"ğŸ”§",cat:"servicio"},cost:490,date:"2026-02-05",code:"TK-G8C2V4",collected:true},
    {id:"RD-007",reward:{name:"Vale Q25 Combustible",icon:"â›½",cat:"combustible"},cost:175,date:"2026-01-28",code:"TK-Y1E7T6",collected:true},
    {id:"RD-008",reward:{name:"Playera Club Turkaj",icon:"ğŸ‘•",cat:"merch"},cost:210,date:"2026-01-20",code:"TK-N4S9U3",collected:true},
    {id:"RD-009",reward:{name:"Entrada cine",icon:"ğŸ¬",cat:"cultural"},cost:280,date:"2026-01-15",code:"TK-H6L2K8",collected:true},
    {id:"RD-010",reward:{name:"Vale Q50 Combustible",icon:"â›½",cat:"combustible"},cost:350,date:"2026-01-10",code:"TK-R9M5B1",collected:true},
    {id:"RD-011",reward:{name:"Lavado bÃ¡sico",icon:"ğŸš¿",cat:"servicio"},cost:119,date:"2026-01-05",code:"TK-F3Q7W2",collected:true},
    {id:"RD-012",reward:{name:"Termo Shell",icon:"â˜•",cat:"shell"},cost:280,date:"2025-12-22",code:"TK-J8A4D6",collected:true},
  ]);
  const [expandedRD,setExpandedRD]=useState(null);
  const [sbConnected,setSbConnected]=useState(false);
  const [sbLoading,setSbLoading]=useState(true);

  // ===== SUPABASE DATA SYNC =====
  useEffect(function(){
    if(!sb){setSbLoading(false);return;}
    var mounted=true;

    // Helper to set user from Supabase session
    function setUserFromSession(u,showWelcome){
      if(!u||!mounted)return;
      var name=u.user_metadata&&u.user_metadata.full_name?u.user_metadata.full_name:(u.email||"Usuario");
      var email=u.email||"";
      var avatar=u.user_metadata&&u.user_metadata.avatar_url?u.user_metadata.avatar_url:"";
      var provider=u.app_metadata&&u.app_metadata.provider?u.app_metadata.provider:"google";

      function buildExisting(m){
        return {
          id:m.id,name:m.name,email:m.email||email,avatar:avatar,
          phone:m.phone||"",dpi:m.dpi||"",plate:m.plate||"",nit:m.nit||"",bday:m.birthday||"",
          points:m.points||0,gallons:parseFloat(m.gallons)||0,spent:parseFloat(m.spent)||0,
          visits:m.visits||0,tickets:m.tickets||0,redeemed:m.redeemed_count||0,
          referrals:m.referral_count||0,registered:m.created_at?m.created_at.split("T")[0]:"",
          lastBuy:m.last_buy?m.last_buy.split("T")[0]:"",station:m.last_station||"",
          cardId:m.card_id||"",supabaseUser:true,authProvider:provider
        };
      }
      function showNewUser(){
        var newUser={
          id:u.id,name:name,email:email,avatar:avatar,
          phone:"",dpi:"",plate:"",nit:"",bday:"",
          points:0,gallons:0,spent:0,visits:0,tickets:0,
          redeemed:0,referrals:0,registered:new Date().toISOString().split("T")[0],
          lastBuy:"",station:"",cardId:"",
          supabaseUser:true,authProvider:provider
        };
        setMe(newUser);
        setRegProfile(function(p){return Object.assign({},p,{name:name,email:email})});
        setAuthScreen("googleProfile");
        setView("client");
      }
      function loginExisting(existing){
        setMe(existing);
        setCusts(function(p){
          if(p.find(function(c){return c.id===existing.id}))return p;
          return [].concat(p,[existing]);
        });
        setAuthScreen("logged");
        setView("client");
      }

      // Check Supabase members table for returning user
      if(sb){
        sb.from('members').select('*').eq('auth_provider_id',u.id).then(function(r){
          if(!mounted)return;
          console.log("[Auth] DB lookup result:",r.error?"ERROR "+r.error.message:"rows="+((r.data&&r.data.length)||0));
          if(r.data&&r.data.length>0){
            loginExisting(buildExisting(r.data[0]));
          }else if(r.error){
            console.error("[Auth] DB lookup error:",r.error);
            // RLS or other error - try by email as fallback
            sb.from('members').select('*').eq('email',email).then(function(r2){
              if(!mounted)return;
              if(r2.data&&r2.data.length>0){
                loginExisting(buildExisting(r2.data[0]));
              }else{
                showNewUser();
              }
            }).catch(function(){showNewUser()});
          }else{
            showNewUser();
          }
        }).catch(function(err){
          console.error("[Auth] DB lookup failed",err);
          showNewUser();
        });
      }else{
        var existing=custs.find(function(c){return c.id===u.id});
        if(existing){
          setMe(Object.assign({},existing,{avatar:avatar,supabaseUser:true,authProvider:provider}));
          setAuthScreen("logged");setView("client");
        }else{showNewUser()}
      }
    }

    // Listen for auth state changes (Google OAuth callback)
    var authSub=sb.auth.onAuthStateChange(function(event,session){
      if(!mounted)return;
      console.log("[Auth]",event,session?session.user.email:"no session");
      if((event==='SIGNED_IN'||event==='TOKEN_REFRESHED'||event==='INITIAL_SESSION')&&session&&session.user){
        setUserFromSession(session.user);
        if(event==='SIGNED_IN')fire("ğŸ‘‹ Bienvenido "+(session.user.user_metadata&&session.user.user_metadata.full_name?session.user.user_metadata.full_name:session.user.email));
      }
      if(event==='SIGNED_OUT'){
        setMe(null);
        setAuthScreen("login");
        setView("client");
        setGoogleStep("welcome");
      }
    });

    // Check if URL has auth hash (OAuth callback) 
    if(window.location.hash&&window.location.hash.includes('access_token')){
      // Supabase client handles this automatically, but clean the URL
      setTimeout(function(){
        if(window.history&&window.history.replaceState){
          window.history.replaceState(null,'',window.location.pathname);
        }
      },1000);
    }
    async function loadFromSupabase(){
      try{
        // Cargar datos pÃºblicos en paralelo
        var [rwRes,prRes,stRes,cfgRes,rcRes]=await Promise.all([
          sb.from('rewards').select('*').eq('active',true).order('sort_order'),
          sb.from('promotions').select('*').eq('active',true).order('sort_order'),
          sb.from('stations').select('*'),
          sb.from('program_config').select('*'),
          sb.from('raffle_calendar').select('*').order('month'),
        ]);
        if(!mounted)return;

        // Premios
        if(rwRes.data&&rwRes.data.length>0){
          var mappedRewards=rwRes.data.map(function(r){
            return {id:r.id,name:r.name,icon:r.icon,pts:r.points_cost,cat:r.category,tier:r.tier_exclusive||undefined};
          });
          setRewards(mappedRewards);
        }

        // Promociones
        if(prRes.data&&prRes.data.length>0){
          var mappedPromos=prRes.data.map(function(p){
            return {id:p.id,title:p.title,desc:p.description,icon:p.icon,bg:p.bg_gradient,color:p.text_color,active:p.active};
          });
          setPromos(mappedPromos);
        }

        // ConfiguraciÃ³n
        if(cfgRes.data&&cfgRes.data.length>0){
          var cfgMap={};
          cfgRes.data.forEach(function(c){cfgMap[c.key]=c.value});
          if(cfgMap.general&&cfgMap.tiers){
            var gen=typeof cfgMap.general==='string'?JSON.parse(cfgMap.general):cfgMap.general;
            var trs=typeof cfgMap.tiers==='string'?JSON.parse(cfgMap.tiers):cfgMap.tiers;
            var deg=cfgMap.degradation?(typeof cfgMap.degradation==='string'?JSON.parse(cfgMap.degradation):cfgMap.degradation):[];
            var tu=cfgMap.terms_use?(typeof cfgMap.terms_use==='string'?JSON.parse(cfgMap.terms_use):cfgMap.terms_use):[];
            var tc=cfgMap.terms_canje?(typeof cfgMap.terms_canje==='string'?JSON.parse(cfgMap.terms_canje):cfgMap.terms_canje):[];
            setCfg({
              qPerPt:gen.qPerPt||10,ticketPts:gen.ticketPts||5,regBase:gen.regBase||15,
              regOptional:gen.regOptional||2,referralPts:gen.referralPts||25,
              surveyPts:gen.surveyPts||3,surveyDaily:gen.surveyDaily||5,
              tiers:trs,degrad:deg,termsUse:tu,termsCanje:tc
            });
          }
        }

        // Calendario de rifa
        if(rcRes.data&&rcRes.data.length>0){
          var mappedRaffle=rcRes.data.map(function(r){
            return {m:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][r.month-1],
              p:r.prize_icon+" "+r.prize_name,v:"Q"+r.prize_value,cost:r.prize_value,dbId:r.id};
          });
          setRaffleCal(mappedRaffle);
        }

        // Cargar miembros reales de Supabase
        var memRes=await sb.from('members').select('*').order('created_at',{ascending:false});
        if(memRes.data&&memRes.data.length>0){
          var realMembers=memRes.data.map(function(m){
            return {
              id:m.id,name:m.name,email:m.email||"",
              phone:m.phone||"",dpi:m.dpi||"",plate:m.plate||"",nit:m.nit||"",bday:m.birthday||"",
              points:m.points||0,gallons:parseFloat(m.gallons)||0,spent:parseFloat(m.spent)||0,
              visits:m.visits||0,tickets:m.tickets||0,redeemed:m.redeemed_count||0,
              referrals:m.referral_count||0,
              registered:m.created_at?m.created_at.split("T")[0]:"",
              lastBuy:m.last_buy?m.last_buy.split("T")[0]:"",
              station:m.last_station||"",cardId:m.card_id||"",
              supabaseUser:true,authProvider:m.auth_provider||"google",
              authProviderId:m.auth_provider_id||""
            };
          });
          setCusts(realMembers);
          console.log("[Club Turkaj] âœ… "+memRes.data.length+" miembros cargados de Supabase");
        }

        // Cargar historial de actividad
        var actRes=await sb.from('activity_log').select('*').order('created_at',{ascending:false}).limit(200);
        if(actRes.data&&actRes.data.length>0){
          var actMap={};
          actRes.data.forEach(function(a){
            if(!actMap[a.member_id])actMap[a.member_id]=[];
            actMap[a.member_id].push({
              type:a.activity_type,desc:a.description,
              pts:a.points_change,amount:a.amount?parseFloat(a.amount):null,
              date:a.created_at?a.created_at.split("T")[0]:"",
              station:a.station_id||""
            });
          });
          setActivityLog(actMap);
          console.log("[Club Turkaj] âœ… "+actRes.data.length+" actividades cargadas");
        }

        setSbConnected(true);
        console.log("[Club Turkaj] âœ… Datos cargados desde Supabase");
      }catch(e){
        console.error("[Club Turkaj] âš ï¸ Error cargando de Supabase, usando datos locales:",e);
      }finally{
        if(mounted)setSbLoading(false);
      }
    }
    loadFromSupabase();
    return function(){mounted=false;if(authSub&&authSub.data&&authSub.data.subscription)authSub.data.subscription.unsubscribe();};
  },[]);

  // ===== SUPABASE WRITE HELPERS =====
  var sbWrite=useCallback(function(table,data){
    if(!sb||!sbConnected)return Promise.resolve(null);
    return sb.from(table).insert(data).select().then(function(r){
      if(r.error)console.error("[Supabase write]",table,r.error);
      return r;
    });
  },[sbConnected]);

  var sbUpdate=useCallback(function(table,id,data){
    if(!sb||!sbConnected)return Promise.resolve(null);
    return sb.from(table).update(data).eq('id',id).then(function(r){
      if(r.error)console.error("[Supabase update]",table,r.error);
      return r;
    });
  },[sbConnected]);

  var sbRpc=useCallback(function(fn,params){
    if(!sb||!sbConnected)return Promise.resolve(null);
    return sb.rpc(fn,params).then(function(r){
      if(r.error)console.error("[Supabase rpc]",fn,r.error);
      return r;
    });
  },[sbConnected]);

  // Sync a member's data to Supabase
  var syncMember=useCallback(function(memberId,data){
    if(!sb||!sbConnected)return;
    sb.from('members').update(data).eq('id',memberId).then(function(r){
      if(r.error)console.error("[Sync]",r.error);
    });
  },[sbConnected]);

  // Log an activity to Supabase
  var logActivity=useCallback(function(memberId,type,desc,ptsChange,amount){
    if(!sb||!sbConnected)return;
    var entry={member_id:memberId,activity_type:type,description:desc,points_change:ptsChange||null,amount:amount||null};
    sb.from('activity_log').insert(entry).then(function(r){
      if(r.error)console.error("[Activity]",r.error);
    });
    // Also update local activityLog
    setActivityLog(function(prev){
      var n=Object.assign({},prev);
      if(!n[memberId])n[memberId]=[];
      n[memberId]=[{type:type,desc:desc,pts:ptsChange,amount:amount,date:new Date().toISOString().split("T")[0],station:""}].concat(n[memberId]);
      return n;
    });
  },[sbConnected]);

  const fire=useCallback((m)=>{setToast(m);setTimeout(()=>setToast(null),3000)},[]);
  const logout=useCallback(function(){
    if(sb){
      sb.auth.signOut({scope:'local'}).then(function(){
        console.log("[Auth] Signed out from Supabase");
      });
    }
    if(view==="client"){setAuthScreen("login");setCScr("home");setLoginPhone("");setLoginPass("");}
    else if(view==="operator"){setAuthOp("login");setOScr("ohome");setOpLoginGafete("");setOpLoginDpi("");setOpLoginUser("");setOpLoginPass("");}
    else if(view==="admin"){setAuthAdmin("login");setScr("dash");setAdLoginDpi("");setAdLoginGafete("");setAdLoginEmail("");setAdLoginPass("");}
    setAuthError("");
    fire("ğŸ‘‹ SesiÃ³n cerrada");
  },[view,fire]);
  const curMonth=new Date().getMonth();
  const doSurvey=useCallback(()=>{
    if(mySurveyCount>=cfg.surveyDaily){fire("âŒ LÃ­mite diario alcanzado");return}
    const newCount=mySurveyCount+1;
    setMySurveyCount(newCount);
    setMe(p=>({...p,points:p.points+cfg.surveyPts}));
    setCusts(p=>p.map(c=>c.id===me.id?{...c,points:c.points+cfg.surveyPts}:c));
    setSurveys(p=>[{id:"SV-"+Date.now(),cid:me.id,name:me.name,date:new Date().toISOString().split("T")[0],pts:cfg.surveyPts},...p]);
    var bonusTicket=newCount>=cfg.surveyDaily;
    if(bonusTicket){
      setMe(p=>({...p,tickets:p.tickets+1}));
      setCusts(p=>p.map(c=>c.id===me.id?{...c,tickets:c.tickets+1}:c));
      setRafData(p=>p.map((rd,i)=>{
        if(i!==curMonth)return rd;
        const ps=[...rd.participants];
        const ex=ps.findIndex(p2=>p2.cid===me.id);
        if(ex>=0)ps[ex]={...ps[ex],tickets:ps[ex].tickets+1};
        else ps.push({cid:me.id,name:me.name,tickets:1});
        return {...rd,participants:ps};
      }));
      fire(`ğŸ“‹ +${cfg.surveyPts} pts Â· ğŸŸï¸ Â¡Bonus! 5/5 encuestas = 1 boleto gratis`);
    }else{
      fire(`ğŸ“‹ Encuesta completada Â· +${cfg.surveyPts} pts (${newCount}/${cfg.surveyDaily})`);
    }
    // Sync to Supabase
    syncMember(me.id,{points:me.points+cfg.surveyPts,tickets:bonusTicket?me.tickets+1:me.tickets,updated_at:new Date().toISOString()});
    logActivity(me.id,'encuesta','Encuesta completada'+(bonusTicket?' + Boleto bonus':''),cfg.surveyPts);
    if(sb&&sbConnected){
      sb.from('surveys').insert({member_id:me.id,points_earned:cfg.surveyPts,bonus_ticket:bonusTicket}).then(function(r){if(r.error)console.error("[Survey]",r.error)});
    }
  },[me,mySurveyCount,fire,curMonth,cfg,syncMember,logActivity]);

  const addPurchase=useCallback((cid,a,f)=>{
    const pts=Math.floor(a/cfg.qPerPt);
    const gal=+(a/FUEL[f]).toFixed(2);
    if(pts<=0){fire("MÃ­nimo Q10");return}
    const today=new Date().toISOString().split("T")[0];
    const buyer=custs.find(c=>c.id===cid);
    const isFirstBuy=buyer&&!buyer.lastBuy;
    const refBonus=isFirstBuy&&buyer.referredBy&&!buyer.refBonusPaid;
    setCusts(p=>p.map(c=>{
      if(c.id===cid)return {...c,points:c.points+pts+(refBonus?cfg.referralPts:0),gallons:+(c.gallons+gal).toFixed(2),spent:c.spent+a,visits:c.visits+1,lastBuy:today,refBonusPaid:refBonus?true:c.refBonusPaid};
      if(refBonus&&c.id===buyer.referredBy)return {...c,points:c.points+cfg.referralPts,referrals:(c.referrals||0)+1};
      return c;
    }));
    if(me.id===cid)setMe(p=>({...p,points:p.points+pts+(refBonus?cfg.referralPts:0),gallons:+(p.gallons+gal).toFixed(2),spent:p.spent+a,visits:p.visits+1,lastBuy:today,refBonusPaid:refBonus?true:p.refBonusPaid}));
    if(refBonus&&me.id===buyer.referredBy)setMe(p=>({...p,points:p.points+cfg.referralPts,referrals:(p.referrals||0)+1}));
    let msg=`+${pts} pts Â· ${gal} gal Â· Q${a}`;
    if(refBonus)msg+=` Â· ğŸ‰ Bonus referido +${cfg.referralPts} pts (ambos)`;
    fire(msg);
    setModal(null);setAmt("");setInvScan(null);
    // Sync to Supabase
    if(buyer){
      syncMember(cid,{points:(buyer.points||0)+pts+(refBonus?cfg.referralPts:0),gallons:+(parseFloat(buyer.gallons||0)+gal).toFixed(2),spent:+(parseFloat(buyer.spent||0)+a).toFixed(2),visits:(buyer.visits||0)+1,last_buy:new Date().toISOString(),updated_at:new Date().toISOString()});
      logActivity(cid,'compra','Compra '+gal+' gal '+f+' Â· Q'+a,pts,a);
      // Insert into purchases table
      if(sb&&sbConnected){
        sb.from('purchases').insert({member_id:cid,amount:a,fuel_type:f,gallons:gal,points_earned:pts}).then(function(r){
          if(r.error)console.error("[Purchase]",r.error);
        });
      }
    }
    // Trigger rating popup after purchase
    var rndOp=operators.filter(function(o){return o.active});
    var theOp=rndOp.length>0?rndOp[Math.floor(Math.random()*rndOp.length)]:operators[0];
    setTimeout(function(){setShowRating({opId:theOp.id,opName:theOp.name,custId:cid});setRatingStars(0)},1500);
  },[me,custs,fire,cfg,syncMember,logActivity]);

  const redeem=useCallback((r)=>{
    const t=gT(me.gallons);
    const cost=Math.round(r.pts*(1-t.redeemDisc));
    if(me.points<cost)return;
    setMe(p=>({...p,points:p.points-cost,redeemed:(p.redeemed||0)+1}));
    setCusts(p=>p.map(c=>c.id===me.id?{...c,points:c.points-cost,redeemed:(c.redeemed||0)+1}:c));
    const code=`TK-${Math.random().toString(36).substring(2,8).toUpperCase()}`;
    setRedeemedList(p=>[{id:`RD-${Date.now()}`,reward:{name:r.name,icon:r.icon,cat:r.cat},cost,date:new Date().toISOString().split("T")[0],code,collected:false},...p]);
    fire(`ğŸ‰ Â¡Canjeaste ${r.name} por ${cost} pts!`);
    syncMember(me.id,{points:me.points-cost,redeemed_count:(me.redeemed||0)+1,updated_at:new Date().toISOString()});
    logActivity(me.id,'canje','CanjeÃ³: '+r.name+' '+r.icon,-cost);
    if(sb&&sbConnected){
      sb.from('redemptions').insert({member_id:me.id,reward_id:r.id,points_spent:cost,redemption_code:code}).then(function(res){if(res.error)console.error("[Redeem]",res.error)});
    }
  },[me,fire,cfg,gT,syncMember,logActivity]);

  const buyTickets=useCallback((n)=>{
    const cost=n*cfg.ticketPts;
    if(me.points>cost||me.points===cost){
      setMe(p=>({...p,points:p.points-cost,tickets:p.tickets+n}));
      setCusts(p=>p.map(c=>c.id===me.id?{...c,points:c.points-cost,tickets:c.tickets+n}:c));
      setRafData(p=>p.map((rd,i)=>{
        if(i!==curMonth)return rd;
        const ps=[...rd.participants];
        const ex=ps.findIndex(p2=>p2.cid===me.id);
        if(ex>=0)ps[ex]={...ps[ex],tickets:ps[ex].tickets+n};
        else ps.push({cid:me.id,name:me.name,tickets:n});
        return {...rd,participants:ps};
      }));
      fire(`ğŸŸï¸ ${n} boleto${n>1?"s":""} Â· -${cost} pts`);
      syncMember(me.id,{points:me.points-cost,tickets:me.tickets+n,updated_at:new Date().toISOString()});
      logActivity(me.id,'rifa','ComprÃ³ '+n+' boletos de rifa',-cost);
    }else{fire("Puntos insuficientes")}
  },[me,fire,curMonth,cfg,syncMember,logActivity]);

  const regC=useCallback(()=>{
    if(!newC.name||!newC.phone||!newC.dpi||!newC.plate){fire("âŒ Nombre, DPI, TelÃ©fono y Placa son obligatorios");return}
    if(!newC.cardId){fire("âŒ SeleccionÃ¡ una tarjeta fÃ­sica para el nuevo miembro");return}
    if(custs.some(c=>c.dpi===newC.dpi)){fire("âŒ DPI ya registrado");return}
    if(custs.some(c=>c.phone===newC.phone)){fire("âŒ TelÃ©fono ya registrado");return}
    if(custs.some(c=>c.plate===newC.plate)){fire("âŒ Placa ya registrada");return}
    let bonus=15;
    if(newC.email)bonus+=5;
    if(newC.bday)bonus+=5;
    if(newC.nit)bonus+=5;
    const refId=newC.refCode?`CT-${newC.refCode.replace("T","").padStart(3,"0")}`:null;
    const referrer=refId?custs.find(c=>c.id===refId):null;
    const {refCode,...rest}=newC;

    // Insert to Supabase
    var memberData={
      phone:newC.phone,password_hash:"operator-registered",auth_provider:"operator",
      name:newC.name,dpi:newC.dpi||null,plate:newC.plate||null,
      nit:newC.nit||null,email:newC.email||null,birthday:newC.bday||null,
      points:bonus,gallons:0,spent:0,visits:0,tickets:0,
      redeemed_count:0,referral_count:0
    };
    if(sb&&sbConnected){
      sb.from('members').insert(memberData).select().then(function(r){
        if(r.data&&r.data[0]){
          var dbId=r.data[0].id;
          var c={id:dbId,...rest,points:bonus,gallons:0,spent:0,visits:0,registered:new Date().toISOString().split("T")[0],lastBuy:"",station:newC.station||"Turkaj I",tickets:0,redeemed:0,referrals:0,referredBy:referrer?referrer.id:null,refBonusPaid:false,cardId:newC.cardId,supabaseUser:true};
          setCusts(function(p){return [].concat(p,[c])});
          assignCard(dbId,newC.cardId);
          logActivity(dbId,'registro','Registro por operador con tarjeta '+newC.cardId,bonus);
          fire("Â¡Bienvenido "+c.name+"! +"+bonus+" pts Â· ğŸ’³ "+newC.cardId+(referrer?" Â· Referido por "+referrer.name:""));
        }else{
          console.error("[RegC] Insert error",r.error);
          fire("âŒ Error al registrar: "+(r.error?r.error.message:"desconocido"));
        }
      });
    }else{
      var id="CT-"+String(custs.length+1).padStart(3,"0");
      var c={id:id,...rest,points:bonus,gallons:0,spent:0,visits:0,registered:new Date().toISOString().split("T")[0],lastBuy:"",station:newC.station||"Turkaj I",tickets:0,redeemed:0,referrals:0,referredBy:referrer?referrer.id:null,refBonusPaid:false,cardId:newC.cardId};
      setCusts(function(p){return [].concat(p,[c])});
      assignCard(id,newC.cardId);
      fire("Â¡Bienvenido "+c.name+"! +"+bonus+" pts Â· ğŸ’³ "+newC.cardId);
    }
    setNewC({name:"",phone:"",dpi:"",plate:"",email:"",bday:"",nit:"",station:"",refCode:"",cardId:""});setModal(null);
  },[newC,custs,fire,assignCard,sbConnected,logActivity]);

  const filt=custs.filter(c=>c.name.toLowerCase().includes(q.toLowerCase())||c.id.toLowerCase().includes(q.toLowerCase()));
  const fRew=(catF==="todos"?rewards:rewards.filter(r=>r.cat===catF)).filter(function(r){if(!r.tier)return true;const mt=gT(me?me.gallons:0);return mt.name===r.tier||(r.tier==="PLATINO"&&mt.name==="BLACK")});

  // ===== Shared styles =====
  const sBtn={border:"none",borderRadius:14,padding:"14px",fontFamily:"'DM Sans'",fontSize:14,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8};
  const sYBtn={...sBtn,background:"#FBBC04",color:"#0D0D0D"};
  const sDBtn={...sBtn,background:"#0D0D0D",color:"#fff"};
  const sInput={width:"100%",padding:"14px 16px",background:"#FAFAFA",border:"2px solid #eee",borderRadius:14,fontFamily:"'DM Sans'",fontSize:15,outline:"none",color:"#0D0D0D"};
  const sLbl={display:"block",fontSize:12,fontWeight:700,color:"#757575",marginBottom:6,textTransform:"uppercase",letterSpacing:.8};
  const sSec={padding:"20px 20px 8px",fontSize:12,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:2};
  const sCard={background:"#fff",borderRadius:18,padding:16,border:"1px solid #eee",display:"flex",alignItems:"center",gap:14,margin:"8px 20px"};
  const sStatY={background:"#FBBC04",borderRadius:14,padding:14,textAlign:"center"};

  // Tier-aware theme for client views
  const cTier=gT(me?me.gallons:0);
  const cSec={...sSec,color:cTier.name==="BLACK"?"#9E9E9E":cTier.name==="PLATINO"?"#9E9E9E":"#BDBDBD"};
  const oSec={...sSec,color:"#9E9E9E"};
  const aSec={...sSec,color:"#9E9E9E"};
  const GAL="radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)";
  const GAL2="radial-gradient(ellipse at 50% 50%, #100e1a 0%, #08070e 50%, #06060C 100%)";
  const GAL3="radial-gradient(ellipse at 30% 60%, #0e0c18 0%, #090814 45%, #06060C 100%)";

  const sStat=cTier.name==="PLATINO"?{background:"linear-gradient(135deg,#E0E0E0,#EEEEEE,#E0E0E0)",borderRadius:14,padding:14,border:"1px solid #BDBDBD",textAlign:"center",color:"#424242"}:cTier.name==="BLACK"?{background:GAL3,borderRadius:14,padding:14,border:"1px solid rgba(255,255,255,.08)",textAlign:"center",color:"#fff"}:{background:"#fff",borderRadius:14,padding:14,border:"1px solid #eee",textAlign:"center"};

  const TH=cTier.name==="BLACK"?{
    pri:"#fff",priBg:GAL,priGrad:"linear-gradient(135deg,#111,#1a1a2e,#111)",
    sec:"rgba(255,255,255,.7)",secBg:GAL3,
    light:GAL3,lightBorder:"#333",
    accent:"#fff",accentBg:"rgba(255,255,255,.12)",accentTxt:"#fff",
    statHi:GAL,statHiTxt:"#fff",statHiBorder:"1px solid rgba(255,255,255,.1)",
    btnBg:"#fff",btnTxt:"#000",
    selBg:"#fff",selBorder:"#fff",selTxt:"#000",
    unselBg:GAL3,unselBorder:"rgba(255,255,255,.1)",unselTxt:"#aaa",
    tagBg:"rgba(255,255,255,.1)",tagTxt:"#ccc",
    calCur:GAL,calCurBorder:"rgba(255,255,255,.15)",calPast:GAL3,calFut:GAL2,calCurTxt:"#fff",
    rafGrad:GAL,rafTxt:"#fff",rafSub:"rgba(255,255,255,.5)",
    ptsTxt:"#FBBC04",
    tipBg:GAL3,tipBorder:"rgba(255,255,255,.1)",tipAccent:"#fff",
    cardBg:GAL3,cardBorder:"1px solid rgba(255,255,255,.08)",
    headerBg:GAL2,histBg:GAL2
  }:cTier.name==="PLATINO"?{
    pri:"#1565C0",priBg:"linear-gradient(135deg,#9E9E9E,#BDBDBD,#CFD8DC,#BDBDBD)",priGrad:"linear-gradient(135deg,#1565C0,#42A5F5,#1565C0)",
    sec:"rgba(21,101,192,.7)",secBg:"linear-gradient(135deg,#E0E0E0,#EEEEEE)",
    light:"linear-gradient(135deg,#CFD8DC,#ECEFF1,#CFD8DC)",lightBorder:"#BDBDBD",
    accent:"#1565C0",accentBg:"rgba(158,158,158,.15)",accentTxt:"#1565C0",
    statHi:"linear-gradient(135deg,#9E9E9E,#BDBDBD,#CFD8DC,#BDBDBD)",statHiTxt:"#fff",statHiBorder:"1px solid rgba(255,255,255,.3)",
    btnBg:"#1565C0",btnTxt:"#fff",
    selBg:"#1565C0",selBorder:"#1565C0",selTxt:"#fff",
    unselBg:"linear-gradient(135deg,#E0E0E0,#EEEEEE,#E0E0E0)",unselBorder:"#BDBDBD",unselTxt:"#616161",
    tagBg:"rgba(158,158,158,.15)",tagTxt:"#616161",
    calCur:"#1565C0",calCurBorder:"#0D47A1",calPast:"linear-gradient(135deg,#E0E0E0,#EEEEEE)",calFut:"linear-gradient(135deg,#ECEFF1,#F5F5F5,#ECEFF1)",calCurTxt:"#fff",
    rafGrad:"linear-gradient(135deg,#1565C0,#42A5F5,#1565C0)",rafTxt:"#fff",rafSub:"rgba(255,255,255,.6)",
    ptsTxt:"#1565C0",
    tipBg:"linear-gradient(135deg,#E0E0E0,#EEEEEE)",tipBorder:"#BDBDBD",tipAccent:"#1565C0",
    cardBg:"linear-gradient(135deg,#E8E8E8,#F0F0F0,#E8E8E8)",cardBorder:"1px solid #BDBDBD",
    headerBg:"linear-gradient(135deg,#DADADA,#E8E8E8,#DADADA)",histBg:"linear-gradient(135deg,#E0E0E0,#EEEEEE,#E0E0E0)"
  }:{
    pri:"#FBBC04",priBg:"#FBBC04",priGrad:"linear-gradient(135deg,#FBBC04,#FFD540,#FBBC04)",
    sec:"rgba(251,188,4,.7)",secBg:"#FFF8E1",
    light:"#FFF8E1",lightBorder:"#E6A800",
    accent:"#F0A500",accentBg:"rgba(251,188,4,.08)",accentTxt:"#F0A500",
    statHi:"#FBBC04",statHiTxt:"#0D0D0D",statHiBorder:"none",
    btnBg:"#FBBC04",btnTxt:"#0D0D0D",
    selBg:"#FBBC04",selBorder:"#FBBC04",selTxt:"#0D0D0D",
    unselBg:"#fff",unselBorder:"#eee",unselTxt:"#757575",
    tagBg:"rgba(251,188,4,.1)",tagTxt:"#F0A500",
    calCur:"#FBBC04",calCurBorder:"#E6A800",calPast:"#F5F5F5",calFut:"#FFF8E1",calCurTxt:"#0D0D0D",
    rafGrad:"linear-gradient(135deg,#FBBC04,#FFD540)",rafTxt:"#0D0D0D",rafSub:"rgba(0,0,0,.5)",
    ptsTxt:"#F0A500",
    tipBg:"#FFF8E1",tipBorder:"#FBBC04",tipAccent:"#F0A500"
  };
  const cYBtn={...sBtn,background:TH.btnBg,color:TH.btnTxt};
  const cStatY={background:TH.statHi,borderRadius:14,padding:14,textAlign:"center",border:TH.statHiBorder,color:TH.statHiTxt,position:"relative",overflow:"hidden"};
  const GalaxyDust=({n=10})=>cTier.name!=="BLACK"?null:React.createElement(React.Fragment, null, [...Array(n)].map((_,i)=>React.createElement("div", {key:i, style:{position:"absolute",width:i%4===0?1.5:0.7,height:i%4===0?1.5:0.7,borderRadius:"50%",background:`rgba(255,255,255,${i%4===0?.7:i%3===0?.4:.2})`,left:`${(i*19+7)%100}%`,top:`${(i*29+11)%100}%`,zIndex:0}})));

  // ===== ADMIN SCREENS =====
  const Dash=()=>{
    const tP=custs.reduce((s,c)=>s+c.points,0);
    const tG=custs.reduce((s,c)=>s+c.gallons,0);
    const tSpent=custs.reduce((s,c)=>s+c.spent,0);
    const tRedeemed=custs.reduce((s,c)=>s+(c.redeemed||0),0);
    const curYM=`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}`;
    const newThisMonth=custs.filter(c=>c.registered&&c.registered.startsWith(curYM)).length;
    const ptsRedeemed=tRedeemed*175;
    const ptsUnredeemed=tP;
    const ptsTotal=ptsUnredeemed+ptsRedeemed;
    const qPerPt=1/cfg.qPerPt;
    const qTotal=(ptsTotal*qPerPt);
    const qUnredeemed=(ptsUnredeemed*qPerPt);
    const qRedeemed=(ptsRedeemed*qPerPt);
    const gSuper=+(tG*0.45).toFixed(0);
    const gRegular=+(tG*0.35).toFixed(0);
    const gDiesel=+(tG-gSuper-gRegular).toFixed(0);
    const iSuper=+(gSuper*FUEL.super).toFixed(0);
    const iRegular=+(gRegular*FUEL.regular).toFixed(0);
    const iDiesel=+(gDiesel*FUEL.diesel).toFixed(0);
    const rm=raffleCal[curMonth];
    const aCard={background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`};

    const Pair=({l,r,onL,onR})=>React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,padding:"0 20px",marginBottom:10}}, React.createElement("div", {onClick:onL, style:{...aCard,padding:16,cursor:onL?"pointer":"default"}}, l), React.createElement("div", {onClick:onR, style:{background:"#FBBC04",borderRadius:18,padding:16,cursor:onR?"pointer":"default"}}, r));

    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"24px 20px 16px",background:"linear-gradient(180deg,#252525,"+adminBg+")"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10}}, React.createElement("div", {style:{width:40,height:40,borderRadius:12,background:"#FBBC04",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:900,boxShadow:"0 4px 12px rgba(251,188,4,.3)"}}, "T"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:22,fontWeight:800,color:"#fff"}}, "Club", React.createElement("span", {style:{color:"#FBBC04"}}, "Turkaj")), React.createElement("div", {style:{fontSize:12,color:"#777",fontWeight:600}}, "Panel de AdministraciÃ³n")), React.createElement("button", {onClick:()=>setScr("cfg"), style:{width:40,height:40,borderRadius:12,background:adminCard,border:`1px solid ${adminBorder}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#9E9E9E"}}, React.createElement(IC.Gear, null)), React.createElement("button", {onClick:logout, title:"Cerrar sesiÃ³n", style:{width:40,height:40,borderRadius:12,background:adminCard,border:`1px solid ${adminBorder}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#9E9E9E"}}, React.createElement(IC.Logout, null)))), React.createElement("div", {style:{padding:"12px 20px 6px",display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setModal("scan"), style:{...sYBtn,flex:1}}, React.createElement(IC.QR, null), "Escanear"), React.createElement("button", {onClick:()=>setModal("newC"), style:{flex:1,padding:"12px",borderRadius:14,border:`1px solid ${adminBorder}`,background:adminCard,fontFamily:"'DM Sans'",fontSize:14,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6,color:adminTxt}}, React.createElement(IC.Plus, null), "Nuevo")), React.createElement("div", {style:aSec}, "Miembros"), React.createElement(Pair, {onL:()=>setScr("mem"), onR:()=>setScr("mem"), l:React.createElement(React.Fragment, null, React.createElement("div", {style:{...sMono,fontSize:26,letterSpacing:-1,color:"#fff"}}, custs.length), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginTop:4,fontWeight:700}}, "Miembros actuales")), r:React.createElement(React.Fragment, null, React.createElement("div", {style:{...sMono,fontSize:26,letterSpacing:-1}}, newThisMonth), React.createElement("div", {style:{fontSize:11,color:"rgba(0,0,0,.45)",textTransform:"uppercase",letterSpacing:1,marginTop:4,fontWeight:700}}, "Nuevos este mes"))}), React.createElement("div", {style:aSec}, "Puntos del Programa"), React.createElement("div", {onClick:()=>setScr("cat"), style:{margin:"0 20px 10px",padding:20,...aCard,cursor:"pointer"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16}}, React.createElement("div", null, React.createElement("div", {style:{...sMono,fontSize:32,letterSpacing:-2,color:"#fff"}}, ptsTotal.toLocaleString()), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E",fontWeight:700,textTransform:"uppercase",letterSpacing:1}}, "Puntos totales")), React.createElement("div", {style:{textAlign:"right"}}, React.createElement("div", {style:{...sMono,fontSize:28,letterSpacing:-2,color:"#2E7D32"}}, "Q", qTotal.toLocaleString()), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E",fontWeight:700,textTransform:"uppercase",letterSpacing:1}}, "Equivalente"))), React.createElement("div", {style:{height:1,background:adminBorder,margin:"0 0 14px"}}), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12}}, React.createElement("div", {style:{background:"rgba(46,125,50,.15)",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#66BB6A",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "ğŸŸ¢ Sin canjear"), React.createElement("div", {style:{...sMono,fontSize:22,letterSpacing:-1,color:"#fff"}}, ptsUnredeemed.toLocaleString()), React.createElement("div", {style:{fontSize:12,color:"#66BB6A",fontWeight:700,marginTop:2}}, "Q", qUnredeemed.toLocaleString())), React.createElement("div", {style:{background:"rgba(230,81,0,.15)",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#FFB74D",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "ğŸŸ  Canjeados"), React.createElement("div", {style:{...sMono,fontSize:22,letterSpacing:-1,color:"#fff"}}, ptsRedeemed.toLocaleString()), React.createElement("div", {style:{fontSize:12,color:"#FFB74D",fontWeight:700,marginTop:2}}, "Q", qRedeemed.toLocaleString())))), React.createElement("div", {style:aSec}, "Galones Vendidos"), React.createElement(Pair, {l:React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#E65100"}}, "â›½ SÃºper", React.createElement("span", {style:{...sMono,float:"right",color:"#fff"}}, gSuper.toLocaleString())), React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#2E7D32",marginTop:8}}, "â›½ Regular", React.createElement("span", {style:{...sMono,float:"right",color:"#fff"}}, gRegular.toLocaleString())), React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#1565C0",marginTop:8}}, "â›½ DiÃ©sel", React.createElement("span", {style:{...sMono,float:"right",color:"#fff"}}, gDiesel.toLocaleString())), React.createElement("div", {style:{marginTop:10,paddingTop:10,borderTop:`1px solid ${adminBorder}`,fontSize:13,fontWeight:800,color:"#fff"}}, "Total", React.createElement("span", {style:{...sMono,float:"right"}}, tG.toFixed(0), "gal"))), r:React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"rgba(0,0,0,.7)"}}, "SÃºper", React.createElement("span", {style:{...sMono,float:"right"}}, "Q", iSuper.toLocaleString())), React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"rgba(0,0,0,.7)",marginTop:8}}, "Regular", React.createElement("span", {style:{...sMono,float:"right"}}, "Q", iRegular.toLocaleString())), React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"rgba(0,0,0,.7)",marginTop:8}}, "DiÃ©sel", React.createElement("span", {style:{...sMono,float:"right"}}, "Q", iDiesel.toLocaleString())), React.createElement("div", {style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(0,0,0,.15)",fontSize:13,fontWeight:800}}, "Total", React.createElement("span", {style:{...sMono,float:"right"}}, "Q", tSpent.toLocaleString())))}), React.createElement("div", {style:aSec}, "Rifa:", rm.m), React.createElement("div", {onClick:()=>setScr("raf"), style:{margin:"0 20px",padding:16,background:"linear-gradient(135deg,#FBBC04,#FFD540)",borderRadius:18,display:"flex",alignItems:"center",gap:14,cursor:"pointer"}}, React.createElement("div", {style:{fontSize:32}}, rm.p.split(" ")[0]), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:800,fontSize:15}}, rm.p), React.createElement("div", {style:{fontSize:12,opacity:.6}}, cfg.ticketPts, "pts = 1 boleto")), React.createElement("div", {style:{fontSize:18,opacity:.4}}, "â†’")), React.createElement("div", {style:aSec}, "Encuestas Shell"), (()=>{const totalSurveys=surveys.length;const totalPts=surveys.reduce((s,sv)=>s+sv.pts,0);const uniqueMembers=[...new Set(surveys.map(s=>s.cid))].length;return(
      React.createElement("div", {onClick:()=>setShowSurveys(true), style:{margin:"0 20px 10px",padding:16,background:"linear-gradient(135deg,#3A2800,#4A3000)",borderRadius:18,border:"2px solid #E65100",display:"flex",alignItems:"center",gap:14,cursor:"pointer"}}, React.createElement("div", {style:{width:48,height:48,borderRadius:14,background:"#E65100",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:22}}, "ğŸ“Š"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,color:"#fff"}}, totalSurveys, "encuestas completadas"), React.createElement("div", {style:{fontSize:11,color:"#BDBDBD",marginTop:2}}, totalPts, "pts otorgados Â·", uniqueMembers, "miembros"), React.createElement("div", {style:{fontSize:10,color:"#FFB74D",fontWeight:700,marginTop:2}}, "LÃ­mite:", cfg.surveyDaily, "/dÃ­a por cliente Â· â‰ˆ Q", (totalPts/cfg.qPerPt).toFixed(2))), React.createElement("div", {style:{fontSize:18,color:"#666"}}, "â†’")))})(), React.createElement("div", {style:aSec}, "Top 10 â€” Galones Comprados"), [...custs].sort((a,b)=>b.gallons-a.gallons).slice(0,10).map((c,i)=>{const t=gT(c.gallons);const medals=["ğŸ¥‡","ğŸ¥ˆ","ğŸ¥‰"];return(
        React.createElement("div", {key:c.id, onClick:()=>{setSel(c);setScr("det")}, style:{display:"flex",alignItems:"center",padding:"12px 20px",borderBottom:`1px solid ${adminBorder}`,cursor:"pointer",opacity:1}}, React.createElement("div", {style:{width:28,textAlign:"center",fontSize:i<3?18:13,fontWeight:800,color:i<3?undefined:"#666",marginRight:10,...sMono}}, i<3?medals[i]:i+1), React.createElement("div", {style:{width:40,height:40,borderRadius:12,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:15,marginRight:12,flexShrink:0}}, c.name.charAt(0)), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:700,fontSize:13,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#E0E0E0"}}, c.name), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E",marginTop:2,display:"flex",alignItems:"center",gap:6}}, React.createElement(Badge, {t:t}))), React.createElement("div", {style:{textAlign:"right",flexShrink:0}}, React.createElement("div", {style:{...sMono,fontSize:15,fontWeight:800,color:"#fff"}}, c.gallons.toFixed(0), React.createElement("span", {style:{fontSize:10,color:"#777",fontWeight:600}}, "gal")), React.createElement("div", {style:{fontSize:10,color:"#777",...sMono}}, "Q", c.spent.toLocaleString())))
      )}), showSurveys&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",backdropFilter:"blur(6px)",zIndex:200,display:"flex",alignItems:"flex-end",justifyContent:"center",animation:"fadeIn .2s"}, onClick:()=>setShowSurveys(false)}, React.createElement("div", {onClick:e=>e.stopPropagation(), style:{background:"#fff",borderRadius:"28px 28px 0 0",padding:"28px 24px 32px",maxWidth:480,width:"100%",maxHeight:"85vh",overflowY:"auto",animation:"fadeUp .3s"}}, React.createElement("div", {style:{width:40,height:4,background:"#E0E0E0",borderRadius:2,margin:"0 auto 20px"}}), React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:4}}, "ğŸ“Š Encuestas Shell"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginBottom:6}}, "LÃ­mite:", cfg.surveyDaily, "encuestas diarias por cliente"), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,marginBottom:20}}, React.createElement("div", {style:{background:"#FFF3E0",borderRadius:12,padding:12,textAlign:"center"}}, React.createElement("div", {style:{...sMono,fontSize:22,fontWeight:800,color:"#E65100"}}, surveys.length), React.createElement("div", {style:{fontSize:9,fontWeight:700,color:"#E65100",textTransform:"uppercase",letterSpacing:.5}}, "Total")), React.createElement("div", {style:{background:"#E8F5E9",borderRadius:12,padding:12,textAlign:"center"}}, React.createElement("div", {style:{...sMono,fontSize:22,fontWeight:800,color:"#2E7D32"}}, surveys.reduce((s,sv)=>s+sv.pts,0)), React.createElement("div", {style:{fontSize:9,fontWeight:700,color:"#2E7D32",textTransform:"uppercase",letterSpacing:.5}}, "Pts")), React.createElement("div", {style:{background:"#E3F2FD",borderRadius:12,padding:12,textAlign:"center"}}, React.createElement("div", {style:{...sMono,fontSize:22,fontWeight:800,color:"#1565C0"}}, [...new Set(surveys.map(s=>s.cid))].length), React.createElement("div", {style:{fontSize:9,fontWeight:700,color:"#1565C0",textTransform:"uppercase",letterSpacing:.5}}, "Miembros"))), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#E65100",textTransform:"uppercase",letterSpacing:1,marginBottom:10}}, "Por miembro"), (()=>{const byCid={};surveys.forEach(s=>{if(!byCid[s.cid])byCid[s.cid]={name:s.name,entries:[]};byCid[s.cid].entries.push(s)});return Object.entries(byCid).sort((a,b)=>b[1].entries.length-a[1].entries.length).map(([cid,data])=>{const t=gT((custs.find(c=>c.id===cid)||{gallons:0}).gallons);return(
            React.createElement("div", {key:cid, style:{marginBottom:12,background:"#FAFAFA",borderRadius:16,border:"1px solid #eee",overflow:"hidden"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10,padding:14,background:"#FFF3E0"}}, React.createElement("div", {style:{width:36,height:36,borderRadius:10,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:14}}, data.name.charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:13}}, data.name), React.createElement(Badge, {t:t})), React.createElement("div", {style:{textAlign:"right"}}, React.createElement("div", {style:{...sMono,fontSize:18,fontWeight:800,color:"#2E7D32"}}, "+", data.entries.length*cfg.surveyPts, "pts"), React.createElement("div", {style:{fontSize:10,color:"#E65100",fontWeight:700,...sMono}}, data.entries.length, "encuestas"))), React.createElement("div", {style:{padding:"8px 14px"}}, data.entries.map((sv,i)=>React.createElement("div", {key:sv.id, style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderBottom:i?"1px solid #F5F5F5":"none"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",gap:8}}, React.createElement("div", {style:{width:6,height:6,borderRadius:3,background:"#E65100"}}), React.createElement("span", {style:{fontSize:12,...sMono,color:"#616161"}}, sv.date), React.createElement("span", {style:{fontSize:11,...sMono,color:"#9E9E9E"}}, sv.time)), React.createElement("span", {style:{fontSize:12,fontWeight:700,color:"#2E7D32"}}, "+", sv.pts, "pts")))))
          )})})(), React.createElement("button", {onClick:()=>setShowSurveys(false), style:{...sDBtn,width:"100%",marginTop:12}}, "Cerrar"))));
  };
    const Members=()=>{
    const d=sortDir==="desc"?1:-1;
    const sortFns={
      all:(a,b)=>(b.gallons-a.gallons)*d,
      gal:(a,b)=>(b.gallons-a.gallons)*d,
      pts:(a,b)=>(b.points-a.points)*d,
      name:(a,b)=>a.name.localeCompare(b.name)*d,
      ant:(a,b)=>(a.registered||"").localeCompare(b.registered||"")*d,
    };
    const stFiltered=stationFilter?filt.filter(c=>getMemberStation(c.id,stationMode)===stationFilter):filt;
    const sorted=[...stFiltered].sort(sortFns[memSort]||sortFns.all);
    const toggleSort=(k)=>{if(memSort===k)setSortDir(p=>p==="desc"?"asc":"desc");else{setMemSort(k);setSortDir("desc")}};
    const arrow=k=>memSort===k?(sortDir==="desc"?" â–¼":" â–²"):"";
    const stCounts={};["Turkaj I","Turkaj II","Turkaj III"].forEach(st=>{stCounts[st]=custs.filter(c=>getMemberStation(c.id,stationMode)===st).length});
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${adminBorder}`,background:adminBg,position:"sticky",top:0,zIndex:50}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:"#fff"}}, "Miembros"), React.createElement("button", {onClick:()=>setModal("newC"), style:{...sYBtn,padding:"8px 16px",fontSize:12}}, React.createElement(IC.Plus, null), "Nuevo")), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10,background:adminCard,borderRadius:14,padding:"0 16px",margin:"12px 20px",border:`2px solid ${adminBorder}`}}, React.createElement(IC.Search, null), React.createElement("input", {placeholder:"Buscar...", value:q, onChange:e=>setQ(e.target.value), style:{flex:1,padding:"14px 0",background:"none",border:"none",fontFamily:"'DM Sans'",fontSize:14,outline:"none",color:"#fff"}})), React.createElement("div", {style:{padding:"0 20px 8px"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "ğŸ“ Por estaciÃ³n"), React.createElement("div", {style:{display:"flex",gap:4}}, [{k:"last",l:"Ãšltima visita"},{k:"most",l:"MÃ¡s visitas"}].map(m=>
            React.createElement("button", {key:m.k, onClick:()=>{setStationMode(m.k);if(stationFilter)setStationFilter(stationFilter)}, style:{padding:"4px 10px",borderRadius:10,border:`1px solid ${stationMode===m.k?"#FBBC04":adminBorder}`,background:stationMode===m.k?"rgba(251,188,4,.15)":adminCard,fontFamily:"'DM Sans'",fontSize:9,fontWeight:700,cursor:"pointer",color:stationMode===m.k?"#FBBC04":"#9E9E9E"}}, m.l)
          ))), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8}}, ["Turkaj I","Turkaj II","Turkaj III"].map(st=>{const active=stationFilter===st;return(
          React.createElement("button", {key:st, onClick:()=>setStationFilter(active?null:st), style:{padding:"12px 8px",borderRadius:14,border:active?"2px solid #FBBC04":`2px solid ${adminBorder}`,background:active?"rgba(251,188,4,.12)":adminCard,fontFamily:"'DM Sans'",cursor:"pointer",textAlign:"center",transition:"all .2s"}}, React.createElement("div", {style:{fontSize:16}}, "ğŸª"), React.createElement("div", {style:{fontSize:12,fontWeight:800,color:active?"#FBBC04":"#E0E0E0",marginTop:2}}, st), React.createElement("div", {style:{...sMono,fontSize:16,fontWeight:800,color:active?"#FBBC04":"#777",marginTop:2}}, stCounts[st]), React.createElement("div", {style:{fontSize:8,fontWeight:700,color:active?"#FBBC04":"#555",textTransform:"uppercase",letterSpacing:.5}}, "miembros"))
        )})), stationFilter&&React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:8,padding:"8px 12px",background:"rgba(251,188,4,.1)",borderRadius:10}}, React.createElement("span", {style:{fontSize:12,fontWeight:700,color:"#FBBC04"}}, "ğŸ“", stationFilter, "Â·", stationMode==="last"?"Ãºltima visita":"mÃ¡s visitas", "Â·", stFiltered.length, "miembros"), React.createElement("button", {onClick:()=>setStationFilter(null), style:{background:"none",border:"none",fontSize:16,cursor:"pointer",color:"#FBBC04"}}, "âœ•"))), React.createElement("div", {style:{display:"flex",gap:6,padding:"0 20px 10px",overflowX:"auto"}}, [{k:"all",l:"Todos"},{k:"gal",l:"â›½ MembresÃ­a"},{k:"pts",l:"ğŸ¯ Puntos"},{k:"name",l:"ğŸ”¤ Nombre"},{k:"ant",l:"ğŸ“… AntigÃ¼edad"}].map(s=>
        React.createElement("button", {key:s.k, onClick:()=>toggleSort(s.k), style:{padding:"7px 14px",borderRadius:20,border:`2px solid ${memSort===s.k?"#FBBC04":adminBorder}`,background:memSort===s.k?"#FBBC04":adminCard,fontFamily:"'DM Sans'",fontSize:11,fontWeight:700,cursor:"pointer",color:memSort===s.k?"#0D0D0D":"#9E9E9E",whiteSpace:"nowrap"}}, s.l, arrow(s.k))
      )), sorted.map((c,i)=>{const t=gT(c.gallons);const cStation=getMemberStation(c.id,stationMode);return(
      React.createElement("div", {key:c.id, onClick:()=>{setSel(c);setScr("det")}, style:{display:"flex",alignItems:"center",padding:"14px 20px",borderBottom:`1px solid ${adminBorder}`,cursor:"pointer",opacity:1}}, React.createElement("div", {style:{width:44,height:44,borderRadius:14,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:16,marginRight:14}}, c.name.charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:14,color:adminTxt}}, c.name), React.createElement("div", {style:{fontSize:12,color:"#777",marginTop:2}}, c.dpi||c.email||c.phone, memSort==="ant"&&c.registered&&React.createElement("span", {style:{marginLeft:6,color:"#F0A500",fontWeight:700}}, "Â·", c.registered), cStation&&React.createElement("span", {style:{marginLeft:4,fontSize:9,fontWeight:800,background:"rgba(251,188,4,.15)",color:"#FBBC04",padding:"1px 5px",borderRadius:4}}, "ğŸ“", cStation.replace("Turkaj ","T")))), React.createElement("div", {style:{textAlign:"right"}}, React.createElement("div", {style:{...sMono,fontSize:14,color:"#fff"}}, c.points, "pts"), React.createElement("div", {style:{fontSize:11,color:"#777"}}, c.gallons.toFixed(1), "gal"), React.createElement(Badge, {t:t})))
    )}));
  };

  const Detail=()=>{
    const c=custs.find(x=>x.id===sel?.id)||sel; if(!c)return null;
    const t=gT(c.gallons); const pg=tierProg(c.gallons,t); const d=daysInactive(c.lastBuy);
    const saveMember=(data)=>{
      const newGal=+(data.gallons);const newPts=+(data.points);
      const updated={...c,...data,gallons:newGal,points:newPts,spent:+(data.spent)};
      setCusts(p=>p.map(x=>x.id===c.id?updated:x));
      if(me.id===c.id)setMe(updated);
      setSel(updated);
      setEditMember(null);
      const newT=gT(newGal);const oldT=gT(c.gallons);
      if(newT.name!==oldT.name)fire(`ğŸ‰ ${c.name} ahora es ${newT.name}!`);
      else fire("âœ… Miembro actualizado");
      // Sync to Supabase
      syncMember(c.id,{name:data.name,phone:data.phone,dpi:data.dpi,plate:data.plate,nit:data.nit,email:data.email,birthday:data.bday,points:newPts,gallons:newGal,spent:+(data.spent),visits:+(data.visits||c.visits),updated_at:new Date().toISOString()});
    };
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${adminBorder}`,background:adminBg,position:"sticky",top:0,zIndex:50}}, React.createElement("button", {onClick:()=>{setScr("mem");setSel(null)}, style:{background:"none",border:"none",color:"#9E9E9E",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600}}, React.createElement(IC.Back, null), "Miembros"), React.createElement("div", {style:{display:"flex",gap:8}}, React.createElement("button", {onClick:()=>setEditMember({...c,gallons:c.gallons.toString(),points:c.points.toString(),spent:c.spent.toString()}), style:{width:36,height:36,borderRadius:10,border:`1px solid ${adminBorder}`,background:adminCard,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#9E9E9E"}}, React.createElement(IC.Gear, null)), React.createElement("button", {onClick:()=>setModal("buy"), style:{...sYBtn,width:"auto",padding:"8px 16px",fontSize:13}}, React.createElement(IC.Plus, null), "Compra"))), React.createElement(Warn, {last:c.lastBuy}), React.createElement("div", {style:{borderRadius:24,padding:24,margin:"16px 20px",background:tierBg(t.name)||t.grad,color:t.color,position:"relative",overflow:"hidden",textAlign:"center",boxShadow:tierShadow(t.name),border:tierBorder(t.name)}}, React.createElement(TierDeco, {name:t.name}), React.createElement("div", {style:{position:"relative",zIndex:2}}, React.createElement("div", {style:{width:56,height:56,borderRadius:16,background:t.name==="BLACK"?"rgba(255,255,255,.1)":t.name==="PLATINO"?"rgba(255,255,255,.2)":"rgba(0,0,0,.08)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,fontWeight:800,margin:"0 auto 8px"}}, c.name.charAt(0)), React.createElement("div", {style:{fontSize:18,fontWeight:800}}, c.name), React.createElement("div", {style:{display:"flex",justifyContent:"center",gap:8,marginTop:8}}, React.createElement(Badge, {t:t})), React.createElement("div", {style:{padding:"14px 0 0"}}, React.createElement("div", {style:{fontSize:44,fontWeight:800,letterSpacing:-3,lineHeight:1,animation:"pop .5s ease-out"}}, c.points), React.createElement("div", {style:{fontSize:10,textTransform:"uppercase",letterSpacing:3,marginTop:4,fontWeight:700,opacity:.5}}, "Puntos")), React.createElement("div", {style:{fontSize:11,marginTop:6,opacity:.5}}, c.gallons.toFixed(1), "gal", t.discount>0?` Â· -Q${t.discount.toFixed(2)}/gal`:"", t.redeemDisc>0?` Â· -${Math.round(t.redeemDisc*100)}% canje`:""), t.next&&React.createElement("div", {style:{marginTop:14}}, React.createElement("div", {style:{display:"flex",justifyContent:"flex-end",fontSize:10,opacity:.5,marginBottom:6,fontWeight:700}}, React.createElement("span", null, c.gallons.toFixed(0), "/", t.target, "gal")), React.createElement("div", {style:{position:"relative"}}, React.createElement("div", {style:{height:6,borderRadius:3,overflow:"hidden",background:t.name==="BLACK"?"rgba(255,255,255,.15)":t.name==="PLATINO"?"rgba(0,0,0,.15)":"rgba(0,0,0,.08)"}}, React.createElement("div", {style:{height:"100%",borderRadius:3,width:`${pg}%`,background:t.name==="BLACK"?"#fff":t.name==="PLATINO"?"#1565C0":"#000",transition:"width 1s ease"}})), React.createElement("div", {style:{position:"absolute",top:-20,left:`${pg}%`,transform:"translateX(-50%)",fontSize:10,fontWeight:800,color:t.color,...sMono,whiteSpace:"nowrap"}}, c.gallons.toFixed(0)))))), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,padding:"0 20px",margin:"12px 0"}}, [{v:c.visits,l:"Visitas"},{v:c.gallons.toFixed(1),l:"Galones"},{v:`Q${c.spent.toLocaleString()}`,l:"Gastado"}].map((s,i)=>React.createElement("div", {key:i, style:{background:adminCard,borderRadius:14,padding:14,border:`1px solid ${adminBorder}`,textAlign:"center"}}, React.createElement("div", {style:{...sMono,fontSize:20,color:"#fff"}}, s.v), React.createElement("div", {style:{fontSize:10,color:"#777",textTransform:"uppercase",letterSpacing:1,marginTop:4,fontWeight:700}}, s.l)))), React.createElement("div", {style:{margin:"12px 20px",background:adminCard,borderRadius:18,padding:20,border:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#777",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "Info"), [{l:"ID",v:c.id},{l:"DPI",v:c.dpi||"â€”"},{l:"Tel",v:c.phone},{l:"Placa",v:c.plate||"â€”"},{l:"NIT",v:c.nit||"CF"},{l:"Email",v:c.email||"â€”"},{l:"Cumple",v:fmtBday(c.bday)},{l:"ğŸ’³ Tarjeta",v:c.cardId||"â€”"},{l:"EstaciÃ³n registro",v:c.station},{l:"Ãšltima estaciÃ³n",v:(activityLog[c.id]||[]).find(a=>a.station)?.station||c.station},{l:"Registro",v:c.registered},{l:"Ãšltima compra",v:c.lastBuy},{l:"DÃ­as inactivo",v:d},{l:"Boletos rifa",v:c.tickets},{l:"Referidos",v:c.referrals||0}].map(x=>
          React.createElement("div", {key:x.l, style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("span", {style:{fontSize:13,color:"#777"}}, x.l), React.createElement("span", {style:{fontSize:13,...sMono,color:"#E0E0E0"}}, x.v))
        )), (()=>{const card=getCard(c.id);const cTierName=gT(c.gallons).name;const cardTier=card?card.tier:"â€”";const needsUpgrade=card&&((cTierName==="PLATINO"&&card.tier==="ORO")||(cTierName==="BLACK"&&card.tier!=="BLACK"));
      const tierCol={ORO:"#F0A500",PLATINO:"#1565C0",BLACK:"#fff"};const tierBg2={ORO:"rgba(251,188,4,.15)",PLATINO:"rgba(21,101,192,.15)",BLACK:"rgba(255,255,255,.08)"};
      return React.createElement("div", {style:{margin:"12px 20px",background:adminCard,borderRadius:18,padding:20,border:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#777",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "ğŸ’³ Tarjeta FÃ­sica"), card?React.createElement(React.Fragment, null, React.createElement("div", {style:{background:tierBg2[card.tier],borderRadius:14,padding:16,border:`1px solid ${tierCol[card.tier]}30`,marginBottom:12,display:"flex",alignItems:"center",gap:14}}, React.createElement("div", {style:{width:48,height:48,borderRadius:14,background:card.tier==="BLACK"?"radial-gradient(ellipse at 20% 30%,#0d0d1a,#050508,#000)":card.tier==="PLATINO"?"linear-gradient(135deg,#9E9E9E,#BDBDBD)":"linear-gradient(135deg,#FBBC04,#FFD540)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:900,color:card.tier==="BLACK"?"#fff":"#0D0D0D",border:card.tier==="PLATINO"?"1px solid #1565C0":"none"}}, "QR"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{...sMono,fontSize:15,fontWeight:800,color:tierCol[card.tier]}}, card.id), React.createElement("div", {style:{fontSize:11,color:"#777",marginTop:2}}, "Tarjeta", card.tier, "Â· Activa")), React.createElement("div", {style:{fontSize:18}}, "âœ…")), needsUpgrade&&React.createElement("div", {style:{background:"rgba(230,81,0,.15)",borderRadius:14,padding:14,border:"1px solid rgba(230,81,0,.3)",marginBottom:12}}, React.createElement("div", {style:{fontSize:12,fontWeight:800,color:"#FFB74D",marginBottom:6}}, "âš ï¸ Tarjeta no coincide con nivel"), React.createElement("div", {style:{fontSize:11,color:"#BDBDBD"}}, "Tiene tarjeta ", React.createElement("strong", {style:{color:tierCol[card.tier]}}, card.tier), " pero su nivel actual es ", React.createElement("strong", {style:{color:tierCol[cTierName]}}, cTierName)), React.createElement("button", {onClick:()=>setShowCardSwap(c), style:{marginTop:10,padding:"10px 16px",borderRadius:12,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:12,fontWeight:800,cursor:"pointer",color:"#0D0D0D",display:"flex",alignItems:"center",gap:6}}, "ğŸ”„ Cambiar Tarjeta a", cTierName)), !needsUpgrade&&React.createElement("button", {onClick:()=>setShowCardSwap(c), style:{width:"100%",padding:"10px",borderRadius:12,border:`1px solid ${adminBorder}`,background:"rgba(255,255,255,.04)",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer",color:"#9E9E9E",display:"flex",alignItems:"center",justifyContent:"center",gap:6}}, "ğŸ”„ Cambiar Tarjeta"), card.history.length>1&&React.createElement("div", {style:{marginTop:12}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#555",textTransform:"uppercase",letterSpacing:1,marginBottom:8}}, "Historial de tarjetas"), cards.filter(cd=>cd.history.some(h=>h.to===c.id||h.from===c.id)).map(cd=>React.createElement("div", {key:cd.id, style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontSize:10,...sMono,color:tierCol[cd.tier],fontWeight:700}}, cd.id), React.createElement("div", {style:{fontSize:10,color:cd.status==="active"?"#66BB6A":cd.status==="destroyed"?"#EF5350":"#777",fontWeight:700}}, cd.status==="active"?"Activa":cd.status==="inactive"?"Inactiva":cd.status==="destroyed"?"Destruida":"Disponible"))))):React.createElement("div", {style:{textAlign:"center",padding:12,color:"#777",fontSize:13}}, "Sin tarjeta asignada"))})(), (()=>{const acts=activityLog[c.id]||[];const cSurveys=surveys.filter(s=>s.cid===c.id);const wifiCount=acts.filter(a=>a.type==="wifi").length;const purchaseActs=acts.filter(a=>a.type==="compra");const canjeActs=acts.filter(a=>a.type==="canje");const rifaActs=acts.filter(a=>a.type==="rifa");const refActs=acts.filter(a=>a.type==="referido");const evtActs=acts.filter(a=>a.type==="evento");const regAct=acts.find(a=>a.type==="registro");
      const ptsFromPurchases=purchaseActs.reduce((s,a)=>s+parseInt(a.pts||"0"),0);
      const ptsFromSurveys=cSurveys.length*cfg.surveyPts;
      const ptsFromRefs=refActs.reduce((s,a)=>s+parseInt(a.pts||"0"),0);
      const ptsFromEvents=evtActs.reduce((s,a)=>s+parseInt(a.pts||"0"),0);
      const ptsFromReg=regAct?parseInt(regAct.pts||"0"):0;
      const ptsSpentCanje=Math.abs(canjeActs.reduce((s,a)=>s+parseInt(a.pts||"0"),0));
      const ptsSpentRifa=Math.abs(rifaActs.reduce((s,a)=>s+parseInt(a.pts||"0"),0));
      const stationVisits={};acts.filter(a=>a.station).forEach(a=>{stationVisits[a.station]=(stationVisits[a.station]||0)+1});
      const lastStationAct=acts.find(a=>a.station);
      const lastStation=lastStationAct?lastStationAct.station:c.station;
      return React.createElement(React.Fragment, null, React.createElement("div", {style:{margin:"12px 20px",background:adminCard,borderRadius:18,padding:20,border:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#777",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "ğŸ“Š MÃ©tricas del Miembro"), React.createElement("div", {style:{background:"linear-gradient(135deg,#3A3000,#4A3800)",borderRadius:14,padding:14,marginBottom:12,border:"1px solid #FBBC04"}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "ğŸ“ Ãšltima estaciÃ³n visitada"), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:"#fff"}}, lastStation), lastStationAct&&React.createElement("div", {style:{fontSize:11,color:"#FBBC04",marginTop:2,...sMono}}, lastStationAct.date, "Â·", lastStationAct.desc)), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:6,marginBottom:12}}, ["Turkaj I","Turkaj II","Turkaj III"].map(st=>{const cnt=stationVisits[st]||0;return(
            React.createElement("div", {key:st, style:{background:cnt>0?"rgba(46,125,50,.15)":"rgba(255,255,255,.05)",borderRadius:12,padding:10,textAlign:"center",border:cnt>0?"1px solid rgba(46,125,50,.3)":`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:cnt>0?"#66BB6A":"#555"}}, "ğŸª", st), React.createElement("div", {style:{...sMono,fontSize:20,fontWeight:800,color:cnt>0?"#66BB6A":"#555",marginTop:2}}, cnt), React.createElement("div", {style:{fontSize:8,fontWeight:700,color:cnt>0?"#66BB6A":"#555",textTransform:"uppercase",letterSpacing:.5}}, "visitas"))
          )})), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8}}, [
            {l:"Pts por compras",v:`+${ptsFromPurchases}`,bg:"rgba(46,125,50,.15)",c:"#66BB6A",ic:"â›½"},
            {l:"Pts por encuestas",v:`+${ptsFromSurveys} (${cSurveys.length}Ã—)`,bg:"rgba(230,81,0,.15)",c:"#FFB74D",ic:"ğŸ“Š"},
            {l:"Pts por referidos",v:`+${ptsFromRefs} (${refActs.length}Ã—)`,bg:"rgba(123,31,162,.15)",c:"#CE93D8",ic:"ğŸ‘¥"},
            {l:"Pts por eventos",v:`+${ptsFromEvents} (${evtActs.length}Ã—)`,bg:"rgba(198,40,40,.15)",c:"#EF9A9A",ic:"ğŸ‰"},
            {l:"Pts por registro",v:`+${ptsFromReg}`,bg:"rgba(0,131,143,.15)",c:"#4DD0E1",ic:"ğŸ“"},
          ].map((m,i)=>React.createElement("div", {key:i, style:{background:m.bg,borderRadius:12,padding:10}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:m.c,textTransform:"uppercase",letterSpacing:.5}}, m.ic, m.l), React.createElement("div", {style:{...sMono,fontSize:16,fontWeight:800,color:m.c,marginTop:4}}, m.v)))), React.createElement("div", {style:{height:1,background:adminBorder,margin:"12px 0"}}), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8}}, [
            {l:"Gastados canje",v:ptsSpentCanje,ic:"ğŸ·ï¸",bg:"rgba(230,81,0,.15)",c:"#FFB74D"},
            {l:"Gastados rifa",v:ptsSpentRifa,ic:"ğŸŸï¸",bg:"rgba(123,31,162,.15)",c:"#CE93D8"},
            {l:"Conexiones WiFi",v:wifiCount,ic:"ğŸ“¶",bg:"rgba(21,101,192,.15)",c:"#64B5F6"},
          ].map((m,i)=>React.createElement("div", {key:i, style:{background:m.bg,borderRadius:12,padding:10,textAlign:"center"}}, React.createElement("div", {style:{fontSize:16}}, m.ic), React.createElement("div", {style:{...sMono,fontSize:18,fontWeight:800,color:m.c}}, m.v), React.createElement("div", {style:{fontSize:9,fontWeight:700,color:m.c,textTransform:"uppercase",letterSpacing:.5,marginTop:2}}, m.l))))), React.createElement("div", {style:{margin:"12px 20px",background:adminCard,borderRadius:18,padding:20,border:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#777",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "ğŸ“‹ Historial de Actividad"), acts.length===0?React.createElement("div", {style:{textAlign:"center",padding:20,color:"#555",fontSize:13}}, "Sin actividad registrada"):
        acts.map((a,i)=>{
          const icons={compra:"â›½",wifi:"ğŸ“¶",encuesta:"ğŸ“Š",canje:"ğŸ·ï¸",rifa:"ğŸŸï¸",referido:"ğŸ‘¥",evento:"ğŸ‰",registro:"ğŸ“",comentario:"ğŸ’¬"};
          const colors={compra:"#66BB6A",wifi:"#64B5F6",encuesta:"#FFB74D",canje:"#EF9A9A",rifa:"#CE93D8",referido:"#CE93D8",evento:"#FBBC04",registro:"#4DD0E1",comentario:"#64B5F6"};
          const bgs={compra:"rgba(46,125,50,.15)",wifi:"rgba(21,101,192,.15)",encuesta:"rgba(230,81,0,.15)",canje:"rgba(198,40,40,.15)",rifa:"rgba(123,31,162,.15)",referido:"rgba(123,31,162,.15)",evento:"rgba(251,188,4,.15)",registro:"rgba(0,131,143,.15)",comentario:"rgba(21,101,192,.15)"};
          const prevDate=i>0?acts[i-1].date:null;
          const showDate=a.date!==prevDate;
          return React.createElement("div", {key:i}, showDate&&React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#666",textTransform:"uppercase",letterSpacing:1,margin:i===0?"0 0 8px":"14px 0 8px",...sMono}}, a.date), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{width:32,height:32,borderRadius:10,background:bgs[a.type]||"rgba(255,255,255,.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,flexShrink:0}}, icons[a.type]||"â€¢"), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontSize:12,fontWeight:600,color:"#E0E0E0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}, a.desc), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:6,marginTop:2}}, a.station&&React.createElement("span", {style:{fontSize:9,fontWeight:800,background:"rgba(251,188,4,.15)",color:"#FBBC04",padding:"2px 6px",borderRadius:6}}, "ğŸ“", a.station), a.q&&React.createElement("span", {style:{fontSize:10,color:"#777",...sMono}}, a.q))), a.pts&&React.createElement("div", {style:{...sMono,fontSize:13,fontWeight:800,color:a.pts.startsWith("-")?"#EF9A9A":colors[a.type]||"#E0E0E0",flexShrink:0}}, a.pts)))
        })))})(), editMember&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",backdropFilter:"blur(6px)",zIndex:200,display:"flex",alignItems:"flex-end",justifyContent:"center",animation:"fadeIn .2s"}, onClick:()=>setEditMember(null)}, React.createElement("div", {onClick:e=>e.stopPropagation(), style:{background:"#fff",borderRadius:"28px 28px 0 0",padding:"28px 24px 32px",maxWidth:480,width:"100%",maxHeight:"85vh",overflowY:"auto",animation:"fadeUp .3s"}}, React.createElement("div", {style:{width:40,height:4,background:"#E0E0E0",borderRadius:2,margin:"0 auto 20px"}}), React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:4}}, "âš™ï¸ Editar Miembro"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginBottom:16}}, editMember.name, "Â·", editMember.id), (()=>{const prevT=gT(c.gallons);const newT=gT(+editMember.gallons||0);const changed=prevT.name!==newT.name;return changed?React.createElement("div", {style:{padding:14,background:changed?"#E8F5E9":"#fff",borderRadius:14,marginBottom:16,border:"2px solid #2E7D32",animation:"pop .4s ease"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#2E7D32"}}, "ğŸ‰ Cambio de nivel detectado"), React.createElement("div", {style:{fontSize:12,marginTop:4,color:"#424242"}}, prevT.name, "â†’", React.createElement("strong", {style:{color:newT.name==="BLACK"?"#000":newT.name==="PLATINO"?"#1565C0":"#F0A500"}}, newT.name), "(", editMember.gallons, "gal)")):null})(), React.createElement("div", {style:{padding:"16px 0 8px"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#F0A500",textTransform:"uppercase",letterSpacing:1}}, "âš¡ Ajustes RÃ¡pidos")), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:16}}, React.createElement("div", {style:{background:"#FFF8E1",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#F0A500",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "Puntos"), React.createElement("input", {type:"number", value:editMember.points, onChange:e=>setEditMember(p=>({...p,points:e.target.value})), style:{width:"100%",padding:"10px",borderRadius:10,border:"2px solid #FBBC04",fontFamily:"'JetBrains Mono'",fontSize:20,fontWeight:800,textAlign:"center",outline:"none",background:"#fff"}}), React.createElement("div", {style:{display:"flex",gap:4,marginTop:8}}, [-100,-50,50,100].map(n=>React.createElement("button", {key:n, onClick:()=>setEditMember(p=>({...p,points:String(Math.max(0,+p.points+n))})), style:{flex:1,padding:"6px 0",borderRadius:8,border:"1px solid #eee",background:n>0?"#E8F5E9":"#FFEBEE",fontFamily:"'DM Sans'",fontSize:11,fontWeight:800,cursor:"pointer",color:n>0?"#2E7D32":"#C62828"}}, n>0?"+":"", n)))), React.createElement("div", {style:{background:"#E3F2FD",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#1565C0",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "Galones"), React.createElement("input", {type:"number", step:"0.1", value:editMember.gallons, onChange:e=>setEditMember(p=>({...p,gallons:e.target.value})), style:{width:"100%",padding:"10px",borderRadius:10,border:"2px solid #1565C0",fontFamily:"'JetBrains Mono'",fontSize:20,fontWeight:800,textAlign:"center",outline:"none",background:"#fff"}}), React.createElement("div", {style:{display:"flex",gap:4,marginTop:8}}, [-50,-20,20,50].map(n=>React.createElement("button", {key:n, onClick:()=>setEditMember(p=>({...p,gallons:String(Math.max(0,+(+p.gallons+n).toFixed(1)))})), style:{flex:1,padding:"6px 0",borderRadius:8,border:"1px solid #eee",background:n>0?"#E8F5E9":"#FFEBEE",fontFamily:"'DM Sans'",fontSize:11,fontWeight:800,cursor:"pointer",color:n>0?"#2E7D32":"#C62828"}}, n>0?"+":"", n))))), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginBottom:10}}, "Datos Personales"), [
            {k:"name",l:"Nombre",t:"text"},
            {k:"phone",l:"TelÃ©fono",t:"tel"},
            {k:"dpi",l:"DPI",t:"text"},
            {k:"plate",l:"Placa",t:"text"},
            {k:"email",l:"Email",t:"email"},
            {k:"nit",l:"NIT",t:"text"},
            {k:"bday",l:"CumpleaÃ±os",t:"date"},
          ].map(f=>
            React.createElement("div", {key:f.k, style:{marginBottom:10,display:"flex",alignItems:"center",gap:10}}, React.createElement("span", {style:{fontSize:12,fontWeight:700,color:"#9E9E9E",width:80,flexShrink:0}}, f.l), React.createElement("input", {type:f.t, value:editMember[f.k]||"", onChange:e=>setEditMember(p=>({...p,[f.k]:e.target.value})), style:{flex:1,padding:"10px 12px",borderRadius:10,border:"2px solid #eee",fontFamily:"'DM Sans'",fontSize:13,outline:"none"}}))
          ), React.createElement("div", {style:{marginBottom:10,display:"flex",alignItems:"center",gap:10}}, React.createElement("span", {style:{fontSize:12,fontWeight:700,color:"#9E9E9E",width:80,flexShrink:0}}, "EstaciÃ³n"), React.createElement("select", {value:editMember.station||"", onChange:e=>setEditMember(p=>({...p,station:e.target.value})), style:{flex:1,padding:"10px 12px",borderRadius:10,border:"2px solid #eee",fontFamily:"'DM Sans'",fontSize:13,outline:"none",appearance:"none",background:"#fff"}}, React.createElement("option", {value:"Turkaj I"}, "Turkaj I"), React.createElement("option", {value:"Turkaj II"}, "Turkaj II"), React.createElement("option", {value:"Turkaj III"}, "Turkaj III"))), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,margin:"16px 0 10px"}}, "Otros"), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:16}}, React.createElement("div", null, React.createElement("span", {style:{fontSize:11,fontWeight:700,color:"#9E9E9E"}}, "Gastado (Q)"), React.createElement("input", {type:"number", value:editMember.spent, onChange:e=>setEditMember(p=>({...p,spent:e.target.value})), style:{width:"100%",padding:"8px",borderRadius:8,border:"2px solid #eee",fontFamily:"'JetBrains Mono'",fontSize:14,fontWeight:700,textAlign:"center",outline:"none",marginTop:4}})), React.createElement("div", null, React.createElement("span", {style:{fontSize:11,fontWeight:700,color:"#9E9E9E"}}, "Visitas"), React.createElement("input", {type:"number", value:editMember.visits||0, onChange:e=>setEditMember(p=>({...p,visits:+e.target.value})), style:{width:"100%",padding:"8px",borderRadius:8,border:"2px solid #eee",fontFamily:"'JetBrains Mono'",fontSize:14,fontWeight:700,textAlign:"center",outline:"none",marginTop:4}}))), React.createElement("div", {style:{display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setEditMember(null), style:{...sDBtn,flex:1}}, "Cancelar"), React.createElement("button", {onClick:()=>saveMember(editMember), style:{...sYBtn,flex:2}}, "Guardar Cambios")))));
  };

  const Catalog=({client})=>{
    const t=client?gT(me.gallons):null;
    const allCats=["combustible","servicio","merch","cultural","shell","premium","apple",...[...new Set(rewards.map(r=>r.cat))].filter(c=>!["combustible","servicio","merch","cultural","shell","premium","apple"].includes(c))];
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",borderBottom:`1px solid ${client&&cTier.name==="BLACK"?"rgba(255,255,255,.08)":client&&cTier.name==="PLATINO"?"#BDBDBD":client?"#eee":adminBorder}`,background:client&&cTier.name!=="ORO"?TH.headerBg:client?"#fff":adminBg,display:"flex",alignItems:"center",justifyContent:"space-between"}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:client&&cTier.name==="BLACK"?"#fff":client?undefined:"#fff"}}, client?"Canjear Puntos":"CatÃ¡logo"), client&&React.createElement("button", {onClick:()=>setShowRedeemed(true), style:{display:"flex",alignItems:"center",gap:6,padding:"7px 14px",borderRadius:12,border:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.12)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"rgba(255,255,255,.3)":"#F5F5F5",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer",color:cTier.name==="BLACK"?"#fff":"#616161"}}, "ğŸ Mis Canjes", redeemedList.length>0&&React.createElement("span", {style:{background:cTier.name==="BLACK"?"#FBBC04":cTier.name==="PLATINO"?"#1565C0":"#F0A500",color:cTier.name==="PLATINO"?"#fff":"#0D0D0D",borderRadius:10,padding:"1px 7px",fontSize:10,fontWeight:800}}, redeemedList.length)), !client&&React.createElement("button", {onClick:()=>setEditReward({id:`R${Date.now()}`,name:"",icon:"ğŸ",pts:100,cat:"servicio",isNew:true}), style:{...sYBtn,padding:"8px 16px",fontSize:12}}, React.createElement(IC.Plus, null), "Nuevo")), client&&React.createElement("div", {style:{padding:"12px 20px 0",fontSize:14,fontWeight:700,color:cTier.name==="BLACK"?"#fff":cTier.name==="PLATINO"?"#424242":"#0D0D0D"}}, me.name, "Â· TenÃ©s", React.createElement("span", {style:{color:TH.ptsTxt,...sMono}}, me.points, "pts")), client&&t&&t.redeemDisc>0&&React.createElement("div", {style:{padding:"6px 20px 0",display:"flex",alignItems:"center",gap:8}}, React.createElement("div", {style:{position:"relative",overflow:"hidden",borderRadius:10,padding:"5px 12px",fontSize:12,fontWeight:800,color:"#fff",display:"inline-flex",alignItems:"center",gap:4}}, React.createElement("div", {style:{position:"absolute",inset:0,background:t.name==="BLACK"?"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)":t.name==="PLATINO"?"linear-gradient(135deg,#1565C0,#42A5F5,#1565C0)":"#FBBC04",zIndex:0}}), t.name==="BLACK"&&React.createElement(React.Fragment, null, [...Array(12)].map((_,i)=>React.createElement("div", {key:i, style:{position:"absolute",width:i%3===0?1.5:0.8,height:i%3===0?1.5:0.8,borderRadius:"50%",background:`rgba(255,255,255,${i%3===0?.8:.3})`,left:`${(i*23+10)%100}%`,top:`${(i*31+15)%100}%`,zIndex:0}}))), React.createElement("span", {style:{position:"relative",zIndex:1}}, "-", Math.round(t.redeemDisc*100), "% desc", t.name))), !client&&React.createElement("div", {style:{margin:"12px 20px",padding:16,background:"rgba(251,188,4,.12)",borderRadius:16,textAlign:"center",border:`1px solid rgba(251,188,4,.3)`}}, React.createElement("div", {style:{fontSize:18,fontWeight:800,color:"#FBBC04"}}, "Q", cfg.qPerPt, "= 1 pt"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginTop:4}}, "PLATINO -", Math.round(cfg.tiers.platino.discRedeem*100), "% Â· BLACK -", Math.round(cfg.tiers.black.discRedeem*100), "% en canje")), React.createElement("div", {style:{display:"flex",gap:6,padding:"12px 20px",overflowX:"auto"}}, ["todos",...allCats].map(f=>
          React.createElement("button", {key:f, onClick:()=>setCatF(f), style:{padding:"7px 14px",borderRadius:20,border:`1px solid ${catF===f?(client?TH.selBorder:"#FBBC04"):(client?TH.unselBorder:adminBorder)}`,background:catF===f?(client?TH.selBg:"#FBBC04"):(client?TH.unselBg:adminCard),fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,color:catF===f?(client?TH.selTxt:"#0D0D0D"):(client?TH.unselTxt:"#9E9E9E"),cursor:"pointer",whiteSpace:"nowrap"}}, f==="todos"?"Todos":CAT_L[f]||f)
        )), fRew.map((r,i)=>{
        const cs=CAT_S[r.cat]||{bg:"#F5F5F5",c:"#616161"};
        const dp=client&&t?Math.round(r.pts*(1-t.redeemDisc)):r.pts;
        const can=client?me.points>=dp:true;
        return React.createElement("div", {key:r.id, onClick:()=>client&&can&&setRedeemConfirm(r), style:{...sCard,...(client&&cTier.name!=="ORO"?{background:TH.cardBg,border:TH.cardBorder}:{}),...(!client?{background:adminCard,border:`1px solid ${adminBorder}`}:{}),opacity:client&&!can?.4:1,cursor:client&&can?"pointer":"default"}}, React.createElement("div", {style:{width:48,height:48,borderRadius:14,background:cs.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,flexShrink:0}}, r.icon), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:700,fontSize:14,color:client&&cTier.name==="BLACK"?"#fff":client?undefined:"#E0E0E0"}}, r.name, r.tier&&React.createElement("span", {style:{marginLeft:6,fontSize:9,fontWeight:800,padding:"2px 6px",borderRadius:6,background:r.tier==="BLACK"?"rgba(123,31,162,.2)":"rgba(21,101,192,.2)",color:r.tier==="BLACK"?"#CE93D8":"#64B5F6",letterSpacing:.5}}, "â˜… ", r.tier)), client&&t&&t.redeemDisc>0&&React.createElement("div", {style:{display:"flex",alignItems:"center",gap:6,marginTop:3}}, React.createElement("span", {style:{position:"relative",overflow:"hidden",borderRadius:6,padding:"2px 7px",fontSize:10,fontWeight:800,color:"#fff",display:"inline-flex",alignItems:"center"}}, React.createElement("span", {style:{position:"absolute",inset:0,background:cTier.name==="BLACK"?"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)":cTier.name==="PLATINO"?"linear-gradient(135deg,#1565C0,#42A5F5,#1565C0)":"#FBBC04",zIndex:0}}), cTier.name==="BLACK"&&React.createElement(React.Fragment, null, [...Array(8)].map((_,si)=>React.createElement("span", {key:si, style:{position:"absolute",width:si%3===0?1:0.5,height:si%3===0?1:0.5,borderRadius:"50%",background:`rgba(255,255,255,${si%3===0?.7:.25})`,left:`${(si*29+5)%100}%`,top:`${(si*37+10)%100}%`,zIndex:0}}))), React.createElement("span", {style:{position:"relative",zIndex:1}}, Math.round(t.redeemDisc*100), "% desc", t.name)), React.createElement("span", {style:{fontSize:11,color:"#BDBDBD",textDecoration:"line-through"}}, r.pts), React.createElement("span", {style:{fontSize:11,fontWeight:700,color:cTier.name==="BLACK"?"#FBBC04":cTier.name==="PLATINO"?"#1565C0":"#2E7D32"}}, "â†’", dp)), React.createElement("span", {style:{display:"inline-block",padding:"2px 8px",borderRadius:6,fontSize:9,fontWeight:800,letterSpacing:.8,textTransform:"uppercase",marginTop:3,background:cs.bg,color:cs.c}}, CAT_L[r.cat]||r.cat)), React.createElement("div", {style:{textAlign:"right",flexShrink:0,display:"flex",alignItems:"center",gap:8}}, !client&&React.createElement("button", {onClick:(e)=>{e.stopPropagation();setEditReward({...r})}, style:{width:32,height:32,borderRadius:10,border:`1px solid ${adminBorder}`,background:"rgba(255,255,255,.08)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:14,fontFamily:"'DM Sans'"}}, "âœï¸"), React.createElement("div", null, React.createElement("div", {style:{...sMono,fontSize:16,color:client&&cTier.name==="BLACK"?"#FBBC04":client&&cTier.name==="PLATINO"?"#1565C0":client?undefined:"#FBBC04"}}, client?dp.toLocaleString():r.pts.toLocaleString()), React.createElement("div", {style:{fontSize:10,fontWeight:700,color:client&&can?(cTier.name==="BLACK"?"#81C784":"#2E7D32"):(cTier.name==="BLACK"?"#999":client?"#BDBDBD":"#777")}}, client?(can?"CANJEAR":`Faltan ${(dp-me.points).toLocaleString()}`):"PTS"))));
      }));
  };

  const AdminRaffle=()=>{
    const rm=raffleCal[rafMonth];
    const rd=rafData[rafMonth];
    const totalTickets=rd.participants.reduce((s,p)=>s+p.tickets,0);
    const totalPts=totalTickets*cfg.ticketPts;
    const totalClients=rd.participants.length;
    const ptsToQ=+(totalPts*0.25).toFixed(2);
    const covers=ptsToQ>=rm.cost;
    const pct=rm.cost>0?Math.min((ptsToQ/rm.cost)*100,100):0;
    const months=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];
    const rafEmojis=["ğŸ”‘","ğŸ§´","âš½","ğŸ’","ğŸº","ğŸ”Š","ğŸ§","ğŸ®","ğŸ“º","ğŸ“±","ğŸ","ğŸ†","âŒš","ğŸ’»","ğŸ–¥ï¸","ğŸ¯","ğŸ›ï¸","ğŸ§¢","ğŸ‘•","ğŸ¨"];
    const saveRafPrize=(idx,data)=>{
      const emoji=data.icon;const name=data.name;const cost=+data.cost||0;
      const p=emoji+" "+name;const v="Q"+cost.toLocaleString();
      setRaffleCal(prev=>prev.map((r,i)=>i===idx?{...r,p,v,cost}:r));
      setEditRafPrize(null);
      fire("âœ… Premio actualizado: "+months[idx]);
    };
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",borderBottom:`1px solid ${adminBorder}`,background:adminBg}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:"#fff"}}, "Rifa Â· Admin")), React.createElement("div", {style:{display:"flex",gap:6,padding:"12px 20px",overflowX:"auto"}}, months.map((m,i)=>
          React.createElement("button", {key:i, onClick:()=>{setRafMonth(i);setRafWinner(null);setRafSpinning(false)}, style:{padding:"8px 14px",borderRadius:20,border:`2px solid ${rafMonth===i?"#FBBC04":adminBorder}`,background:rafMonth===i?"#FBBC04":adminCard,fontFamily:"'DM Sans'",fontSize:12,fontWeight:800,color:rafMonth===i?"#0D0D0D":i<=curMonth?"#E0E0E0":"#555",cursor:"pointer",whiteSpace:"nowrap",minWidth:48,textAlign:"center"}}, m)
        )), React.createElement("div", {style:{margin:"12px 20px",padding:24,background:"linear-gradient(135deg,#FBBC04,#FFD540)",borderRadius:24,position:"relative",overflow:"hidden"}}, React.createElement("div", {style:{position:"absolute",top:"-30%",right:"-20%",width:"50%",height:"80%",background:"rgba(255,255,255,.15)",borderRadius:"50%"}}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{display:"flex",alignItems:"center",gap:12,marginBottom:16}}, React.createElement("div", {style:{fontSize:36}}, rm.p.split(" ")[0]), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:16,fontWeight:800}}, rm.p), React.createElement("div", {style:{fontSize:12,opacity:.6}}, rm.m, "2026 Â·", rm.v)), React.createElement("button", {onClick:()=>setEditRafPrize({idx:rafMonth,icon:rm.p.split(" ")[0],name:rm.p.split(" ").slice(1).join(" "),cost:String(rm.cost)}), style:{width:36,height:36,borderRadius:10,background:"rgba(0,0,0,.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:16}}, "âœï¸")), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10}}, React.createElement("div", {style:{background:"rgba(0,0,0,.06)",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:700,opacity:.5,textTransform:"uppercase",letterSpacing:1}}, "Boletos comprados"), React.createElement("div", {style:{...sMono,fontSize:24,marginTop:4}}, totalTickets, "ğŸŸï¸")), React.createElement("div", {style:{background:"rgba(0,0,0,.06)",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:700,opacity:.5,textTransform:"uppercase",letterSpacing:1}}, "Puntos usados"), React.createElement("div", {style:{...sMono,fontSize:24,marginTop:4}}, totalPts.toLocaleString())), React.createElement("div", {style:{background:"rgba(0,0,0,.06)",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:700,opacity:.5,textTransform:"uppercase",letterSpacing:1}}, "Clientes participando"), React.createElement("div", {style:{...sMono,fontSize:24,marginTop:4}}, totalClients, "ğŸ‘¥")), React.createElement("div", {style:{background:"rgba(0,0,0,.06)",borderRadius:14,padding:14}}, React.createElement("div", {style:{fontSize:10,fontWeight:700,opacity:.5,textTransform:"uppercase",letterSpacing:1}}, "Costo producto"), React.createElement("div", {style:{...sMono,fontSize:24,marginTop:4}}, "Q", rm.cost.toLocaleString()))), React.createElement("div", {style:{marginTop:14,background:"rgba(0,0,0,.06)",borderRadius:14,padding:14}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}, React.createElement("div", null, React.createElement("div", {style:{fontSize:10,fontWeight:700,opacity:.5,textTransform:"uppercase",letterSpacing:1}}, "Puntos quemados â†’ Quetzales"), React.createElement("div", {style:{...sMono,fontSize:22,marginTop:4}}, "Q", ptsToQ.toLocaleString(), React.createElement("span", {style:{fontSize:12,fontWeight:600,opacity:.5}}, "/ Q", rm.cost.toLocaleString()))), React.createElement("div", {style:{fontSize:12,fontWeight:800,padding:"4px 10px",borderRadius:8,background:covers?"#2E7D32":"#C62828",color:"#fff"}}, covers?"âœ… CUBIERTO":`${pct.toFixed(0)}%`)), React.createElement("div", {style:{height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,.1)"}}, React.createElement("div", {style:{height:"100%",borderRadius:4,width:`${pct}%`,background:covers?"#2E7D32":"#C62828",transition:"width .5s ease"}})), React.createElement("div", {style:{fontSize:11,opacity:.5,marginTop:6,fontWeight:600}}, "Cada 10 pts quemados = Q2.50 que ya no canjeÃ¡s en premios")))), React.createElement("div", {style:aSec}, "Participantes Â·", rm.m), totalTickets>0&&React.createElement("div", {style:{margin:"0 20px 12px",textAlign:"center"}}, !rafWinner&&!rafSpinning&&React.createElement("button", {onClick:()=>{
          setRafSpinning(true);setRafWinner(null);
          const pool=[];rd.participants.forEach(p=>{for(let i=0;i;i++)pool.push(p)});
          let count=0;const total=15+Math.floor(Math.random()*10);
          const spin=setInterval(()=>{
            const rand=pool[Math.floor(Math.random()*pool.length)];
            setRafWinner(rand);count++;
            if(count>=total){clearInterval(spin);setRafSpinning(false);setRafWinners(prev=>({...prev,[rafMonth]:{...rand,total:totalTickets}}))}
          },150);
        }, style:{...sYBtn,width:"100%",fontSize:16,padding:"16px",gap:10}}, "ğŸ° Sortear Ganador"), (rafSpinning||rafWinner)&&React.createElement("div", {style:{background:rafSpinning?"#FFF8E1":"#E8F5E9",borderRadius:20,padding:24,border:`2px solid ${rafSpinning?"#FBBC04":"#2E7D32"}`,animation:rafSpinning?"pulse .3s infinite":"pop .5s ease"}}, rafSpinning&&React.createElement("div", {style:{fontSize:12,fontWeight:700,color:"#F0A500",textTransform:"uppercase",letterSpacing:2,marginBottom:8}}, "Seleccionando..."), !rafSpinning&&rafWinner&&React.createElement("div", {style:{fontSize:12,fontWeight:800,color:"#2E7D32",textTransform:"uppercase",letterSpacing:2,marginBottom:8}}, "ğŸ‰ Â¡Ganador!"), rafWinner&&React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:32,marginBottom:4}}, rm.p.split(" ")[0]), React.createElement("div", {onClick:()=>{const c=custs.find(x=>x.name===rafWinner.name);if(c){setSel(c);setScr("det")}}, style:{fontSize:22,fontWeight:800,animation:rafSpinning?"none":"pop .5s ease",cursor:"pointer",textDecoration:"underline",textDecorationColor:"#2E7D32",textUnderlineOffset:4}}, rafWinner.name), React.createElement("div", {style:{fontSize:11,color:"#2E7D32",fontWeight:600,marginTop:2,cursor:"pointer"}, onClick:()=>{const c=custs.find(x=>x.name===rafWinner.name);if(c){setSel(c);setScr("det")}}}, "ğŸ‘¤ Ver perfil del miembro"), React.createElement("div", {style:{fontSize:13,color:"#757575",marginTop:4}}, rafWinner.tickets, "boletos de", totalTickets, "Â·", ((rafWinner.tickets/totalTickets)*100).toFixed(1), "% probabilidad")), !rafSpinning&&rafWinner&&React.createElement("button", {onClick:()=>{setRafWinner(null)}, style:{marginTop:14,background:"#fff",border:"1px solid #eee",borderRadius:12,padding:"10px 20px",fontFamily:"'DM Sans'",fontSize:13,fontWeight:700,cursor:"pointer",color:"#757575"}}, "Sortear de nuevo"))), rd.participants.length===0&&React.createElement("div", {style:{margin:"0 20px",padding:24,background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,textAlign:"center",color:"#666"}}, React.createElement("div", {style:{fontSize:32,marginBottom:8}}, "ğŸŸï¸"), React.createElement("div", {style:{fontWeight:700,color:"#9E9E9E"}}, "Sin participantes aÃºn"), React.createElement("div", {style:{fontSize:12,marginTop:4}}, "Los clientes compran boletos desde su app")), rd.participants.map((p,i)=>{
        const cust=custs.find(c=>c.id===p.cid);
        const t=cust?gT(cust.gallons):gT(0);
        const prob=totalTickets>0?((p.tickets/totalTickets)*100).toFixed(1):0;
        return React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",padding:"14px 20px",borderBottom:`1px solid ${adminBorder}`,opacity:1}}, React.createElement("div", {style:{width:44,height:44,borderRadius:14,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:16,marginRight:14,flexShrink:0}}, p.name.charAt(0)), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:700,fontSize:14,color:"#E0E0E0"}}, p.name), React.createElement("div", {style:{fontSize:12,color:"#777",marginTop:2,display:"flex",alignItems:"center",gap:6}}, React.createElement(Badge, {t:t}), React.createElement("span", {style:{fontSize:10,color:"#777",...sMono}}, p.tickets*cfg.ticketPts, "pts usados"))), React.createElement("div", {style:{textAlign:"right",flexShrink:0}}, React.createElement("div", {style:{...sMono,fontSize:16,color:"#fff"}}, p.tickets, "ğŸŸï¸"), React.createElement("div", {style:{fontSize:11,fontWeight:700,color:"#FBBC04"}}, prob, "%")));
      }), React.createElement("div", {style:aSec}, "Calendario 2026"), raffleCal.map((r,i)=>{const isCur=i===curMonth;return(
        React.createElement("div", {key:i, style:{margin:"6px 20px",padding:"12px 16px",borderRadius:16,background:isCur?"rgba(251,188,4,.12)":adminCard,border:isCur?"2px solid #FBBC04":`1px solid ${adminBorder}`,display:"flex",alignItems:"center",gap:12,opacity:i?.5:1}}, React.createElement("div", {style:{width:36,height:36,borderRadius:10,background:isCur?"#FBBC04":"rgba(255,255,255,.08)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:800,color:isCur?"#0D0D0D":"#777",flexShrink:0}}, String(i+1).padStart(2,"0")), React.createElement("div", {style:{fontSize:20,flexShrink:0}}, r.p.split(" ")[0]), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:700,fontSize:13,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#E0E0E0"}}, r.p.split(" ").slice(1).join(" ")), React.createElement("div", {style:{fontSize:11,color:"#777",...sMono}}, r.v, "Â· Costo: Q", r.cost.toLocaleString())), React.createElement("button", {onClick:()=>setEditRafPrize({idx:i,icon:r.p.split(" ")[0],name:r.p.split(" ").slice(1).join(" "),cost:String(r.cost)}), style:{width:32,height:32,borderRadius:8,background:"rgba(255,255,255,.08)",border:`1px solid ${adminBorder}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:13,flexShrink:0}}, "âœï¸"))
      )}), editRafPrize&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",backdropFilter:"blur(6px)",zIndex:200,display:"flex",alignItems:"flex-end",justifyContent:"center",animation:"fadeIn .2s"}, onClick:()=>setEditRafPrize(null)}, React.createElement("div", {onClick:e=>e.stopPropagation(), style:{background:"#fff",borderRadius:"28px 28px 0 0",padding:"28px 24px 32px",maxWidth:480,width:"100%",maxHeight:"85vh",overflowY:"auto",animation:"fadeUp .3s"}}, React.createElement("div", {style:{width:40,height:4,background:"#E0E0E0",borderRadius:2,margin:"0 auto 20px"}}), React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:4}}, "âœï¸ Editar Premio"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginBottom:20}}, raffleCal[editRafPrize.idx].m, "2026"), React.createElement("div", {style:{textAlign:"center",marginBottom:16}}, React.createElement("div", {style:{fontSize:56,marginBottom:8}}, editRafPrize.icon), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginBottom:8}}, "Ãcono del premio"), React.createElement("div", {style:{display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center"}}, rafEmojis.map(e=>React.createElement("button", {key:e, onClick:()=>setEditRafPrize(p=>({...p,icon:e})), style:{width:40,height:40,borderRadius:10,border:editRafPrize.icon===e?"2px solid #FBBC04":"2px solid #eee",background:editRafPrize.icon===e?"#FFF8E1":"#fff",fontSize:20,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}}, e)))), React.createElement("div", {style:{marginBottom:14}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "Nombre del premio"), React.createElement("input", {value:editRafPrize.name, onChange:e=>setEditRafPrize(p=>({...p,name:e.target.value})), style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"2px solid #eee",fontFamily:"'DM Sans'",fontSize:15,fontWeight:700,outline:"none",boxSizing:"border-box"}, placeholder:"Ej: AirPods Pro"})), React.createElement("div", {style:{marginBottom:16}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "Costo real del producto (Q)"), React.createElement("input", {type:"number", value:editRafPrize.cost, onChange:e=>setEditRafPrize(p=>({...p,cost:e.target.value})), style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"2px solid #FBBC04",fontFamily:"'JetBrains Mono'",fontSize:22,fontWeight:800,textAlign:"center",outline:"none",boxSizing:"border-box"}}), React.createElement("div", {style:{display:"flex",gap:6,marginTop:8,justifyContent:"center"}}, [50,100,500,1000,5000].map(n=>React.createElement("button", {key:n, onClick:()=>setEditRafPrize(p=>({...p,cost:String(n)})), style:{padding:"6px 10px",borderRadius:8,border:"1px solid #eee",background:"#F5F5F5",fontFamily:"'DM Sans'",fontSize:11,fontWeight:700,cursor:"pointer",color:"#616161"}}, "Q", n.toLocaleString())))), React.createElement("div", {style:{background:"#FFF8E1",borderRadius:14,padding:14,marginBottom:16,border:"1px solid #FBBC04"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#F0A500",textTransform:"uppercase",letterSpacing:1,marginBottom:6}}, "Vista previa"), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:12}}, React.createElement("div", {style:{fontSize:36}}, editRafPrize.icon), React.createElement("div", null, React.createElement("div", {style:{fontSize:15,fontWeight:800}}, editRafPrize.icon, editRafPrize.name||"Sin nombre"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",...sMono}}, "Q", (+editRafPrize.cost||0).toLocaleString())))), React.createElement("div", {style:{display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setEditRafPrize(null), style:{...sDBtn,flex:1}}, "Cancelar"), React.createElement("button", {onClick:()=>saveRafPrize(editRafPrize.idx,editRafPrize), style:{...sYBtn,flex:2}}, "Guardar")))));
  };

  const ClientRaffle=()=>{
    const rm=raffleCal[cRafMonth];
    const isCur=cRafMonth===curMonth;
    const isPast=cRafMonth<curMonth;
    const mWin=rafWinners[cRafMonth];
    const cMonths=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",borderBottom:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,background:cTier.name!=="ORO"?TH.headerBg:"#fff"}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:cTier.name==="BLACK"?"#fff":undefined}}, "Rifa Mensual")), React.createElement("div", {style:{display:"flex",gap:6,padding:"12px 20px",overflowX:"auto"}}, cMonths.map((m,i)=>i<=curMonth&&
          React.createElement("button", {key:i, onClick:()=>{setCRafMonth(i);setRafFlip(false)}, style:{padding:"8px 14px",borderRadius:20,border:`2px solid ${cRafMonth===i?TH.selBorder:TH.unselBorder}`,background:cRafMonth===i?TH.selBg:TH.unselBg,fontFamily:"'DM Sans'",fontSize:12,fontWeight:800,color:cRafMonth===i?TH.selTxt:TH.unselTxt,cursor:"pointer",whiteSpace:"nowrap",minWidth:48,textAlign:"center"}}, m)
        )), React.createElement("div", {onClick:()=>setRafFlip(p=>!p), style:{margin:"12px 20px",borderRadius:24,position:"relative",overflow:"hidden",cursor:"pointer",height:340}}, React.createElement("div", {style:{position:"absolute",inset:0,transition:"transform .6s ease,opacity .5s ease",transform:rafFlip?"rotateY(180deg)":"rotateY(0)",opacity:rafFlip?0:1,backfaceVisibility:"hidden"}}, React.createElement("div", {style:{padding:24,background:TH.rafGrad,borderRadius:24,textAlign:"center",position:"relative",overflow:"hidden",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}}, React.createElement("div", {style:{position:"absolute",top:"-30%",right:"-20%",width:"50%",height:"80%",background:"rgba(255,255,255,.15)",borderRadius:"50%"}}), cTier.name==="BLACK"&&React.createElement(React.Fragment, null, [...Array(25)].map((_,i)=>React.createElement("div", {key:i, style:{position:"absolute",width:i%5===0?2:i%3===0?1.2:0.6,height:i%5===0?2:i%3===0?1.2:0.6,borderRadius:"50%",background:`rgba(${i%7===0?"251,200,120":"255,255,255"},${i%5===0?.8:i%3===0?.4:.15})`,left:`${(i*13+3)%100}%`,top:`${(i*19+7)%100}%`,zIndex:0}}))), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{fontSize:48,marginBottom:10}}, rm.p.split(" ")[0]), React.createElement("div", {style:{fontSize:22,fontWeight:800,color:TH.rafTxt}}, rm.p), React.createElement("div", {style:{fontSize:14,color:TH.rafSub,marginTop:6}}, rm.m, "2026"), mWin?React.createElement("div", {style:{marginTop:18,background:"rgba(0,0,0,.15)",borderRadius:14,padding:"14px 16px"}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,textTransform:"uppercase",letterSpacing:2,color:TH.rafTxt,opacity:.6}}, "ğŸ‰", "Ganador"), React.createElement("div", {style:{fontSize:20,fontWeight:800,marginTop:4,color:TH.rafTxt}}, mWin.name), React.createElement("div", {style:{fontSize:12,color:TH.rafSub,marginTop:4,fontWeight:700}}, ((mWin.tickets/mWin.total)*100).toFixed(1), "% probabilidad"))
          :isPast?React.createElement("div", {style:{marginTop:18,background:cTier.name==="BLACK"?"rgba(255,255,255,.08)":"rgba(0,0,0,.06)",borderRadius:14,padding:"12px 16px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:700,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":undefined,opacity:cTier.name==="BLACK"?1:.5}}, "Pendiente de sorteo"))
          :React.createElement("div", {style:{marginTop:18,background:"rgba(0,0,0,.08)",borderRadius:14,padding:"12px 16px",display:"inline-flex",alignItems:"center",gap:8,color:TH.rafTxt}}, React.createElement(IC.Ticket, null), React.createElement("span", {style:{fontWeight:800}}, cfg.ticketPts, "pts = 1 boleto")), React.createElement("div", {style:{fontSize:10,marginTop:14,opacity:.4,fontWeight:600,color:TH.rafTxt}}, "TocÃ¡ para ver cÃ³mo funciona â†’")))), React.createElement("div", {style:{position:"absolute",inset:0,transition:"transform .6s ease,opacity .5s ease",transform:rafFlip?"rotateY(0)":"rotateY(-180deg)",opacity:rafFlip?1:0,backfaceVisibility:"hidden"}}, React.createElement("div", {style:{padding:20,background:cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"linear-gradient(135deg,#37474F,#455A64,#37474F)":"linear-gradient(135deg,#424242,#616161,#424242)",borderRadius:24,textAlign:"left",position:"relative",overflow:"hidden",color:"#fff",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:20}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{fontSize:15,fontWeight:800,marginBottom:12}}, "ğŸŸï¸ Â¿CÃ³mo funciona la rifa?"), React.createElement("div", {style:{fontSize:12,lineHeight:1.6,opacity:.85}}, React.createElement("div", {style:{display:"flex",gap:8,marginBottom:8}}, React.createElement("span", {style:{fontSize:14}}, "1ï¸âƒ£"), React.createElement("span", null, "ComprÃ¡ ", React.createElement("strong", null, "boletos"), " con tus puntos: ", React.createElement("strong", null, cfg.ticketPts, "pts = 1 boleto"))), React.createElement("div", {style:{display:"flex",gap:8,marginBottom:8}}, React.createElement("span", {style:{fontSize:14}}, "2ï¸âƒ£"), React.createElement("span", null, "Cada mes se sortea un ", React.createElement("strong", null, "premio diferente"), " entre todos los participantes")), React.createElement("div", {style:{display:"flex",gap:8,marginBottom:8}}, React.createElement("span", {style:{fontSize:14}}, "3ï¸âƒ£"), React.createElement("span", null, "MÃ¡s boletos = ", React.createElement("strong", null, "mÃ¡s probabilidad"), " de ganar")), React.createElement("div", {style:{display:"flex",gap:8,marginBottom:8}}, React.createElement("span", {style:{fontSize:14}}, "ğŸª"), React.createElement("span", null, "Los premios se ", React.createElement("strong", null, "recogen en la estaciÃ³n"), " Club Turkaj")), React.createElement("div", {style:{display:"flex",gap:8,marginBottom:8}}, React.createElement("span", {style:{fontSize:14}}, "ğŸšš"), React.createElement("span", null, "Si necesitÃ¡s envÃ­o, ", React.createElement("strong", null, "te contactaremos"), " para coordinar la entrega")), React.createElement("div", {style:{display:"flex",gap:8}}, React.createElement("span", {style:{fontSize:14}}, "â°"), React.createElement("span", null, "Si el ganador ", React.createElement("strong", null, "no responde en 3 dÃ­as"), ", se hace ", React.createElement("strong", null, "nuevo sorteo")))), React.createElement("div", {style:{fontSize:10,marginTop:12,opacity:.4,fontWeight:600,textAlign:"center"}}, "â† TocÃ¡ para volver"))))), isCur&&React.createElement("div", {style:{margin:"16px 20px",padding:20,background:cTier.name!=="ORO"?TH.cardBg:"#fff",borderRadius:18,border:cTier.name!=="ORO"?TH.cardBorder:"1px solid #eee"}}, React.createElement("div", {style:{fontSize:13,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E",marginBottom:16,textAlign:"center"}}, "TenÃ©s", React.createElement("strong", {style:{color:TH.ptsTxt,...sMono,fontSize:20}}, me.points, "pts"), React.createElement("div", {style:{marginTop:6}}, "Precio por boleto:", React.createElement("strong", {style:{color:"#2E7D32",...sMono}}, cfg.ticketPts, "pts"))), React.createElement("div", {style:{display:"flex",gap:8,marginBottom:12}}, [1,3,5,10].map(n=>React.createElement("button", {key:n, onClick:function(){setRQty(n)}, style:{flex:1,padding:10,borderRadius:12,border:`2px solid ${rQty===n?TH.selBorder:TH.unselBorder}`,background:rQty===n?TH.light:TH.unselBg,fontFamily:"'DM Sans'",fontSize:13,fontWeight:800,cursor:"pointer",color:rQty===n?TH.selTxt:cTier.name==="BLACK"?"#aaa":undefined}}, n))), React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"10px 14px",borderRadius:12,background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"rgba(255,255,255,.3)":"#F5F5F5"}}, React.createElement("span", {style:{fontSize:12,fontWeight:700,color:cTier.name==="BLACK"?"rgba(255,255,255,.6)":"#757575"}}, "Costo total:"), React.createElement("span", {style:{fontSize:16,fontWeight:800,color:me.points>=rQty*cfg.ticketPts?(cTier.name==="BLACK"?"#81C784":"#2E7D32"):(cTier.name==="BLACK"?"#EF9A9A":"#C62828"),...sMono}}, rQty*cfg.ticketPts, " pts")), React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14,padding:"8px 14px",borderRadius:10,background:cTier.name==="BLACK"?"rgba(255,255,255,.03)":"rgba(0,0,0,.02)"}}, React.createElement("span", {style:{fontSize:11,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E"}}, "Boletos comprados:"), React.createElement("span", {style:{fontSize:13,fontWeight:800,color:cTier.name==="BLACK"?"#FFD54F":"#F0A500",...sMono}}, "ğŸŸï¸ ", me.tickets)), React.createElement("button", {onClick:function(){buyTickets(rQty)}, disabled:rQty*cfg.ticketPts>me.points, style:{...cYBtn,width:"100%",opacity:me.points>=rQty*cfg.ticketPts?1:.5}}, "Comprar ", rQty, " boleto", rQty>1?"s":"", " Â· ", rQty*cfg.ticketPts, " pts")), isPast&&!mWin&&React.createElement("div", {style:{margin:"16px 20px",padding:20,background:cTier.name!=="ORO"?TH.cardBg:"#FAFAFA",borderRadius:18,border:cTier.name!=="ORO"?TH.cardBorder:"1px solid #eee",textAlign:"center",color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E"}}, React.createElement("div", {style:{fontSize:13,fontWeight:700}}, "Sorteo pendiente para este mes")), React.createElement("div", {style:cSec}, "Calendario 2026"), raffleCal.map((r,i)=>{const cur=i===curMonth;const past=i;const w=rafWinners[i];return(
        React.createElement("div", {key:i, onClick:()=>(past||cur)&&setCRafMonth(i), style:{margin:"6px 20px",padding:"14px 18px",borderRadius:16,background:cur?TH.calCur:past?TH.calPast:TH.calFut,border:cur?`2px solid ${TH.calCurBorder}`:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,display:"flex",alignItems:"center",gap:14,opacity:past?.5:1,cursor:past||cur?"pointer":"default",position:"relative",overflow:"hidden"}}, cur&&cTier.name==="BLACK"&&React.createElement(React.Fragment, null, [...Array(15)].map((_,si)=>React.createElement("div", {key:si, style:{position:"absolute",width:si%4===0?1.5:0.7,height:si%4===0?1.5:0.7,borderRadius:"50%",background:`rgba(255,255,255,${si%4===0?.6:si%3===0?.3:.15})`,left:`${(si*17+5)%100}%`,top:`${(si*31+8)%100}%`,zIndex:0}}))), React.createElement("div", {style:{width:40,height:40,borderRadius:12,background:cur?`rgba(${TH.calCurTxt==="#fff"?"255,255,255":"0,0,0"},.1)`:`rgba(${cTier.name==="BLACK"?"255,255,255":"0,0,0"},.04)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:800,color:cur?TH.calCurTxt:cTier.name==="BLACK"?"#aaa":"#757575",flexShrink:0,position:"relative",zIndex:1}}, String(i+1).padStart(2,"0")), React.createElement("div", {style:{flex:1,minWidth:0,position:"relative",zIndex:1}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,color:cur?TH.calCurTxt:cTier.name==="BLACK"?"#ccc":"#424242",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}, r.p), w&&React.createElement("div", {style:{fontSize:11,color:cur&&cTier.name==="BLACK"?"#81C784":"#2E7D32",fontWeight:700,marginTop:2}}, "ğŸ‰", w.name)), cur&&!w&&React.createElement("div", {style:{fontSize:10,fontWeight:800,color:cTier.name==="BLACK"?"#81C784":cTier.name==="PLATINO"?"#fff":"#2E7D32",background:cTier.name==="BLACK"?"rgba(255,255,255,.1)":cTier.name==="PLATINO"?"rgba(255,255,255,.2)":"#E8F5E9",padding:"4px 10px",borderRadius:8,flexShrink:0,animation:"pulse 2s infinite",position:"relative",zIndex:1}}, "ACTIVA"))
      )}));
  };


  const Rules=()=>{const isBk=view==="client"&&cTier.name==="BLACK";const rBg=view==="admin"?adminBg:cTier.name==="BLACK"?"#06060C":cTier.name==="PLATINO"?"#E8E8E8":"#fff";const rCard=view==="admin"?adminCard:cTier.name==="BLACK"?"rgba(255,255,255,.04)":cTier.name==="PLATINO"?"#D6D6D6":"#fff";const rBorder=view==="admin"?adminBorder:cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"#BDBDBD":"#eee";const rTxt=view==="admin"?"#fff":cTier.name==="BLACK"?"#fff":cTier.name==="PLATINO"?"#424242":"#0D0D0D";const rSub=view==="admin"?"#9E9E9E":cTier.name==="BLACK"?"#aaa":cTier.name==="PLATINO"?"#757575":"#757575";const rSecH=view==="admin"?{...sSec,color:"#9E9E9E"}:cSec;return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",borderBottom:`1px solid ${rBorder}`,background:view==="admin"?"#252525":rCard,display:"flex",justifyContent:"space-between",alignItems:"center"}}, view==="admin"&&React.createElement("button", {onClick:()=>setScr("cfg"), style:{background:"none",border:"none",color:rSub,cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600}}, React.createElement(IC.Back, null), "Config"), React.createElement("div", {style:{fontSize:17,fontWeight:700,color:rTxt}}, "Reglas & Niveles"), React.createElement("button", {onClick:()=>setShowTerms(true), style:{background:"#FBBC04",border:"none",borderRadius:10,padding:"6px 12px",fontFamily:"'DM Sans'",fontSize:11,fontWeight:700,color:"#0D0D0D",cursor:"pointer"}}, "TÃ©rminos â“˜")), React.createElement("div", {style:{margin:"16px 20px",borderRadius:20,overflow:"hidden",border:"1px solid rgba(46,125,50,.15)"}}, React.createElement("div", {style:{padding:"20px 20px 14px",background:"#2E7D32",textAlign:"center"}}, React.createElement("div", {style:{fontSize:22,fontWeight:800,color:"#fff"}}, "CÃ³mo Ganar Puntos"), React.createElement("div", {style:{fontSize:13,color:"rgba(255,255,255,.6)",marginTop:4}}, "AcumulÃ¡ puntos de varias formas")), React.createElement("div", {style:{padding:"8px 16px 16px",background:cTier.name==="BLACK"||view==="admin"?"rgba(46,125,50,.12)":"rgba(46,125,50,.06)"}}, [
        {i:"â›½",t:"Compra de combustible",d:`Q${cfg.qPerPt} = 1 punto en cada carga`,pts:`+1 pt / Q${cfg.qPerPt}`,bg:"#FFF3E0",c:"#E65100",cb:"#FF9800"},
        {i:"ğŸ“",t:"Registro completo",d:`DPI + Tel + Placa = ${cfg.regBase} pts base Â· Email, cumple, NIT = +${cfg.regOptional} c/u`,pts:`${cfg.regBase}-${cfg.regBase+cfg.regOptional*3} pts`,bg:"#F3E5F5",c:"#7B1FA2",cb:"#CE93D8"},
        {i:"ğŸ‘¥",t:"Invitar un amigo",d:"Se activa con la 1ra compra del invitado Â· Ambos ganan",pts:`+${cfg.referralPts} pts`,bg:"#E8F5E9",c:"#2E7D32",cb:"#81C784"},
        {i:"ğŸ“‹",t:"Encuesta de satisfacciÃ³n Shell",d:`MÃ¡ximo ${cfg.surveyDaily} por dÃ­a Â· Completar ${cfg.surveyDaily} = ğŸŸï¸ 1 boleto gratis`,pts:`+${cfg.surveyPts} pts`,bg:"#E3F2FD",c:"#1565C0",cb:"#64B5F6"},
        {i:"ğŸ‚",t:"Eventos especiales",d:"CumpleaÃ±os, Navidad, DÃ­a del CariÃ±o, Aniversario Turkaj",pts:`+${cfg.tiers.oro.evtPts}-${cfg.tiers.black.evtPts} pts`,bg:view==="client"?TH.light:"#FFF8E1",c:view==="client"?TH.accent:"#F57F17",cb:"#FFD54F"},
      ].map((r,i)=>
        React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:14,padding:"14px 0",borderBottom:i<4?`1px solid ${rBorder}`:"none"}}, React.createElement("div", {style:{width:44,height:44,borderRadius:14,background:isBk?"rgba(255,255,255,.08)":r.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,flexShrink:0}}, r.i), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,color:rTxt}}, r.t), React.createElement("div", {style:{fontSize:12,color:isBk?"rgba(255,255,255,.75)":rSub,marginTop:2}}, r.d)), React.createElement("div", {style:{background:(isBk?r.cb:r.c)+"22",padding:"4px 10px",borderRadius:8,fontSize:12,fontWeight:800,color:isBk?r.cb:r.c,flexShrink:0,whiteSpace:"nowrap"}}, r.pts))
      ))), React.createElement("div", {style:{margin:"0 20px",padding:14,background:"#616161",borderRadius:14}}, React.createElement("div", {style:{display:"flex",gap:10,alignItems:"center"}}, React.createElement("div", {style:{fontSize:16}}, "ğŸ“‹"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:12,fontWeight:700,color:"#fff"}}, "Encuesta de satisfacciÃ³n Shell"), React.createElement("div", {style:{fontSize:11,color:"rgba(255,255,255,.6)",marginTop:2}}, "MÃ¡ximo 5/dÃ­a Â· Enlace de la estaciÃ³n")), React.createElement("div", {style:{background:"rgba(255,255,255,.15)",padding:"4px 10px",borderRadius:8,fontSize:12,fontWeight:800,color:"#81C784",flexShrink:0}}, "+3 pts"))), React.createElement("div", {style:rSecH}, "Eventos Especiales"), React.createElement("div", {style:{margin:"0 20px",background:rCard,borderRadius:18,border:`1px solid ${rBorder}`,overflow:"hidden"}}, [
        {i:"ğŸ‚",name:"CumpleaÃ±os",desc:"En tu dÃ­a especial",o:"+50",p:"+60",b:"+70"},
        {i:"ğŸ„",name:"Navidad",desc:"25 de diciembre",o:"+50",p:"+60",b:"+70"},
        {i:"ğŸ’",name:"DÃ­a del CariÃ±o",desc:"14 de febrero",o:"+50",p:"+60",b:"+70"},
        {i:"ğŸ‰",name:"Aniversario Turkaj",desc:"14 de mayo",o:"+50",p:"+60",b:"+70"},
      ].map((e,i)=>
        React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px",borderBottom:i<3?`1px solid ${rBorder}`:"none"}}, React.createElement("div", {style:{fontSize:24,flexShrink:0}}, e.i), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:700,fontSize:14,color:rTxt}}, e.name), React.createElement("div", {style:{fontSize:11,color:isBk?"rgba(255,255,255,.75)":rSub,marginTop:2}}, e.desc)), React.createElement("div", {style:{display:"flex",gap:4,flexShrink:0}}, React.createElement("div", {style:{background:isBk?"rgba(251,188,4,.15)":"#FFF8E1",padding:"3px 6px",borderRadius:6,fontSize:10,fontWeight:800,color:isBk?"#FFD54F":"#F0A500"}}, e.o), React.createElement("div", {style:{background:isBk?"rgba(21,101,192,.2)":"linear-gradient(135deg,#CFD8DC,#ECEFF1,#CFD8DC)",padding:"3px 6px",borderRadius:6,fontSize:10,fontWeight:800,color:isBk?"#64B5F6":"#1565C0"}}, e.p), React.createElement("div", {style:{position:"relative",overflow:"hidden",padding:"3px 6px",borderRadius:6,fontSize:10,fontWeight:800,color:"#fff"}}, React.createElement("div", {style:{position:"absolute",inset:0,background:"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)",zIndex:0}}), [...Array(8)].map((_,si)=>React.createElement("div", {key:si, style:{position:"absolute",width:si%3===0?1.2:0.6,height:si%3===0?1.2:0.6,borderRadius:"50%",background:`rgba(255,255,255,${si%3===0?.7:.25})`,left:`${(si*29+5)%100}%`,top:`${(si*37+10)%100}%`,zIndex:0}})), React.createElement("span", {style:{position:"relative",zIndex:1}}, e.b))))
      )), React.createElement("div", {style:rSecH}, "Niveles del Club"), React.createElement(TierInfo, {cfg:cfg, t:gT(0), gal:0}), React.createElement(TierInfo, {cfg:cfg, t:gT(cfg.tiers.platino.gal), gal:cfg.tiers.platino.gal}), React.createElement(TierInfo, {cfg:cfg, t:gT(cfg.tiers.black.gal), gal:cfg.tiers.black.gal}), showTerms&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",zIndex:999,display:"flex",alignItems:"flex-end",justifyContent:"center",animation:"fadeIn .2s"}, onClick:()=>setShowTerms(false)}, React.createElement("div", {style:{background:"#fff",borderRadius:"24px 24px 0 0",maxWidth:430,width:"100%",maxHeight:"80vh",overflow:"auto",padding:"20px 20px 40px",animation:"fadeUp .3s ease"}, onClick:e=>e.stopPropagation()}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}}, React.createElement("div", {style:{fontSize:18,fontWeight:800}}, "TÃ©rminos y Condiciones"), React.createElement("button", {onClick:()=>setShowTerms(false), style:{background:"#F5F5F5",border:"none",borderRadius:10,width:32,height:32,fontSize:16,cursor:"pointer",fontWeight:700}}, "âœ•")), React.createElement("div", {style:{fontSize:13,color:"#424242",lineHeight:1.7}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,marginBottom:8,color:cTier.name==="BLACK"?"#FF8A80":"#C62828"}}, "DegradaciÃ³n por Inactividad"), React.createElement("div", {style:{padding:14,background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":"#FFF3E0",borderRadius:14,marginBottom:12}}, cfg.degrad.map((tg,ti)=>
              React.createElement("div", {key:ti, style:{marginBottom:ti?12:0}}, React.createElement("div", {style:{fontWeight:800,fontSize:13,marginBottom:6,color:tg.tier==="BLACK"?"#CE93D8":tg.tier==="PLATINO"?"#90CAF9":"#FFB74D"}}, tg.tier), tg.rules.map((r,i)=>
                  React.createElement("div", {key:i, style:{display:"flex",justifyContent:"space-between",padding:"5px 0",borderBottom:i?cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":"1px solid rgba(0,0,0,.06)":"none",fontSize:13}}, React.createElement("span", {style:{fontWeight:700,color:cTier.name==="BLACK"?"#ddd":"inherit"}}, r.days, "dÃ­as"), React.createElement("span", {style:{color:"#EF5350",fontWeight:600}}, r.effect))
                ))
            ), React.createElement("div", {style:{marginTop:8,fontSize:12,color:"#2E7D32",fontWeight:700}}, "âœ… Cualquier compra (hasta Q10) resetea el reloj")), React.createElement("div", {style:{fontWeight:800,fontSize:14,marginBottom:8,color:"#0D0D0D"}}, "Uso de la MembresÃ­a"), React.createElement("div", {style:{padding:14,background:"#F5F5F5",borderRadius:14,marginBottom:12}}, cfg.termsUse.map((t,i)=>
              React.createElement("div", {key:i, style:{display:"flex",gap:8,padding:"6px 0",fontSize:12,color:"#424242"}}, React.createElement("span", {style:{color:"#C62828",fontWeight:800,flexShrink:0}}, "â€¢"), React.createElement("span", null, t))
            )), React.createElement("div", {style:{fontWeight:800,fontSize:14,marginBottom:8,color:"#0D0D0D"}}, "Canjes y Rifas"), React.createElement("div", {style:{padding:14,background:"#F5F5F5",borderRadius:14}}, cfg.termsCanje.map((t,i)=>
              React.createElement("div", {key:i, style:{display:"flex",gap:8,padding:"6px 0",fontSize:12,color:"#424242"}}, React.createElement("span", {style:{color:view==="client"?TH.accent:"#F0A500",fontWeight:800,flexShrink:0}}, "â€¢"), React.createElement("span", null, t))
            ))))))};

  // ===== CLIENT =====
  const CHome=()=>{
    const t=gT(me.gallons); const pg=tierProg(me.gallons,t);
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"20px 20px 12px",display:"flex",alignItems:"center",gap:10}}, React.createElement("div", {style:{width:32,height:32,borderRadius:10,background:cTier.name==="BLACK"?"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)":TH.priBg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,fontWeight:900,color:cTier.name==="BLACK"?"#fff":cTier.name==="PLATINO"?"#1A1A1A":TH.btnTxt,position:"relative",overflow:"hidden",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":cTier.name==="PLATINO"?"1px solid rgba(255,255,255,.4)":"none"}}, cTier.name==="BLACK"&&React.createElement(React.Fragment, null, [...Array(6)].map((_,i)=>React.createElement("div", {key:i, style:{position:"absolute",width:i%2===0?1.2:0.6,height:i%2===0?1.2:0.6,borderRadius:"50%",background:`rgba(255,255,255,${i%2===0?.7:.3})`,left:`${(i*31+10)%100}%`,top:`${(i*37+15)%100}%`,zIndex:0}}))), React.createElement("span", {style:{position:"relative",zIndex:1}}, "T")), React.createElement("div", {style:{fontSize:17,fontWeight:800,color:cTier.name==="BLACK"?"#fff":cTier.name==="PLATINO"?"#424242":"#0D0D0D"}}, "Club", React.createElement("span", {style:{color:"#FBBC04"}}, "Turkaj")), React.createElement("div", {style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8}}, React.createElement(Badge, {t:cTier}), React.createElement("button", {onClick:logout, title:"Cerrar sesiÃ³n", style:{width:32,height:32,borderRadius:10,background:cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"rgba(0,0,0,.06)":"#F5F5F5",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":"1px solid #eee",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:cTier.name==="BLACK"?"#aaa":"#9E9E9E"}}, React.createElement(IC.Logout, null)))), React.createElement(Warn, {last:me.lastBuy}), React.createElement("div", {style:{borderRadius:24,padding:24,margin:"8px 12px",background:tierBg(t.name)||t.grad,color:t.color,position:"relative",overflow:"hidden",boxShadow:tierShadow(t.name),border:tierBorder(t.name)}}, React.createElement(TierDeco, {name:t.name}), React.createElement("div", {style:{position:"relative",zIndex:2}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}, React.createElement("div", null, React.createElement("div", {style:{fontSize:10,fontWeight:800,opacity:.4,letterSpacing:2.5,textTransform:"uppercase"}}, "Club Turkaj"), React.createElement("div", {style:{fontSize:12,opacity:.35,marginTop:2,...sMono}}, me.id)), React.createElement(Badge, {t:t})), React.createElement("div", {onClick:function(){setCScr("cat")}, style:{textAlign:"center",padding:"18px 0 4px",cursor:"pointer"}}, React.createElement("div", {style:{fontSize:48,fontWeight:800,letterSpacing:-3,lineHeight:1,animation:"pop .5s ease-out"}}, me.points), React.createElement("div", {style:{fontSize:10,textTransform:"uppercase",letterSpacing:3,marginTop:4,fontWeight:700,opacity:.5}}, "Puntos Turkaj"), React.createElement("div", {style:{fontSize:9,color:TH.accent,fontWeight:700,marginTop:4,opacity:.7}}, "Toca para canjear â†’")), React.createElement("div", {style:{textAlign:"center",fontSize:15,fontWeight:800,marginTop:8}}, me.name), React.createElement("div", {style:{textAlign:"center",fontSize:12,opacity:.5,fontWeight:600,marginTop:4}}, "ğŸ", me.redeemed||0, "premios canjeados"), t.next&&React.createElement("div", {style:{marginTop:14}}, React.createElement("div", {style:{display:"flex",justifyContent:"flex-end",fontSize:10,opacity:.4,marginBottom:6,fontWeight:700}}, React.createElement("span", null, me.gallons.toFixed(0), "/", t.target, "gal")), React.createElement("div", {style:{position:"relative"}}, React.createElement("div", {style:{height:6,borderRadius:3,overflow:"hidden",background:t.name==="BLACK"?"rgba(255,255,255,.15)":t.name==="PLATINO"?"rgba(0,0,0,.15)":"rgba(0,0,0,.08)"}}, React.createElement("div", {style:{height:"100%",borderRadius:3,width:`${pg}%`,background:t.name==="BLACK"?"#fff":t.name==="PLATINO"?"#1565C0":"#000",transition:"width 1s ease"}})), React.createElement("div", {style:{position:"absolute",top:-20,left:`${pg}%`,transform:"translateX(-50%)",fontSize:10,fontWeight:800,color:t.color,...sMono,whiteSpace:"nowrap"}}, me.gallons.toFixed(0)))))), (function(){
        // Build unified slides: promotions + tier info slides
        var tierSlides=[];
        var allTiers=[
          {name:"ORO",icon:"ğŸŸ¡",gal:0,color:"#000",bg:"linear-gradient(135deg,#FBBC04 0%,#FFD540 50%,#FBBC04 100%)"},
          {name:"PLATINO",icon:"ğŸ’",gal:cfg.tiers?cfg.tiers.platino.gal:150,color:"#1A1A1A",bg:"linear-gradient(135deg,#E0E0E0 0%,#BDBDBD 50%,#E0E0E0 100%)"},
          {name:"BLACK",icon:"ğŸ–¤",gal:cfg.tiers?cfg.tiers.black.gal:500,color:"#fff",bg:"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)"},
        ];
        allTiers.forEach(function(tier){
          var ti=gT(tier.gal);
          var bens=[
            {i:"â›½",t:"1 pt por cada Q"+cfg.qPerPt},
            ...(ti.discount>0?[{i:"ğŸ’°",t:"Descuento Q"+ti.discount.toFixed(2)+"/galÃ³n"}]:[]),
            ...(ti.redeemDisc>0?[{i:"ğŸ·ï¸",t:"-"+Math.round(ti.redeemDisc*100)+"% en canje de premios"}]:[]),
            {i:"ğŸ“¶",t:"WiFi ilimitado"},
            ...(ti.bath?[{i:"ğŸš»",t:"Acceso a baÃ±os"}]:[]),
            {i:"ğŸ‚",t:ti.evtPts+" pts en eventos especiales"},
          ];
          var isCurrent=t.name===tier.name;
          var isLocked=allTiers.findIndex(function(x){return x.name===tier.name})>allTiers.findIndex(function(x){return x.name===t.name});
          tierSlides.push({type:"tier",name:tier.name,icon:tier.icon,gal:tier.gal,color:tier.color,bg:tier.bg,bens:bens,isCurrent:isCurrent,isLocked:isLocked,tierData:ti});
        });
        var allSlides=activePromos.map(function(pr){return {type:"promo",data:pr}}).concat(tierSlides);
        var slideCount=allSlides.length;
        if(slideCount===0)return null;
        return React.createElement("div", {style:{margin:"12px 12px 0",borderRadius:20,overflow:"hidden",position:"relative",height:190}, onClick:function(){setPromoIdx(function(i){return (i+1)%slideCount})}}, allSlides.map(function(slide,i){
            var isActive=i===promoIdx%slideCount;
            var baseTransition={position:"absolute",inset:0,borderRadius:20,transition:"opacity .5s ease, transform .5s ease",opacity:isActive?1:0,transform:isActive?"translateX(0)":"translateX(30px)",pointerEvents:isActive?"auto":"none"};
            if(slide.type==="promo"){
              var pr=slide.data;
              return React.createElement("div", {key:"p-"+pr.id, style:Object.assign({},baseTransition,{background:pr.bg,padding:"20px 20px",display:"flex",alignItems:"center",gap:14})}, React.createElement("div", {style:{fontSize:40,flexShrink:0}}, pr.icon), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontSize:16,fontWeight:800,color:pr.color,lineHeight:1.2}}, pr.title), React.createElement("div", {style:{fontSize:12,color:"rgba(255,255,255,.8)",marginTop:6,lineHeight:1.4}}, pr.desc)));
            }
            // Tier slide
            var s=slide;
            var borderCol=s.name==="BLACK"?"rgba(255,255,255,.08)":s.name==="PLATINO"?"rgba(0,0,0,.1)":"rgba(0,0,0,.06)";
            return React.createElement("div", {key:"t-"+s.name, style:Object.assign({},baseTransition,{background:s.bg,color:s.color,padding:"14px 18px",display:"flex",flexDirection:"column",overflow:"hidden",border:s.name==="BLACK"?"1px solid rgba(255,255,255,.1)":"none"})}, React.createElement("div", {style:{position:"relative",zIndex:2,flex:1}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6}}, React.createElement("div", {style:{fontSize:14,fontWeight:800,letterSpacing:2}}, s.icon, s.name), s.isCurrent&&React.createElement("div", {style:{fontSize:9,fontWeight:800,background:s.name==="BLACK"?"rgba(255,255,255,.15)":"rgba(0,0,0,.1)",padding:"3px 10px",borderRadius:20,textTransform:"uppercase",letterSpacing:1}}, "Tu nivel"), s.isLocked&&React.createElement("div", {style:{fontSize:9,fontWeight:800,background:s.name==="BLACK"?"rgba(255,255,255,.15)":"rgba(0,0,0,.1)",padding:"3px 10px",borderRadius:20,letterSpacing:.5}}, s.gal, "+ galones")), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:3}}, s.bens.map(function(b,j){return React.createElement("div", {key:j, style:{display:"flex",alignItems:"center",gap:8,fontSize:11,fontWeight:600,opacity:.9}}, React.createElement("span", {style:{width:22,textAlign:"center",fontSize:12}}, b.i), React.createElement("span", null, b.t))}))), s.name==="BLACK"&&React.createElement(TierDeco, {name:"BLACK"}));
          }), React.createElement("div", {style:{display:"flex",gap:4,position:"absolute",bottom:8,right:14,zIndex:5}}, allSlides.map(function(_,j){return React.createElement("div", {key:j, style:{width:j===promoIdx%slideCount?16:6,height:6,borderRadius:3,background:j===promoIdx%slideCount?"rgba(255,255,255,.9)":"rgba(255,255,255,.3)",transition:"all .3s"}})})));
      })(), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,padding:"0 12px",margin:"12px 0"}}, React.createElement("div", {style:cStatY}, React.createElement(GalaxyDust, {n:10}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{...sMono,fontSize:22}}, me.visits), React.createElement("div", {style:{fontSize:10,opacity:.6,textTransform:"uppercase",letterSpacing:1,marginTop:4,fontWeight:700}}, "Visitas"))), React.createElement("div", {onClick:()=>setShowInvite(true), style:{background:cTier.name==="BLACK"?GAL3:cTier.name==="PLATINO"?"linear-gradient(135deg,#C8E6C9,#E8F5E9,#C8E6C9)":"#E8F5E9",borderRadius:14,padding:14,textAlign:"center",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?"1px solid #A5D6A7":"1px solid #C8E6C9",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,position:"relative",overflow:"hidden"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:8}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{fontSize:22}}, "ğŸ‘¥"), React.createElement("div", {style:{fontSize:9,textTransform:"uppercase",letterSpacing:.5,fontWeight:800,color:cTier.name==="BLACK"?"#81C784":"#2E7D32"}}, "Invitar amigo"), React.createElement("div", {style:{fontSize:8,fontWeight:700,color:cTier.name==="BLACK"?"#66BB6A":"#43A047"}}, "+", cfg.referralPts, "pts"))), React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL3:cTier.name==="PLATINO"?"linear-gradient(135deg,#E1BEE7,#F3E5F5,#E1BEE7)":"#F3E5F5",borderRadius:14,padding:14,textAlign:"center",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?"1px solid #CE93D8":"1px solid #E1BEE7",position:"relative",overflow:"hidden"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:8}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{...sMono,fontSize:22,color:cTier.name==="BLACK"?"#CE93D8":"#7B1FA2"}}, me.tickets), React.createElement("div", {style:{fontSize:10,color:cTier.name==="BLACK"?"#BA68C8":"#7B1FA2",textTransform:"uppercase",letterSpacing:1,marginTop:4,fontWeight:700}}, "Boletos Rifa")))), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,padding:"0 12px",margin:"6px 0 12px"}}, React.createElement("div", {onClick:()=>setShowWifi(true), style:{background:cTier.name==="BLACK"?GAL3:cTier.name==="PLATINO"?"linear-gradient(135deg,#BBDEFB,#E3F2FD,#BBDEFB)":"#E3F2FD",borderRadius:14,padding:14,textAlign:"center",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?"1px solid #90CAF9":"1px solid #BBDEFB",cursor:"pointer",position:"relative",overflow:"hidden"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:8}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{fontSize:22}}, "ğŸ“¶"), React.createElement("div", {style:{fontSize:9,textTransform:"uppercase",letterSpacing:.5,fontWeight:800,color:cTier.name==="BLACK"?"#64B5F6":"#1565C0",marginTop:4}}, "CÃ³digo WiFi"))), React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL3:cTier.name==="PLATINO"?(!cTier.bath?"linear-gradient(135deg,#eee,#F5F5F5,#eee)":"linear-gradient(135deg,#FFECB3,#FFF8E1,#FFECB3)"):(!cTier.bath?"#F5F5F5":"#FFF8E1"),borderRadius:14,padding:14,textAlign:"center",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?(!cTier.bath?"1px solid #E0E0E0":"1px solid #FFE082"):(!cTier.bath?"1px solid #E0E0E0":"1px solid #FFE082"),opacity:cTier.bath?1:.5,position:"relative",overflow:"hidden"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:8}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{fontSize:22}}, "ğŸš»"), React.createElement("div", {style:{fontSize:9,textTransform:"uppercase",letterSpacing:.5,fontWeight:800,color:cTier.bath?(cTier.name==="BLACK"?"#FFD54F":"#F57F17"):(cTier.name==="BLACK"?"#999":"#BDBDBD"),marginTop:4}}, cTier.bath?"Acceso baÃ±os":"PLATINO+"))), React.createElement("div", {onClick:()=>setShowMap(true), style:{background:cTier.name==="BLACK"?GAL3:cTier.name==="PLATINO"?"linear-gradient(135deg,#FFCDD2,#FFEBEE,#FFCDD2)":"#FFEBEE",borderRadius:14,padding:14,textAlign:"center",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?"1px solid #EF9A9A":"1px solid #FFCDD2",cursor:"pointer",position:"relative",overflow:"hidden"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:8}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{fontSize:22}}, "ğŸ“"), React.createElement("div", {style:{fontSize:9,textTransform:"uppercase",letterSpacing:.5,fontWeight:800,color:cTier.name==="BLACK"?"#EF5350":"#C62828",marginTop:4}}, "Estaciones")))), React.createElement("div", {onClick:function(){doSurvey()}, style:{margin:"8px 12px 12px",padding:16,background:cTier.name==="BLACK"?GAL3:cTier.name==="PLATINO"?"linear-gradient(135deg,#BBDEFB,#E3F2FD)":"#E3F2FD",borderRadius:16,border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?"1px solid #90CAF9":"1px solid #BBDEFB",cursor:mySurveyCount>=cfg.surveyDaily?"default":"pointer",opacity:mySurveyCount>=cfg.surveyDaily?.5:1,position:"relative",overflow:"hidden"}}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:8}), React.createElement("div", {style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:14}}, React.createElement("div", {style:{fontSize:28}}, "ğŸ“‹"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:cTier.name==="BLACK"?"#fff":cTier.name==="PLATINO"?"#424242":"#0D0D0D"}}, "Encuesta de satisfacciÃ³n Shell"), React.createElement("div", {style:{fontSize:11,color:cTier.name==="BLACK"?"rgba(255,255,255,.6)":"#757575",marginTop:2}}, mySurveyCount>=cfg.surveyDaily?"âœ… Â¡Completaste todas! Boleto bonus ganado":`${mySurveyCount}/${cfg.surveyDaily} hoy Â· +${cfg.surveyPts} pts c/u`), React.createElement("div", {style:{height:4,borderRadius:2,overflow:"hidden",background:cTier.name==="BLACK"?"rgba(255,255,255,.1)":"rgba(0,0,0,.08)",marginTop:6}}, React.createElement("div", {style:{height:"100%",borderRadius:2,width:`${(mySurveyCount/cfg.surveyDaily)*100}%`,background:mySurveyCount>=cfg.surveyDaily?(cTier.name==="BLACK"?"#FFD54F":"#F0A500"):(cTier.name==="BLACK"?"#64B5F6":"#1565C0"),transition:"width .3s ease"}}))), React.createElement("div", {style:{textAlign:"right",flexShrink:0}}, React.createElement("div", {style:{fontSize:14,fontWeight:800,color:cTier.name==="BLACK"?"#64B5F6":"#1565C0",...sMono}}, "+"+cfg.surveyPts, " pts"), mySurveyCount>=cfg.surveyDaily&&React.createElement("div", {style:{fontSize:10,fontWeight:800,color:cTier.name==="BLACK"?"#FFD54F":"#F0A500",marginTop:2}}, "ğŸŸï¸ +1")))), React.createElement("div", {style:cSec}, "Mi QR"), (()=>{const t=gT(me.gallons);
        const qrStyles={
          ORO:{bg:"linear-gradient(135deg,#FBBC04,#FFD540,#FBBC04)",border:"2px solid #E6A800",shadow:"0 8px 32px rgba(251,188,4,.3)",txtCol:"rgba(0,0,0,.4)"},
          PLATINO:{bg:"linear-gradient(135deg,#9E9E9E,#BDBDBD,#CFD8DC,#BDBDBD)",border:"2px solid #1565C0",shadow:"0 6px 24px rgba(21,101,192,.25), 0 2px 8px rgba(21,101,192,.15), inset 0 1px 0 rgba(255,255,255,.4)",txtCol:"rgba(255,255,255,.7)"},
          BLACK:{bg:"radial-gradient(ellipse at 20% 30%, #0d0d1a 0%, #050508 40%, #000 100%)",border:"none",shadow:"0 16px 56px rgba(0,0,0,.7), 0 0 20px rgba(255,255,255,.04)",txtCol:"rgba(255,255,255,.35)",isBlack:true},
        };
        const s=qrStyles[t.name];
        return React.createElement("div", {style:{textAlign:"center",padding:"8px 20px 16px"}}, React.createElement("div", {style:{background:s.bg,border:s.border,boxShadow:s.shadow,borderRadius:24,padding:"28px 20px",position:"relative",overflow:"hidden",display:"inline-block",minWidth:220}}, React.createElement(TierDeco, {name:t.name}), React.createElement("div", {style:{position:"relative",zIndex:2}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,letterSpacing:2.5,textTransform:"uppercase",color:s.txtCol,marginBottom:12}}, t.icon, t.name), React.createElement(QR, {code:me.id, sz:150, scanColor:TH.pri}), React.createElement("div", {style:{fontSize:11,color:s.txtCol,marginTop:12,fontWeight:600}}, "MostrÃ¡ tu cÃ³digo en cada compra"), me.cardId&&React.createElement("div", {style:{marginTop:8,padding:"6px 14px",borderRadius:10,background:"rgba(0,0,0,.08)",display:"inline-flex",alignItems:"center",gap:6}}, React.createElement("span", {style:{fontSize:12}}, "ğŸ’³"), React.createElement("span", {style:{...sMono,fontSize:11,fontWeight:800,color:s.txtCol}}, me.cardId)))));
      })(), React.createElement("div", {style:{padding:"0 20px 16px"}}, React.createElement("button", {onClick:()=>setShowHist(!showHist), style:{width:"100%",background:cTier.name!=="ORO"?TH.cardBg:"#FAFAFA",border:cTier.name!=="ORO"?TH.cardBorder:"1px solid #eee",borderRadius:14,padding:"14px",fontFamily:"'DM Sans'",fontSize:14,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,color:cTier.name==="BLACK"?"#ccc":"#424242"}}, React.createElement(IC.Clock, null), "Historial", showHist?"â–²":"â–¼")), showHist&&React.createElement("div", {style:{animation:"fadeUp .3s ease",background:cTier.name!=="ORO"?TH.histBg:undefined}}, (()=>{
          const myActs=(activityLog&&activityLog[me.id])||[];
          if(myActs.length===0)return React.createElement("div", {style:{textAlign:"center",padding:32,color:"#9E9E9E",fontSize:13}}, "Sin actividad registrada aÃºn");
          const cols={compra:cTier.name==="BLACK"?"#81C784":"#2E7D32",canje:cTier.name==="BLACK"?"#64B5F6":"#1565C0",evento:cTier.name==="BLACK"?"#FBBC04":TH.pri,rifa:cTier.name==="BLACK"?"#CE93D8":"#7B1FA2",encuesta:cTier.name==="BLACK"?"#FBBC04":TH.pri,referido:cTier.name==="BLACK"?"#FBBC04":TH.pri,registro:cTier.name==="BLACK"?"#FBBC04":TH.pri,wifi:cTier.name==="BLACK"?"#aaa":"#9E9E9E",degradacion:cTier.name==="BLACK"?"#EF5350":"#C62828"};
          return myActs.map(function(a,i){
            var dt=a.date||"";var dd=dt.length>=10?(dt.substring(8,10)+"/"+dt.substring(5,7)):dt;
            var pts=a.pts||0;var ptsNum=typeof pts==="string"?parseInt(pts,10):pts;
            var col=cols[a.type]||cols.evento;
            return React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid "+(cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"#BDBDBD":"#F5F5F5")}}, React.createElement("div", {style:{width:10,height:10,borderRadius:"50%",marginRight:14,flexShrink:0,background:col}}), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:14,fontWeight:700,color:cTier.name==="BLACK"?"#fff":undefined}}, a.desc), React.createElement("div", {style:{fontSize:12,color:cTier.name==="BLACK"?"#aaa":"#BDBDBD",marginTop:2,display:"flex",alignItems:"center",gap:6}}, dd, a.station&&React.createElement("span", {style:{fontSize:10,background:cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"rgba(255,255,255,.5)":"#F5F5F5",padding:"2px 8px",borderRadius:6,fontWeight:700,color:cTier.name==="BLACK"?"#aaa":"#757575"}}, a.station))), ptsNum!==0&&React.createElement("div", {style:{...sMono,fontSize:14,color:ptsNum>0?cols.compra:col}}, ptsNum>0?"+":"", ptsNum));
          });
        })()));
  };

  // ===== MODALS =====
  const renderModal=()=>{
    if(!modal)return null;
    return React.createElement("div", {key:"modal-backdrop", onClick:()=>{setModal(null);setInvScan(null);setCardScan(null)}, style:{position:"fixed",inset:0,background:"rgba(0,0,0,.4)",backdropFilter:"blur(6px)",zIndex:200,display:"flex",alignItems:"flex-end",justifyContent:"center"}}, React.createElement("div", {key:"modal-"+modal, onClick:e=>e.stopPropagation(), style:{background:"#fff",borderRadius:"28px 28px 0 0",padding:"28px 24px 32px",maxWidth:480,width:"100%",maxHeight:"85vh",overflowY:"auto"}}, React.createElement("div", {style:{width:40,height:4,background:"#E0E0E0",borderRadius:2,margin:"0 auto 20px"}}), modal==="newC"&&React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:4}}, "Nuevo Miembro"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginBottom:20}}, "Campos con * son obligatorios"), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#F0A500",textTransform:"uppercase",letterSpacing:2,marginBottom:10}}, "Obligatorios (+5 pts c/u)"), [{k:"name",l:"Nombre completo *",p:"Nombre completo",t:"text"},{k:"dpi",l:"DPI *",p:"1234567890101",t:"text"},{k:"phone",l:"TelÃ©fono *",p:"5551-2345",t:"tel"},{k:"plate",l:"Placa del vehÃ­culo *",p:"P-123ABC",t:"text"}].map(f=>
            React.createElement("div", {key:f.k, style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, f.l), React.createElement("input", {type:f.t, placeholder:f.p, value:newC[f.k], onChange:e=>setNewC({...newC,[f.k]:e.target.value}), style:sInput}))
          ), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#2E7D32",textTransform:"uppercase",letterSpacing:2,marginTop:8,marginBottom:10}}, "Opcionales (+5 pts c/u)"), [{k:"email",l:"Email",p:"correo@email.com",t:"email"},{k:"bday",l:"CumpleaÃ±os (MM-DD)",p:"03-15",t:"text"},{k:"nit",l:"NIT o CF",p:"12345678 o CF",t:"text"}].map(f=>
            React.createElement("div", {key:f.k, style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, f.l), React.createElement("input", {type:f.t, placeholder:f.p, value:newC[f.k], onChange:e=>setNewC({...newC,[f.k]:e.target.value}), style:sInput}))
          ), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "EstaciÃ³n"), React.createElement("select", {value:newC.station, onChange:e=>setNewC({...newC,station:e.target.value}), style:{...sInput,appearance:"none"}}, React.createElement("option", {value:""}, "Seleccionar..."), React.createElement("option", {value:"Turkaj I"}, "Turkaj I"), React.createElement("option", {value:"Turkaj II"}, "Turkaj II"), React.createElement("option", {value:"Turkaj III"}, "Turkaj III"))), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "CÃ³digo de referido (opcional)"), React.createElement("input", {type:"text", placeholder:"T001", value:newC.refCode, onChange:e=>setNewC({...newC,refCode:e.target.value}), style:sInput})), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "ğŸ’³ Tarjeta fÃ­sica"), !newC.cardId&&cardScan!=="scanning"&&React.createElement("button", {onClick:()=>{
              setCardScan("scanning");
              const avail=cards.filter(c=>c.status==="available"&&c.tier==="ORO");
              if(avail.length>0){
                const pick=avail[Math.floor(Math.random()*avail.length)];
                setTimeout(()=>{setCardScan({id:pick.id,tier:pick.tier});setNewC(p=>({...p,cardId:pick.id}))},1500);
              } else {
                setTimeout(()=>setCardScan("nocard"),1500);
              }
            }, style:{width:"100%",padding:"16px",borderRadius:14,border:"2px dashed #FBBC04",background:"#FFF8E1",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#F0A500",display:"flex",alignItems:"center",justifyContent:"center",gap:10}}, "ğŸ“· Escanear QR de Tarjeta"), cardScan==="scanning"&&React.createElement("div", {style:{textAlign:"center",padding:20,background:"#FFF8E1",borderRadius:14,border:"2px solid #FBBC04"}}, React.createElement("div", {style:{fontSize:32,marginBottom:8,animation:"pulse 1s infinite"}}, "ğŸ“·"), React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#F0A500"}}, "Escaneando tarjeta..."), React.createElement("div", {style:{marginTop:12,height:4,borderRadius:2,background:"#eee",overflow:"hidden"}}, React.createElement("div", {style:{height:"100%",background:"#FBBC04",borderRadius:2,animation:"scanBar 1.5s ease forwards"}}))), cardScan==="nocard"&&React.createElement("div", {style:{padding:14,background:"#FFEBEE",borderRadius:14,textAlign:"center",border:"1px solid #EF9A9A"}}, React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#C62828"}}, "âš ï¸ No se encontrÃ³ tarjeta disponible"), React.createElement("button", {onClick:()=>setCardScan(null), style:{marginTop:8,padding:"6px 14px",borderRadius:8,border:"1px solid #eee",background:"#fff",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer",color:"#757575"}}, "Reintentar")), newC.cardId&&cardScan&&cardScan!=="scanning"&&cardScan!=="nocard"&&React.createElement("div", {style:{padding:16,background:"#E8F5E9",borderRadius:14,border:"2px solid #2E7D32",display:"flex",alignItems:"center",gap:14}}, React.createElement("div", {style:{width:48,height:48,borderRadius:14,background:"linear-gradient(135deg,#FBBC04,#FFD540)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:900,color:"#0D0D0D"}}, "QR"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:12,fontWeight:800,color:"#2E7D32"}}, "âœ… Tarjeta escaneada"), React.createElement("div", {style:{...sMono,fontSize:16,fontWeight:800,color:"#0D0D0D",marginTop:2}}, newC.cardId)), React.createElement("button", {onClick:()=>{setNewC(p=>({...p,cardId:""}));setCardScan(null)}, style:{padding:"6px 10px",borderRadius:8,border:"1px solid #eee",background:"#fff",fontFamily:"'DM Sans'",fontSize:11,fontWeight:700,cursor:"pointer",color:"#757575"}}, "âœ•"))), React.createElement("div", {style:{fontSize:12,color:"#757575",marginBottom:16,padding:"12px 14px",background:"#FFF8E1",borderRadius:12,borderLeft:"3px solid #FBBC04"}}, React.createElement("div", {style:{fontWeight:800,marginBottom:4}}, "ğŸ’¡ Puntos de registro:"), React.createElement("div", null, "Base (nombre + DPI + tel + placa) =", React.createElement("strong", null, "15 pts")), React.createElement("div", null, "Email =", React.createElement("strong", null, "+5"), "Â· CumpleaÃ±os =", React.createElement("strong", null, "+5"), "Â· NIT =", React.createElement("strong", null, "+5")), React.createElement("div", null, "CÃ³digo referido =", React.createElement("strong", null, "+", cfg.referralPts, "pts"), "(al 1ra compra, ambos)"), React.createElement("div", {style:{marginTop:4,fontWeight:700}}, "MÃ¡ximo:", React.createElement("strong", null, "55 pts"))), React.createElement("button", {onClick:regC, style:{...sYBtn,width:"100%"}}, "Registrar al Club")), modal==="buy"&&sel&&(()=>{
          const c=custs.find(x=>x.id===sel.id)||sel;
          const t=gT(c.gallons);
          const stations=["Turkaj I","Turkaj II","Turkaj III"];
          const doScan=()=>{
            setInvScan("scanning");
            const rFuel=["super","regular","diesel"][Math.floor(Math.random()*3)];
            const rAmt=[150,200,250,300,350,400,500,600,750][Math.floor(Math.random()*9)];
            const rStation=c.station||stations[Math.floor(Math.random()*3)];
            const rNo="FAC-"+rStation.replace("Turkaj ","").replace("I","1").replace("II","2").replace("III","3")+"-"+String(Math.floor(Math.random()*90000)+10000);
            const rGal=+(rAmt/FUEL[rFuel]).toFixed(2);
            setTimeout(()=>setInvScan({no:rNo,station:rStation,fuel:rFuel,amt:rAmt,gal:rGal}),1800);
          };
          if(!invScan) return React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:2}}, "Registrar Compra"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:20}}, c.name, "Â·", React.createElement(Badge, {t:t})), React.createElement("div", {style:{textAlign:"center",padding:"20px 0"}}, React.createElement("div", {style:{width:80,height:80,borderRadius:24,background:"#FFF8E1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:40,margin:"0 auto 16px",border:"2px solid #FBBC04"}}, "ğŸ§¾"), React.createElement("div", {style:{fontSize:16,fontWeight:800,color:"#0D0D0D",marginBottom:6}}, "Escanear Factura"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:24,lineHeight:1.5}}, "EscaneÃ¡ el cÃ³digo de la factura para ", React.createElement("strong", null, "extraer automÃ¡ticamente"), " los datos de la compra"), React.createElement("button", {onClick:doScan, style:{...sYBtn,width:"100%",fontSize:16,padding:"16px",gap:10}}, "ğŸ“· Escanear Factura"), React.createElement("div", {style:{fontSize:11,color:"#BDBDBD",marginTop:12}}, "El sistema valida estaciÃ³n, nÃºmero de factura, galones y monto")));
          if(invScan==="scanning") return React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:2}}, "Registrar Compra"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:20}}, c.name, "Â·", React.createElement(Badge, {t:t})), React.createElement("div", {style:{textAlign:"center",padding:"40px 0"}}, React.createElement("div", {style:{width:80,height:80,borderRadius:24,background:"linear-gradient(135deg,#FFF8E1,#FBBC04)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:40,margin:"0 auto 16px",animation:"pulse 1s infinite"}}, "ğŸ“·"), React.createElement("div", {style:{fontSize:16,fontWeight:800,color:"#F0A500",marginBottom:6}}, "Leyendo factura..."), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E"}}, "Extrayendo datos automÃ¡ticamente"), React.createElement("div", {style:{marginTop:20,height:4,borderRadius:2,background:"#eee",overflow:"hidden"}}, React.createElement("div", {style:{height:"100%",background:"#FBBC04",borderRadius:2,animation:"scanBar 1.8s ease forwards"}}))));
          const inv=invScan;
          const pts=Math.floor(inv.amt/cfg.qPerPt);
          const fuelLabels={super:"SÃºper",regular:"Regular",diesel:"DiÃ©sel"};
          return React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:2}}, "Verificar Factura"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:16}}, c.name, "Â·", React.createElement(Badge, {t:t}), t.discount>0&&React.createElement("span", {style:{marginLeft:8,color:"#2E7D32",fontWeight:700}}, "-Q", t.discount.toFixed(2), "/gal")), React.createElement("div", {style:{background:"#E8F5E9",borderRadius:14,padding:"10px 14px",marginBottom:16,display:"flex",alignItems:"center",gap:8}}, React.createElement("div", {style:{fontSize:18}}, "âœ…"), React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#2E7D32"}}, "Factura leÃ­da correctamente")), React.createElement("div", {style:{background:"#FAFAFA",borderRadius:18,padding:20,marginBottom:16,border:"1px solid #eee"}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:14}}, "Datos ExtraÃ­dos"), [
                {l:"ğŸ“„ No. Factura",v:inv.no,c:"#424242"},
                {l:"ğŸ“ EstaciÃ³n",v:inv.station,c:"#1565C0"},
                {l:"â›½ Combustible",v:fuelLabels[inv.fuel]+" Â· Q"+FUEL[inv.fuel]+"/gal",c:"#E65100"},
                {l:"ğŸ’° Monto",v:"Q"+inv.amt.toLocaleString(),c:"#0D0D0D",bold:true},
                {l:"â›½ Galones",v:inv.gal.toFixed(2)+" gal",c:"#0D0D0D",bold:true},
              ].map((r,i)=>React.createElement("div", {key:i, style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 0",borderBottom:i<4?"1px solid #eee":"none"}}, React.createElement("span", {style:{fontSize:13,color:"#9E9E9E"}}, r.l), React.createElement("span", {style:{fontSize:r.bold?16:13,fontWeight:r.bold?800:600,color:r.c,...sMono}}, r.v)))), React.createElement("div", {style:{background:"#FFF8E1",borderRadius:14,padding:16,marginBottom:16,border:"1px solid #FBBC04"}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}}, React.createElement("span", {style:{fontSize:13,fontWeight:700,color:"#F0A500"}}, "Puntos a otorgar"), React.createElement("span", {style:{...sMono,fontSize:22,fontWeight:800,color:"#2E7D32"}}, "+", pts)), t.discount>0&&React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:8,borderTop:"1px solid rgba(251,188,4,.3)"}}, React.createElement("span", {style:{fontSize:12,color:"#9E9E9E"}}, "Descuento", t.name), React.createElement("span", {style:{...sMono,fontSize:14,color:"#2E7D32"}}, "-Q", (inv.gal*t.discount).toFixed(2)))), React.createElement("div", {style:{display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setInvScan(null), style:{flex:1,padding:14,borderRadius:14,border:"1px solid #eee",background:"#F5F5F5",fontFamily:"'DM Sans'",fontSize:14,fontWeight:700,cursor:"pointer",color:"#757575"}}, "â†» Re-escanear"), React.createElement("button", {onClick:()=>{setFuel(inv.fuel);addPurchase(sel.id,inv.amt,inv.fuel)}, style:{flex:2,...sYBtn}}, "âœ“ Confirmar Compra")));
        })(), modal==="scan"&&React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:16}}, "Escanear QR"), custs.slice(0,5).map(c=>{const t=gT(c.gallons);return(
            React.createElement("button", {key:c.id, onClick:()=>{setSel(c);setModal("buy")}, style:{display:"flex",alignItems:"center",width:"100%",padding:"12px 16px",marginBottom:6,background:"#F5F5F5",border:"1px solid #eee",borderRadius:14,fontFamily:"'DM Sans'",cursor:"pointer",textAlign:"left"}}, React.createElement("div", {style:{width:34,height:34,borderRadius:10,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:13}}, c.name.charAt(0)), React.createElement("div", {style:{marginLeft:8,flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:14}}, c.name), React.createElement("div", {style:{fontSize:11,color:"#BDBDBD"}}, c.points, "pts Â·", c.gallons.toFixed(0), "gal")), React.createElement(Badge, {t:t}))
          )}))));
  };

  const Settings=()=>{
    const upCfg=(k,v)=>setCfg(p=>({...p,[k]:v}));
    const upTier=(tier,k,v)=>setCfg(p=>({...p,tiers:{...p.tiers,[tier]:{...p.tiers[tier],[k]:v}}}));
    const Row=({l,v,k,type,min,step})=>React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 18px",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("span", {style:{fontSize:13,color:"#9E9E9E",fontWeight:600,flex:1}}, l), React.createElement("input", {type:type||"number", value:v, min:min||0, step:step||1, onChange:e=>upCfg(k,type==="number"||!type?+e.target.value:e.target.value), style:{width:90,padding:"8px 10px",borderRadius:10,border:`2px solid ${adminBorder}`,fontFamily:"'JetBrains Mono'",fontSize:14,fontWeight:700,textAlign:"right",outline:"none",background:adminCard,color:"#fff"}}));

    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${adminBorder}`,background:adminBg,position:"sticky",top:0,zIndex:50}}, React.createElement("button", {onClick:()=>setScr("dash"), style:{background:"none",border:"none",color:"#9E9E9E",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600}}, React.createElement(IC.Back, null), "Inicio"), React.createElement("div", {style:{fontSize:17,fontWeight:700,color:"#fff"}}, "âš™ï¸ ConfiguraciÃ³n"), React.createElement("div", {style:{width:60}})), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#777",textTransform:"uppercase",letterSpacing:1}}, "Programa")), [
        {i:"ğŸ“‹",t:"Reglas y Niveles",d:"CÃ³mo ganar puntos, niveles, eventos",k:"rules"},
        {i:"ğŸ“„",t:"TÃ©rminos y Condiciones",d:"Editar tÃ©rminos de uso y canjes",k:"terms"},
      ].map(o=>
        React.createElement("div", {key:o.k, onClick:()=>{if(o.k==="rules")setScr("rules"); if(o.k==="terms")setShowTerms(true)}, style:{display:"flex",alignItems:"center",gap:14,padding:"16px 20px",borderBottom:`1px solid ${adminBorder}`,cursor:"pointer"}}, React.createElement("div", {style:{width:44,height:44,borderRadius:14,background:"rgba(251,188,4,.12)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20}}, o.i), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:14,color:"#E0E0E0"}}, o.t), React.createElement("div", {style:{fontSize:12,color:"#777",marginTop:2}}, o.d)), React.createElement(IC.Chev, null))
      ), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "âœï¸ Valores del Programa")), React.createElement("div", {style:{margin:"0 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, React.createElement(Row, {l:"Q por punto (ej: Q10=1pt)", v:cfg.qPerPt, k:"qPerPt", step:1}), React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 18px",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("span", {style:{fontSize:13,color:"#9E9E9E",fontWeight:600}}, "Valor por punto"), React.createElement("span", {style:{fontSize:14,fontWeight:800,color:"#66BB6A",...sMono}}, "â‰ˆ Q", (1/cfg.qPerPt*10).toFixed(2))), React.createElement(Row, {l:"Boleto rifa (pts)", v:cfg.ticketPts, k:"ticketPts", step:1}), React.createElement(Row, {l:"Registro base (pts)", v:cfg.regBase, k:"regBase"}), React.createElement(Row, {l:"Campo opcional (pts)", v:cfg.regOptional, k:"regOptional"}), React.createElement(Row, {l:"Referido (pts ambos)", v:cfg.referralPts, k:"referralPts"}), React.createElement(Row, {l:"Encuesta Shell (pts)", v:cfg.surveyPts, k:"surveyPts"}), React.createElement(Row, {l:"Encuestas diarias (mÃ¡x)", v:cfg.surveyDaily, k:"surveyDaily"})), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "âœï¸ Niveles")), React.createElement("div", {style:{margin:"0 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, React.createElement("div", {style:{padding:"14px 18px",background:"rgba(251,188,4,.1)",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,color:"#FBBC04"}}, "ğŸŸ¡ ORO Â· 0 â€“", cfg.tiers.platino.gal-1, "gal"), React.createElement("div", {style:{display:"flex",gap:10,marginTop:10}}, React.createElement("div", null, React.createElement("div", {style:{fontSize:10,fontWeight:700,color:"#777"}}, "Evento pts"), React.createElement("input", {type:"number", value:cfg.tiers.oro.evtPts, onChange:e=>upTier("oro","evtPts",+e.target.value), style:{width:70,padding:"6px 8px",borderRadius:8,border:`2px solid ${adminBorder}`,background:adminBg,color:"#fff",fontFamily:"'JetBrains Mono'",fontSize:13,fontWeight:700,textAlign:"center",outline:"none",marginTop:4}})))), React.createElement("div", {style:{padding:"14px 18px",background:"rgba(21,101,192,.1)",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,color:"#64B5F6"}}, "ğŸ’ PLATINO"), React.createElement("div", {style:{display:"flex",gap:8,marginTop:10,flexWrap:"wrap"}}, [{l:"Galones req",k:"gal",v:cfg.tiers.platino.gal},{l:"Desc/gal Q",k:"discGal",v:cfg.tiers.platino.discGal,s:"0.01"},{l:"Desc canje %",k:"discRedeem",v:cfg.tiers.platino.discRedeem,s:"0.01"},{l:"Evento pts",k:"evtPts",v:cfg.tiers.platino.evtPts}].map(f=>
              React.createElement("div", {key:f.k}, React.createElement("div", {style:{fontSize:10,fontWeight:700,color:"#777"}}, f.l), React.createElement("input", {type:"number", step:f.s||1, value:f.v, onChange:e=>upTier("platino",f.k,+e.target.value), style:{width:70,padding:"6px 8px",borderRadius:8,border:`2px solid ${adminBorder}`,background:adminBg,color:"#fff",fontFamily:"'JetBrains Mono'",fontSize:13,fontWeight:700,textAlign:"center",outline:"none",marginTop:4}}))
            ))), React.createElement("div", {style:{padding:"14px 18px",background:"#151515"}}, React.createElement("div", {style:{fontWeight:800,fontSize:14,color:"#fff"}}, "ğŸ–¤ BLACK"), React.createElement("div", {style:{display:"flex",gap:8,marginTop:10,flexWrap:"wrap"}}, [{l:"Galones req",k:"gal",v:cfg.tiers.black.gal},{l:"Desc/gal Q",k:"discGal",v:cfg.tiers.black.discGal,s:"0.01"},{l:"Desc canje %",k:"discRedeem",v:cfg.tiers.black.discRedeem,s:"0.01"},{l:"Evento pts",k:"evtPts",v:cfg.tiers.black.evtPts}].map(f=>
              React.createElement("div", {key:f.k}, React.createElement("div", {style:{fontSize:10,fontWeight:700,color:"#666"}}, f.l), React.createElement("input", {type:"number", step:f.s||1, value:f.v, onChange:e=>upTier("black",f.k,+e.target.value), style:{width:70,padding:"6px 8px",borderRadius:8,border:"2px solid #333",background:"#111",color:"#fff",fontFamily:"'JetBrains Mono'",fontSize:13,fontWeight:700,textAlign:"center",outline:"none",marginTop:4}}))
            )))), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "âœï¸ DegradaciÃ³n")), React.createElement("div", {style:{margin:"0 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, cfg.degrad.map(function(tg,ti){const tCol=tg.tier==="BLACK"?"#CE93D8":tg.tier==="PLATINO"?"#90CAF9":"#FFB74D";return(
          React.createElement("div", {key:ti, style:{padding:"12px 18px",borderBottom:ti?`1px solid ${adminBorder}`:"none"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:tCol,marginBottom:8}}, tg.tier), tg.rules.map(function(r,i){const cols=["#FFB74D","#FF8A65","#EF9A9A"];return(
              React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:i?`1px solid ${adminBorder}`:"none"}}, React.createElement("input", {type:"number", value:r.days, onChange:function(e){const nd=JSON.parse(JSON.stringify(cfg.degrad));nd[ti].rules[i].days=+e.target.value;upCfg("degrad",nd)}, style:{width:50,padding:"6px 8px",borderRadius:8,border:`2px solid ${adminBorder}`,background:adminBg,color:"#fff",fontFamily:"'JetBrains Mono'",fontSize:13,fontWeight:700,textAlign:"center",outline:"none"}}), React.createElement("span", {style:{fontSize:12,color:"#777",fontWeight:600}}, "dÃ­as â†’"), React.createElement("input", {value:r.effect, onChange:function(e){const nd=JSON.parse(JSON.stringify(cfg.degrad));nd[ti].rules[i].effect=e.target.value;upCfg("degrad",nd)}, style:{flex:1,padding:"6px 10px",borderRadius:8,border:`2px solid ${adminBorder}`,background:adminBg,fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,color:cols[i]||"#EF9A9A",outline:"none"}}))
            )}))
        )})), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "âœï¸ TÃ©rminos â€” Uso de MembresÃ­a")), React.createElement("div", {style:{margin:"0 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, cfg.termsUse.map((t,i)=>
          React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("span", {style:{color:"#EF9A9A",fontWeight:800,fontSize:16}}, "â€¢"), React.createElement("input", {value:t, onChange:e=>{const n=[...cfg.termsUse];n[i]=e.target.value;upCfg("termsUse",n)}, style:{flex:1,padding:"6px 8px",borderRadius:8,border:`1px solid ${adminBorder}`,background:adminBg,color:"#E0E0E0",fontFamily:"'DM Sans'",fontSize:12,outline:"none"}}), React.createElement("button", {onClick:()=>upCfg("termsUse",cfg.termsUse.filter((_,j)=>j!==i)), style:{background:"rgba(198,40,40,.15)",border:"none",borderRadius:8,width:28,height:28,fontSize:12,cursor:"pointer",color:"#EF9A9A",fontWeight:800}}, "âœ•"))
        ), React.createElement("button", {onClick:()=>upCfg("termsUse",[...cfg.termsUse,"Nuevo tÃ©rmino..."]), style:{width:"100%",padding:"12px",border:"none",background:"rgba(46,125,50,.1)",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,color:"#66BB6A",cursor:"pointer"}}, "+ Agregar tÃ©rmino")), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "âœï¸ TÃ©rminos â€” Canjes y Rifas")), React.createElement("div", {style:{margin:"0 20px 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, cfg.termsCanje.map((t,i)=>
          React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${adminBorder}`}}, React.createElement("span", {style:{color:"#FBBC04",fontWeight:800,fontSize:16}}, "â€¢"), React.createElement("input", {value:t, onChange:e=>{const n=[...cfg.termsCanje];n[i]=e.target.value;upCfg("termsCanje",n)}, style:{flex:1,padding:"6px 8px",borderRadius:8,border:`1px solid ${adminBorder}`,background:adminBg,color:"#E0E0E0",fontFamily:"'DM Sans'",fontSize:12,outline:"none"}}), React.createElement("button", {onClick:()=>upCfg("termsCanje",cfg.termsCanje.filter((_,j)=>j!==i)), style:{background:"rgba(198,40,40,.15)",border:"none",borderRadius:8,width:28,height:28,fontSize:12,cursor:"pointer",color:"#EF9A9A",fontWeight:800}}, "âœ•"))
        ), React.createElement("button", {onClick:()=>upCfg("termsCanje",[...cfg.termsCanje,"Nuevo tÃ©rmino..."]), style:{width:"100%",padding:"12px",border:"none",background:"rgba(46,125,50,.1)",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,color:"#66BB6A",cursor:"pointer"}}, "+ Agregar tÃ©rmino")), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#FBBC04",textTransform:"uppercase",letterSpacing:1}}, "ğŸ“¢ Promociones (Carrusel Cliente)")), React.createElement("div", {style:{margin:"0 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, promos.map(function(pr,i){return(
          React.createElement("div", {key:pr.id, style:{display:"flex",alignItems:"center",gap:10,padding:"12px 14px",borderBottom:i?`1px solid ${adminBorder}`:"none"}}, React.createElement("div", {style:{width:40,height:40,borderRadius:10,background:pr.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,flexShrink:0}}, pr.icon), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}, pr.title), React.createElement("div", {style:{fontSize:10,color:"#777",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}, pr.desc)), React.createElement("button", {onClick:function(){setEditPromo(pr);setNewPromo({title:pr.title,desc:pr.desc,icon:pr.icon,bg:pr.bg,color:pr.color,active:pr.active})}, style:{background:"rgba(251,188,4,.15)",border:"none",borderRadius:8,padding:"6px 10px",fontSize:11,fontWeight:700,color:"#FBBC04",cursor:"pointer",fontFamily:"'DM Sans'"}}, "Editar"), React.createElement("button", {onClick:function(){setPromos(function(p){return p.map(function(x){return x.id===pr.id?Object.assign({},x,{active:!x.active}):x})})}, style:{background:pr.active?"rgba(76,175,80,.15)":"rgba(198,40,40,.15)",border:"none",borderRadius:8,padding:"6px 10px",fontSize:11,fontWeight:700,color:pr.active?"#4CAF50":"#EF9A9A",cursor:"pointer",fontFamily:"'DM Sans'"}}, pr.active?"On":"Off"))
        )}), React.createElement("button", {onClick:function(){setEditPromo({isNew:true});setNewPromo({title:"",desc:"",icon:"ğŸ”¥",bg:"linear-gradient(135deg,#FF6B00,#FF9800)",color:"#fff",active:true})}, style:{width:"100%",padding:"12px",border:"none",background:"rgba(251,188,4,.08)",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,color:"#FBBC04",cursor:"pointer"}}, "+ Nueva PromociÃ³n")), editPromo&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.7)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",padding:20}, onClick:function(){setEditPromo(null)}}, React.createElement("div", {style:{background:"#2A2A2A",borderRadius:24,maxWidth:400,width:"100%",padding:24,border:"1px solid #3A3A3A"}, onClick:function(e){e.stopPropagation()}}, React.createElement("div", {style:{fontSize:18,fontWeight:900,color:"#FBBC04",marginBottom:16}}, editPromo.isNew?"Nueva":"Editar", " PromociÃ³n"), React.createElement("div", {style:{borderRadius:16,background:newPromo.bg,padding:"14px 18px",display:"flex",alignItems:"center",gap:14,marginBottom:16,height:60}}, React.createElement("div", {style:{fontSize:32}}, newPromo.icon), React.createElement("div", null, React.createElement("div", {style:{fontSize:14,fontWeight:800,color:newPromo.color}}, newPromo.title||"TÃ­tulo"), React.createElement("div", {style:{fontSize:11,color:"rgba(255,255,255,.7)"}}, newPromo.desc||"DescripciÃ³n"))), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:10}}, React.createElement("input", {placeholder:"Emoji Ã­cono", value:newPromo.icon, onChange:function(e){setNewPromo(function(p){return Object.assign({},p,{icon:e.target.value})})}, style:{...iSd,width:"100%"}, maxLength:4}), React.createElement("input", {placeholder:"TÃ­tulo", value:newPromo.title, onChange:function(e){setNewPromo(function(p){return Object.assign({},p,{title:e.target.value})})}, style:{...iSd,width:"100%"}}), React.createElement("input", {placeholder:"DescripciÃ³n", value:newPromo.desc, onChange:function(e){setNewPromo(function(p){return Object.assign({},p,{desc:e.target.value})})}, style:{...iSd,width:"100%"}}), React.createElement("div", {style:{fontSize:12,color:"#777",fontWeight:600}}, "Color de fondo:"), React.createElement("div", {style:{display:"flex",gap:8,flexWrap:"wrap"}}, ["linear-gradient(135deg,#FF6B00,#FF9800)","linear-gradient(135deg,#0288D1,#03A9F4)","linear-gradient(135deg,#7B1FA2,#AB47BC)","linear-gradient(135deg,#2E7D32,#66BB6A)","linear-gradient(135deg,#C62828,#EF5350)","linear-gradient(135deg,#F57F17,#FFCA28)","linear-gradient(135deg,#1565C0,#42A5F5)","linear-gradient(135deg,#4E342E,#8D6E63)"].map(function(bg){return React.createElement("div", {key:bg, onClick:function(){setNewPromo(function(p){return Object.assign({},p,{bg:bg})})}, style:{width:36,height:36,borderRadius:10,background:bg,cursor:"pointer",border:newPromo.bg===bg?"3px solid #FBBC04":"3px solid transparent"}})}))), React.createElement("div", {style:{display:"flex",gap:10,marginTop:20}}, React.createElement("button", {onClick:function(){setEditPromo(null)}, style:{...bS,flex:1,background:"#3A3A3A",color:"#9E9E9E"}}, "Cancelar"), React.createElement("button", {onClick:function(){
              if(!newPromo.title){fire("âŒ TÃ­tulo requerido");return}
              if(editPromo.isNew){
                var nid="PR-"+String(promos.length+1).padStart(3,"0");
                setPromos(function(p){return [...p,Object.assign({id:nid},newPromo)]});
                fire("âœ… PromociÃ³n creada");
              }else{
                setPromos(function(p){return p.map(function(x){return x.id===editPromo.id?Object.assign({},x,newPromo):x})});
                fire("âœ… PromociÃ³n actualizada");
              }
              setEditPromo(null);
            }, style:{...bS,flex:1,background:"#FBBC04",color:"#0D0D0D"}}, editPromo.isNew?"Crear":"Guardar")))), React.createElement("div", {style:{padding:"20px 20px 12px"}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:"#777",textTransform:"uppercase",letterSpacing:1}}, "Servicios")), React.createElement("div", {style:{margin:"0 20px 20px",background:adminCard,borderRadius:18,border:`1px solid ${adminBorder}`,overflow:"hidden"}}, [
          {i:"ğŸ“¶",l:"WiFi ilimitado",v:"Todos los niveles"},
          {i:"ğŸš»",l:"Acceso baÃ±os",v:"PLATINO y BLACK"},
          {i:"ğŸª",l:"Estaciones",v:"3 ubicaciones"},
        ].map((r,i)=>
          React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:14,padding:"14px 18px",borderBottom:i<2?`1px solid ${adminBorder}`:"none"}}, React.createElement("span", {style:{fontSize:20}}, r.i), React.createElement("span", {style:{flex:1,fontSize:13,fontWeight:600,color:"#E0E0E0"}}, r.l), React.createElement("span", {style:{fontSize:12,fontWeight:700,color:"#66BB6A",background:"rgba(46,125,50,.15)",padding:"4px 10px",borderRadius:8}}, r.v))
        )));
  };

  // ===== OPERATOR SCREENS =====
  // Safe search helper for operator views
  const oSearch=function(c,q){
    if(!q)return true;
    var lq=q.toLowerCase();
    return (c.name||"").toLowerCase().includes(lq)||(c.phone||"").toLowerCase().includes(lq)||(c.id||"").toLowerCase().includes(lq)||(c.plate||"").toLowerCase().includes(lq)||(c.email||"").toLowerCase().includes(lq)||(c.dpi||"").includes(q);
  };
  const OpHome=()=>{
    const today=new Date().toISOString().split("T")[0];
    const todayBuys=custs.filter(c=>c.lastBuy===today).length;
    const todayNew=custs.filter(c=>c.registered===today).length;
    const tiers={oro:0,platino:0,black:0};custs.forEach(c=>{const n=gT(c.gallons).name;if(n==="ORO")tiers.oro++;else if(n==="PLATINO")tiers.platino++;else tiers.black++});
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"24px 20px 16px",background:"linear-gradient(180deg,#FBBC04,#FFF8E1,#FAFAFA)"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10}}, React.createElement("div", {style:{width:40,height:40,borderRadius:12,background:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:900,color:"#F0A500",boxShadow:"0 4px 12px rgba(251,188,4,.3)"}}, "â›½"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:22,fontWeight:800,color:"#0D0D0D"}}, "Club", React.createElement("span", {style:{color:"#F0A500"}}, "Turkaj")), React.createElement("div", {style:{fontSize:12,color:"#757575",fontWeight:600}}, "Panel de Operador")), React.createElement("button", {onClick:logout, title:"Cerrar sesiÃ³n", style:{width:36,height:36,borderRadius:10,background:"#fff",border:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#9E9E9E",boxShadow:"0 2px 8px rgba(0,0,0,.06)"}}, React.createElement(IC.Logout, null)))), React.createElement("div", {style:{padding:"12px 20px 6px",display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setModal("scan"), style:{...sYBtn,flex:1}}, React.createElement(IC.QR, null), "Escanear"), React.createElement("button", {onClick:()=>setModal("newC"), style:{...sBtn,flex:1,background:"#fff",color:"#424242",border:"1px solid #E0E0E0"}}, React.createElement(IC.Plus, null), "Registrar")), React.createElement("div", {style:{padding:"12px 20px 6px"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10,background:"#fff",borderRadius:14,padding:"0 16px",border:"2px solid #E0E0E0"}}, React.createElement(IC.Search, null), React.createElement("input", {placeholder:"Buscar cliente...", value:oQ, onChange:e=>setOQ(e.target.value), onKeyDown:e=>{if(e.key==="Enter")e.preventDefault()}, style:{flex:1,padding:"14px 0",background:"none",border:"none",fontFamily:"'DM Sans'",fontSize:14,outline:"none"}}), oQ&&React.createElement("div", {onClick:()=>setOQ(""), style:{cursor:"pointer",fontSize:18,color:"#9E9E9E",padding:4}}, "âœ•")), (function(){if(!oQ||oQ.length===0)return null;var res=custs.filter(function(c){return oSearch(c,oQ)}).slice(0,5);if(res.length===0)return React.createElement("div", {style:{textAlign:"center",padding:16,color:"#9E9E9E",fontSize:13}}, "Sin resultados para \"", oQ, "\"");return React.createElement("div", {style:{background:"#fff",borderRadius:14,border:"1px solid #E0E0E0",marginTop:8,overflow:"hidden"}}, res.map(function(c,i){var t=gT(c.gallons);return React.createElement("div", {key:c.id, onMouseDown:function(e){e.preventDefault()}, onClick:function(){setOSel(c);setOScr("odet");setOQ("")}, style:{display:"flex",alignItems:"center",padding:"12px 14px",borderBottom:i?"1px solid #F5F5F5":"none",cursor:"pointer"}}, React.createElement("div", {style:{width:38,height:38,borderRadius:12,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:14,marginRight:12}}, (c.name||"?").charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:13,color:"#424242"}}, c.name), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, c.phone||c.email||"â€”", "Â·", c.dpi||c.id)), React.createElement(Badge, {t:t}))}))})()), React.createElement("div", {style:oSec}, "Hoy"), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,padding:"0 20px",marginBottom:12}}, React.createElement("div", {style:{background:"#FBBC04",borderRadius:16,padding:16,textAlign:"center"}}, React.createElement("div", {style:{...sMono,fontSize:32,fontWeight:800,color:"#0D0D0D"}}, todayBuys), React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"rgba(0,0,0,.5)",textTransform:"uppercase",letterSpacing:1}}, "Clientes atendidos")), React.createElement("div", {style:{background:"#fff",borderRadius:16,padding:16,textAlign:"center",border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{...sMono,fontSize:32,fontWeight:800,color:"#424242"}}, todayNew), React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1}}, "Nuevos registros"))), (function(){var loggedOp=operators.find(function(o){return o.active});if(!loggedOp)return null;var rats=opRatings[loggedOp.id]||[];var avg=rats.length>0?(rats.reduce(function(s,r){return s+r.stars},0)/rats.length).toFixed(1):"â€”";var recent=rats.slice(-5).reverse();return React.createElement("div", {style:{margin:"0 20px 12px",background:"#fff",borderRadius:16,padding:16,border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12}}, React.createElement("div", {style:{fontSize:14,fontWeight:800,color:"#424242"}}, "Mi CalificaciÃ³n"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E"}}, rats.length, " valoraciones")), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:14,marginBottom:rats.length>0?12:0}}, React.createElement("div", {style:{fontSize:36,fontWeight:900,color:avg>=4?"#4CAF50":avg>=3?"#FF9800":avg!=="â€”"?"#F44336":"#E0E0E0",...sMono}}, avg), React.createElement("div", {style:{display:"flex",gap:3}}, [1,2,3,4,5].map(function(s){return React.createElement("span", {key:s, style:{fontSize:22}}, s<=Math.round(avg)?"â­":"â˜†")}))), recent.length>0&&React.createElement("div", {style:{borderTop:"1px solid #F0F0F0",paddingTop:10}}, React.createElement("div", {style:{fontSize:11,fontWeight:700,color:"#9E9E9E",marginBottom:6}}, "Recientes"), recent.map(function(r,i){var cl=custs.find(function(c){return c.id===r.custId});return React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 0",fontSize:12}}, React.createElement("span", {style:{color:"#616161"}}, cl?cl.name:"Cliente"), React.createElement("span", {style:{display:"flex",gap:2}}, [1,2,3,4,5].map(function(s){return React.createElement("span", {key:s, style:{fontSize:11}}, s<=r.stars?"â­":"â˜†")})))})), rats.length===0&&React.createElement("div", {style:{fontSize:12,color:"#BDBDBD",fontStyle:"italic"}}, "AÃºn no recibes calificaciones"))})(), React.createElement("div", {style:oSec}, "Total miembros Â·", custs.length), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8,padding:"0 20px",marginBottom:12}}, React.createElement("div", {style:{background:"#FFF8E1",borderRadius:14,padding:12,textAlign:"center",border:"1px solid #FBBC04"}}, React.createElement("div", {style:{...sMono,fontSize:24,fontWeight:800,color:"#F0A500"}}, tiers.oro), React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#F0A500"}}, "ORO")), React.createElement("div", {style:{background:"#F5F5F5",borderRadius:14,padding:12,textAlign:"center",border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{...sMono,fontSize:24,fontWeight:800,color:"#616161"}}, tiers.platino), React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#757575"}}, "PLATINO")), React.createElement("div", {style:{background:"#424242",borderRadius:14,padding:12,textAlign:"center",border:"1px solid #616161"}}, React.createElement("div", {style:{...sMono,fontSize:24,fontWeight:800,color:"#fff"}}, tiers.black), React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#BDBDBD"}}, "BLACK"))), React.createElement("div", {style:oSec}, "Recientes"), [...custs].sort((a,b)=>(b.lastBuy||"").localeCompare(a.lastBuy||"")).slice(0,6).map((c,i)=>{const t=gT(c.gallons);return(
        React.createElement("div", {key:c.id, onClick:()=>{setOSel(c);setOScr("odet")}, style:{display:"flex",alignItems:"center",padding:"12px 20px",borderBottom:"1px solid #F0F0F0",cursor:"pointer",opacity:1}}, React.createElement("div", {style:{width:40,height:40,borderRadius:12,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:15,marginRight:12}}, c.name.charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:13,color:"#424242"}}, c.name), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, c.lastBuy||"Sin compras", "Â·", c.station)), React.createElement("div", {style:{textAlign:"right"}}, React.createElement("div", {style:{...sMono,fontSize:13,color:"#424242"}}, c.points, "pts"), React.createElement(Badge, {t:t})))
      )}));
  };

  const OpClients=()=>{
    const oFilt=custs.filter(c=>oSearch(c,oQ));
    const sorted=[...oFilt].sort((a,b)=>b.gallons-a.gallons);
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E0E0E0",background:"#FFF8E1",position:"sticky",top:0,zIndex:50}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:"#424242"}}, "Clientes"), React.createElement("button", {onClick:()=>setModal("newC"), style:{...sYBtn,padding:"8px 16px",fontSize:12}}, React.createElement(IC.Plus, null), "Registrar")), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10,background:"#fff",borderRadius:14,padding:"0 16px",margin:"12px 20px",border:"2px solid #E0E0E0"}}, React.createElement(IC.Search, null), React.createElement("input", {placeholder:"Buscar por nombre, tel, placa, ID...", value:oQ, onChange:e=>setOQ(e.target.value), style:{flex:1,padding:"14px 0",background:"none",border:"none",fontFamily:"'DM Sans'",fontSize:14,outline:"none"}})), sorted.map((c,i)=>{const t=gT(c.gallons);return(
        React.createElement("div", {key:c.id, onClick:()=>{setOSel(c);setOScr("odet")}, style:{display:"flex",alignItems:"center",padding:"14px 20px",borderBottom:"1px solid #F0F0F0",cursor:"pointer",opacity:1}}, React.createElement("div", {style:{width:44,height:44,borderRadius:14,background:t.bg,color:t.color,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:16,marginRight:14}}, c.name.charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:14,color:"#424242"}}, c.name), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginTop:2}}, c.dpi||c.email||c.phone, c.plate?` Â· ${c.plate}`:"")), React.createElement("div", {style:{textAlign:"right"}}, React.createElement("div", {style:{...sMono,fontSize:14,color:"#424242"}}, c.points, "pts"), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, c.gallons.toFixed(1), "gal"), React.createElement(Badge, {t:t})))
      )}));
  };

  const OpDetail=()=>{
    const c=custs.find(x=>x.id===oSel?.id)||oSel;if(!c)return null;
    const t=gT(c.gallons);const d=daysInactive(c.lastBuy);
    const acts=(activityLog&&activityLog[c.id])||[];
    const lastStation=acts.find(a=>a.station)?.station||c.station;
    const recentActs=acts.slice(0,8);
    return React.createElement("div", {style:{paddingBottom:90,}}, React.createElement("div", {style:{padding:"14px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E0E0E0",background:"#FFF8E1",position:"sticky",top:0,zIndex:50}}, React.createElement("button", {onClick:()=>{setOScr("oclients");setOSel(null)}, style:{background:"none",border:"none",color:"#757575",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600}}, React.createElement(IC.Back, null), "Clientes"), React.createElement("button", {onClick:()=>{setSel(c);setModal("buy")}, style:{...sYBtn,padding:"8px 20px",fontSize:14}}, "â›½ Registrar Compra")), React.createElement("div", {style:{borderRadius:24,padding:24,margin:"16px 20px",background:tierBg(t.name)||t.grad,color:t.color,position:"relative",overflow:"hidden",textAlign:"center",boxShadow:tierShadow(t.name),border:tierBorder(t.name)}}, React.createElement(TierDeco, {name:t.name}), React.createElement("div", {style:{position:"relative",zIndex:2}}, React.createElement("div", {style:{width:56,height:56,borderRadius:16,background:t.name==="BLACK"?"rgba(255,255,255,.1)":t.name==="PLATINO"?"rgba(255,255,255,.2)":"rgba(0,0,0,.08)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,fontWeight:800,margin:"0 auto 8px"}}, c.name.charAt(0)), React.createElement("div", {style:{fontSize:18,fontWeight:800}}, c.name), React.createElement("div", {style:{display:"flex",justifyContent:"center",gap:8,marginTop:8}}, React.createElement(Badge, {t:t})), React.createElement("div", {style:{padding:"14px 0 0"}}, React.createElement("div", {style:{fontSize:44,fontWeight:800,letterSpacing:-3,lineHeight:1}}, c.points), React.createElement("div", {style:{fontSize:10,textTransform:"uppercase",letterSpacing:3,marginTop:4,fontWeight:700,opacity:.5}}, "Puntos")), React.createElement("div", {style:{fontSize:11,marginTop:6,opacity:.5}}, c.gallons.toFixed(1), "gal", t.discount>0?` Â· -Q${t.discount.toFixed(2)}/gal`:""))), React.createElement("div", {style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,padding:"0 20px",margin:"12px 0"}}, [{v:c.visits,l:"Visitas"},{v:c.gallons.toFixed(1),l:"Galones"},{v:d,l:"DÃ­as inactivo"}].map((s,i)=>React.createElement("div", {key:i, style:{background:"#fff",borderRadius:14,padding:14,textAlign:"center",border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{...sMono,fontSize:20,color:"#424242"}}, s.v), React.createElement("div", {style:{fontSize:10,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginTop:4,fontWeight:700}}, s.l)))), React.createElement("div", {style:{margin:"12px 20px",background:"#FBBC04",borderRadius:14,padding:14,display:"flex",alignItems:"center",gap:12}}, React.createElement("div", {style:{fontSize:20}}, "ğŸ“"), React.createElement("div", null, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"rgba(0,0,0,.5)",textTransform:"uppercase",letterSpacing:1}}, "Ãšltima estaciÃ³n"), React.createElement("div", {style:{fontSize:15,fontWeight:800,color:"#0D0D0D"}}, lastStation))), React.createElement("div", {style:{margin:"12px 20px",background:"#fff",borderRadius:18,padding:20,border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "Datos del cliente"), [{l:"ID",v:c.id},{l:"Tel",v:c.phone},{l:"Placa",v:c.plate||"â€”"},{l:"DPI",v:c.dpi||"â€”"},{l:"ğŸ’³ Tarjeta",v:c.cardId||"â€”"},{l:"EstaciÃ³n registro",v:c.station},{l:"Registro",v:c.registered},{l:"Ãšltima compra",v:c.lastBuy||"â€”"},{l:"Boletos rifa",v:c.tickets}].map(x=>
          React.createElement("div", {key:x.l, style:{display:"flex",justifyContent:"space-between",padding:"7px 0",borderBottom:"1px solid #F0F0F0"}}, React.createElement("span", {style:{fontSize:13,color:"#9E9E9E"}}, x.l), React.createElement("span", {style:{fontSize:13,...sMono,color:"#424242"}}, x.v))
        )), d>=30&&React.createElement("div", {style:{margin:"12px 20px",background:d>=90?"#FFEBEE":d>=60?"#FFF3E0":"#FFF8E1",borderRadius:14,padding:14,border:`1px solid ${d>=90?"#EF9A9A":d>=60?"#FFCC80":"#FBBC04"}`}}, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:d>=90?"#C62828":d>=60?"#E65100":"#F0A500"}}, "âš ï¸", d>=90?"ALERTA: Puede perder TODOS sus puntos":d>=60?"Riesgo: Puede bajar a ORO":"Inactivo: Puede bajar 1 nivel"), React.createElement("div", {style:{fontSize:12,color:"#616161",marginTop:4}}, d, "dÃ­as sin compras Â· Recordale que cargue combustible")), recentActs.length>0&&React.createElement("div", {style:{margin:"12px 20px",background:"#fff",borderRadius:18,padding:20,border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "Ãšltimos movimientos"), recentActs.map((a,i)=>{
          const icons={compra:"â›½",wifi:"ğŸ“¶",encuesta:"ğŸ“Š",canje:"ğŸ·ï¸",rifa:"ğŸŸï¸",referido:"ğŸ‘¥",evento:"ğŸ‰",registro:"ğŸ“"};
          const colors={compra:"#2E7D32",wifi:"#1565C0",encuesta:"#E65100",canje:"#C62828",rifa:"#7B1FA2",referido:"#7B1FA2",evento:"#F0A500",registro:"#00838F"};
          return React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:i?"1px solid #F5F5F5":"none"}}, React.createElement("div", {style:{fontSize:14}}, icons[a.type]||"â€¢"), React.createElement("div", {style:{flex:1,fontSize:12,color:"#424242"}}, a.desc), a.pts&&React.createElement("div", {style:{...sMono,fontSize:12,fontWeight:800,color:a.pts.startsWith("-")?"#C62828":colors[a.type]||"#424242"}}, a.pts), React.createElement("div", {style:{fontSize:9,...sMono,color:"#BDBDBD"}}, a.date.slice(5)))
        })), React.createElement("div", {style:{padding:"12px 20px"}}, React.createElement("button", {onClick:()=>{setSel(c);setModal("buy")}, style:{width:"100%",padding:"16px",background:"#FBBC04",color:"#0D0D0D",border:"none",borderRadius:16,fontFamily:"'DM Sans'",fontSize:16,fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, "â›½ Registrar Compra")));
  };

  const [opRedeemClient,setOpRedeemClient]=useState(null);
  const [opCardScan,setOpCardScan]=useState(null);
  const OpRedeem=()=>{
    const scanCard=()=>{
      setOpCardScan("scanning");
      setTimeout(()=>{
        const activeCards=cards.filter(c2=>c2.status==="active");
        if(activeCards.length===0){setOpCardScan("nocard");return}
        const pick=activeCards[Math.floor(Math.random()*activeCards.length)];
        const cust=custs.find(c2=>c2.cardId===pick.id);
        if(cust){setOpCardScan({id:pick.id,tier:pick.tier});setOpRedeemClient(cust)}
        else setOpCardScan("nocard");
      },1500);
    };
    const cl=opRedeemClient;
    const t=cl?gT(cl.gallons):null;
    const doRedeem=(r)=>{
      if(!cl)return;
      const tier=gT(cl.gallons);
      const cost=Math.round(r.pts*(1-tier.redeemDisc));
      if(cl.points>=cost||cl.points===cost){
        setCusts(p=>p.map(c2=>c2.id===cl.id?{...c2,points:c2.points-cost,redeemed:(c2.redeemed||0)+1}:c2));
        if(me.id===cl.id)setMe(p=>({...p,points:p.points-cost,redeemed:(p.redeemed||0)+1}));
        const code=`TK-${Math.random().toString(36).substring(2,8).toUpperCase()}`;
        setRedeemedList(p=>[{id:`RD-${Date.now()}`,reward:{name:r.name,icon:r.icon,cat:r.cat},cost,date:new Date().toISOString().split("T")[0],code,collected:false},...p]);
        setOpRedeemClient({...cl,points:cl.points-cost,redeemed:(cl.redeemed||0)+1});
        fire(`ğŸ‰ ${cl.name} canjeÃ³ ${r.name} Â· -${cost} pts`);
        syncMember(cl.id,{points:cl.points-cost,redeemed_count:(cl.redeemed||0)+1,updated_at:new Date().toISOString()});
        logActivity(cl.id,'canje','CanjeÃ³: '+r.name+' '+r.icon+' (operador)',-cost);
      }else{fire("âŒ Puntos insuficientes")}
    };
    return React.createElement("div", {style:{paddingBottom:90}}, React.createElement("div", {style:{padding:"14px 20px",borderBottom:"1px solid #E0E0E0",background:"linear-gradient(135deg,#FBBC04 0%,#FFF8E1 60%,#FAFAFA 100%)"}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:"#0D0D0D"}}, "Canjear Premios")), !cl?React.createElement("div", {style:{padding:20}}, React.createElement("div", {style:{background:"#fff",borderRadius:20,padding:24,border:"1px solid #E0E0E0",textAlign:"center"}}, React.createElement("div", {style:{fontSize:48,marginBottom:12}}, "ğŸ’³"), React.createElement("div", {style:{fontSize:16,fontWeight:800,color:"#424242",marginBottom:4}}, "Escanear tarjeta del cliente"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:20}}, "El cliente presenta su tarjeta fÃ­sica para canjear premios"), !opCardScan&&React.createElement("button", {onClick:scanCard, style:{width:"100%",padding:16,borderRadius:16,border:"2px dashed #FBBC04",background:"#FFF8E1",fontFamily:"'DM Sans'",fontSize:15,fontWeight:800,cursor:"pointer",color:"#F0A500",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, "ğŸ“· Escanear Tarjeta"), opCardScan==="scanning"&&React.createElement("div", {style:{padding:20,textAlign:"center"}}, React.createElement("div", {style:{fontSize:32,marginBottom:8,animation:"pulse 1s infinite"}}, "ğŸ“·"), React.createElement("div", {style:{height:4,borderRadius:2,overflow:"hidden",background:"#eee",margin:"12px 0"}}, React.createElement("div", {style:{height:"100%",borderRadius:2,background:"#FBBC04",animation:"scanBar 1.5s ease forwards"}})), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E"}}, "Leyendo tarjeta...")), opCardScan==="nocard"&&React.createElement("div", {style:{padding:16,background:"#FFF3E0",borderRadius:14,border:"1px solid #FFCC80"}}, React.createElement("div", {style:{fontSize:14,fontWeight:700,color:"#E65100"}}, "âš ï¸ Tarjeta no encontrada"), React.createElement("button", {onClick:function(){setOpCardScan(null)}, style:{marginTop:10,padding:"8px 20px",borderRadius:10,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer"}}, "Reintentar"))), React.createElement("div", {style:{margin:"20px 0",background:"#fff",borderRadius:18,padding:20,border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "O buscar por nombre"), React.createElement("input", {placeholder:"Buscar cliente...", value:opSearch||"", onChange:e=>setOpSearch(e.target.value), style:{width:"100%",padding:"12px 16px",borderRadius:12,border:"1px solid #E0E0E0",fontFamily:"'DM Sans'",fontSize:14,outline:"none",boxSizing:"border-box"}}), opSearch&&opSearch.length>1&&custs.filter(c2=>c2.name.toLowerCase().includes(opSearch.toLowerCase())).slice(0,5).map(c2=>{
            const ct=gT(c2.gallons);
            return React.createElement("div", {key:c2.id, onClick:function(){setOpRedeemClient(c2);setOpCardScan({id:c2.cardId,tier:ct.name});setOpSearch("")}, style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #F0F0F0",cursor:"pointer"}}, React.createElement("div", {style:{width:36,height:36,borderRadius:10,background:ct.bg,color:ct.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:800}}, c2.name.charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:14,fontWeight:700,color:"#424242"}}, c2.name), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, c2.points, " pts Â· ", React.createElement(Badge, {t:ct}))))
          })))

      :React.createElement("div", {style:{padding:20}}, React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16}}, React.createElement("button", {onClick:function(){setOpRedeemClient(null);setOpCardScan(null)}, style:{background:"none",border:"none",color:"#757575",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600}}, React.createElement(IC.Back, null), " Escanear otra"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E"}}, "ğŸ’³ ", opCardScan?.id||"")), React.createElement("div", {style:{background:tierBg(t.name)||t.grad,borderRadius:18,padding:20,color:t.color,position:"relative",overflow:"hidden",textAlign:"center",marginBottom:16,boxShadow:tierShadow(t.name),border:tierBorder(t.name)}}, React.createElement(TierDeco, {name:t.name}), React.createElement("div", {style:{position:"relative",zIndex:2}}, React.createElement("div", {style:{fontSize:18,fontWeight:800}}, cl.name), React.createElement("div", {style:{display:"flex",justifyContent:"center",gap:8,marginTop:6}}, React.createElement(Badge, {t:t})), React.createElement("div", {style:{fontSize:36,fontWeight:800,marginTop:10,...sMono}}, cl.points), React.createElement("div", {style:{fontSize:10,textTransform:"uppercase",letterSpacing:3,fontWeight:700,opacity:.5}}, "Puntos disponibles"), t.redeemDisc>0&&React.createElement("div", {style:{marginTop:8,fontSize:12,fontWeight:700,background:"rgba(0,0,0,.1)",display:"inline-block",padding:"4px 12px",borderRadius:8}}, "-", Math.round(t.redeemDisc*100), "% descuento en canjes"))), React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "Premios disponibles"), rewards.map(r=>{
          const dp=Math.round(r.pts*(1-t.redeemDisc));
          const can=cl.points>=dp;
          return React.createElement("div", {key:r.id, onClick:function(){if(can){doRedeem(r)}}, style:{display:"flex",alignItems:"center",gap:14,padding:"14px 16px",marginBottom:8,background:"#fff",borderRadius:16,border:"1px solid #E0E0E0",opacity:can?1:.4,cursor:can?"pointer":"default"}}, React.createElement("div", {style:{fontSize:28,flexShrink:0}}, r.icon), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontSize:14,fontWeight:700,color:"#424242"}}, r.name), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E",marginTop:2}}, r.cat)), React.createElement("div", {style:{textAlign:"right",flexShrink:0}}, t.redeemDisc>0&&React.createElement("div", {style:{fontSize:10,color:"#BDBDBD",textDecoration:"line-through"}}, r.pts, " pts"), React.createElement("div", {style:{fontSize:14,fontWeight:800,color:can?"#2E7D32":"#C62828",...sMono}}, dp, " pts")))
        })));
  };

  const [opRafClient,setOpRafClient]=useState(null);
  const [opRafScan,setOpRafScan]=useState(null);
  const [opRafQty,setOpRafQty]=useState(1);
  // Rating system
  const [showRating,setShowRating]=useState(null); // {opId, opName, custId}
  const [ratingStars,setRatingStars]=useState(0);
  const [opRatings,setOpRatings]=useState({}); // {opId: [{stars, custId, date}]}
  const OpRaffle=()=>{
    const rm=raffleCal[curMonth];
    const rd=rafData[curMonth];
    const totalTickets=rd.participants.reduce((s,p)=>s+p.tickets,0);
    const scanCard=()=>{
      setOpRafScan("scanning");
      setTimeout(()=>{
        const activeCards=cards.filter(c2=>c2.status==="active");
        if(activeCards.length===0){setOpRafScan("nocard");return}
        const pick=activeCards[Math.floor(Math.random()*activeCards.length)];
        const cust=custs.find(c2=>c2.cardId===pick.id);
        if(cust){setOpRafScan({id:pick.id,tier:pick.tier});setOpRafClient(cust)}
        else setOpRafScan("nocard");
      },1500);
    };
    const cl=opRafClient;
    const doBuy=(n)=>{
      if(!cl)return;
      const cost=n*cfg.ticketPts;
      if(cl.points>=cost){
        setCusts(p=>p.map(c2=>c2.id===cl.id?{...c2,points:c2.points-cost,tickets:c2.tickets+n}:c2));
        if(me.id===cl.id)setMe(p=>({...p,points:p.points-cost,tickets:p.tickets+n}));
        setRafData(p=>p.map((r,i)=>{
          if(i!==curMonth)return r;
          const ps=[...r.participants];
          const ex=ps.findIndex(p2=>p2.cid===cl.id);
          if(ex>=0)ps[ex]={...ps[ex],tickets:ps[ex].tickets+n};
          else ps.push({cid:cl.id,name:cl.name,tickets:n});
          return {...r,participants:ps};
        }));
        setOpRafClient({...cl,points:cl.points-cost,tickets:cl.tickets+n});
        fire(`ğŸŸï¸ ${cl.name} comprÃ³ ${n} boleto${n>1?"s":""} Â· -${cost} pts`);
        syncMember(cl.id,{points:cl.points-cost,tickets:cl.tickets+n,updated_at:new Date().toISOString()});
        logActivity(cl.id,'rifa','ComprÃ³ '+n+' boletos de rifa (operador)',-cost);
      }else{fire("âŒ Puntos insuficientes")}
    };
    const clTickets=cl?((rd.participants.find(p=>p.cid===cl.id))||{tickets:0}).tickets:0;
    return React.createElement("div", {style:{paddingBottom:90}}, React.createElement("div", {style:{padding:"14px 20px",borderBottom:"1px solid #E0E0E0",background:"linear-gradient(135deg,#FBBC04 0%,#FFF8E1 60%,#FAFAFA 100%)"}}, React.createElement("div", {style:{fontSize:17,fontWeight:700,color:"#0D0D0D"}}, "Rifa Â· Operador")), React.createElement("div", {style:{margin:"16px 20px",padding:20,background:"#FBBC04",borderRadius:20,position:"relative",overflow:"hidden"}}, React.createElement("div", {style:{position:"absolute",top:"-30%",right:"-20%",width:"50%",height:"80%",background:"rgba(255,255,255,.15)",borderRadius:"50%"}}), React.createElement("div", {style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:14}}, React.createElement("div", {style:{fontSize:36}}, rm.p.split(" ")[0]), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:15,fontWeight:800}}, rm.p), React.createElement("div", {style:{fontSize:12,opacity:.6}}, rm.m, " 2026")), React.createElement("div", {style:{textAlign:"right"}}, React.createElement("div", {style:{fontSize:20,fontWeight:800,...sMono}}, totalTickets), React.createElement("div", {style:{fontSize:9,fontWeight:700,opacity:.5,textTransform:"uppercase",letterSpacing:1}}, "boletos")))), !cl?React.createElement("div", {style:{padding:"0 20px"}}, React.createElement("div", {style:{background:"#fff",borderRadius:20,padding:24,border:"1px solid #E0E0E0",textAlign:"center"}}, React.createElement("div", {style:{fontSize:48,marginBottom:12}}, "ğŸŸï¸"), React.createElement("div", {style:{fontSize:16,fontWeight:800,color:"#424242",marginBottom:4}}, "Comprar boletos con tarjeta"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:20}}, "El cliente presenta su tarjeta para comprar boletos de rifa"), !opRafScan&&React.createElement("button", {onClick:scanCard, style:{width:"100%",padding:16,borderRadius:16,border:"2px dashed #FBBC04",background:"#FFF8E1",fontFamily:"'DM Sans'",fontSize:15,fontWeight:800,cursor:"pointer",color:"#F0A500",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, "ğŸ“· Escanear Tarjeta"), opRafScan==="scanning"&&React.createElement("div", {style:{padding:20,textAlign:"center"}}, React.createElement("div", {style:{fontSize:32,marginBottom:8,animation:"pulse 1s infinite"}}, "ğŸ“·"), React.createElement("div", {style:{height:4,borderRadius:2,overflow:"hidden",background:"#eee",margin:"12px 0"}}, React.createElement("div", {style:{height:"100%",borderRadius:2,background:"#FBBC04",animation:"scanBar 1.5s ease forwards"}})), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E"}}, "Leyendo tarjeta...")), opRafScan==="nocard"&&React.createElement("div", {style:{padding:16,background:"#FFF3E0",borderRadius:14,border:"1px solid #FFCC80"}}, React.createElement("div", {style:{fontSize:14,fontWeight:700,color:"#E65100"}}, "âš ï¸ Tarjeta no encontrada"), React.createElement("button", {onClick:function(){setOpRafScan(null)}, style:{marginTop:10,padding:"8px 20px",borderRadius:10,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer"}}, "Reintentar"))), React.createElement("div", {style:{margin:"20px 0",background:"#fff",borderRadius:18,padding:20,border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:12}}, "O buscar por nombre"), React.createElement("input", {placeholder:"Buscar cliente...", value:opSearch||"", onChange:e=>setOpSearch(e.target.value), style:{width:"100%",padding:"12px 16px",borderRadius:12,border:"1px solid #E0E0E0",fontFamily:"'DM Sans'",fontSize:14,outline:"none",boxSizing:"border-box"}}), opSearch&&opSearch.length>1&&custs.filter(c2=>c2.name.toLowerCase().includes(opSearch.toLowerCase())).slice(0,5).map(c2=>{
            const ct=gT(c2.gallons);
            return React.createElement("div", {key:c2.id, onClick:function(){setOpRafClient(c2);setOpRafScan({id:c2.cardId,tier:ct.name});setOpSearch("")}, style:{display:"flex",alignItems:"center",gap:12,padding:"12px 0",borderBottom:"1px solid #F0F0F0",cursor:"pointer"}}, React.createElement("div", {style:{width:36,height:36,borderRadius:10,background:ct.bg,color:ct.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:800}}, c2.name.charAt(0)), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontSize:14,fontWeight:700,color:"#424242"}}, c2.name), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, c2.points, " pts Â· ", React.createElement(Badge, {t:ct}))))
          })))

      :React.createElement("div", {style:{padding:"0 20px"}}, React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16}}, React.createElement("button", {onClick:function(){setOpRafClient(null);setOpRafScan(null);setOpRafQty(1)}, style:{background:"none",border:"none",color:"#757575",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600}}, React.createElement(IC.Back, null), " Escanear otra"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E"}}, "ğŸ’³ ", opRafScan?.id||"")), React.createElement("div", {style:{background:"#fff",borderRadius:18,padding:20,border:"1px solid #E0E0E0",textAlign:"center",marginBottom:16}}, React.createElement("div", {style:{fontSize:16,fontWeight:800,color:"#424242"}}, cl.name), React.createElement("div", {style:{display:"flex",justifyContent:"center",gap:8,marginTop:6}}, React.createElement(Badge, {t:gT(cl.gallons)})), React.createElement("div", {style:{display:"flex",justifyContent:"center",gap:24,marginTop:14}}, React.createElement("div", null, React.createElement("div", {style:{fontSize:24,fontWeight:800,color:"#424242",...sMono}}, cl.points), React.createElement("div", {style:{fontSize:10,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,fontWeight:700}}, "puntos")), React.createElement("div", null, React.createElement("div", {style:{fontSize:24,fontWeight:800,color:"#F0A500",...sMono}}, clTickets), React.createElement("div", {style:{fontSize:10,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,fontWeight:700}}, "boletos")))), React.createElement("div", {style:{background:"#fff",borderRadius:18,padding:20,border:"1px solid #E0E0E0",marginBottom:16}}, React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:14,textAlign:"center"}}, "Precio: ", React.createElement("strong", {style:{color:"#2E7D32",...sMono}}, cfg.ticketPts, " pts"), " por boleto"), React.createElement("div", {style:{display:"flex",gap:8,marginBottom:14}}, [1,3,5,10].map(n=>React.createElement("button", {key:n, onClick:function(){setOpRafQty(n)}, style:{flex:1,padding:12,borderRadius:12,border:`2px solid ${opRafQty===n?"#FBBC04":"#E0E0E0"}`,background:opRafQty===n?"#FFF8E1":"#fff",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:opRafQty===n?"#F0A500":"#9E9E9E"}}, n))), React.createElement("div", {style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14,padding:"10px 14px",borderRadius:12,background:"#F5F5F5"}}, React.createElement("span", {style:{fontSize:12,fontWeight:700,color:"#757575"}}, "Costo total:"), React.createElement("span", {style:{fontSize:16,fontWeight:800,color:cl.points>=opRafQty*cfg.ticketPts?"#2E7D32":"#C62828",...sMono}}, opRafQty*cfg.ticketPts, " pts")), React.createElement("button", {onClick:function(){doBuy(opRafQty)}, disabled:opRafQty*cfg.ticketPts>cl.points, style:{width:"100%",padding:16,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:15,fontWeight:800,cursor:"pointer",color:"#0D0D0D",opacity:cl.points>=opRafQty*cfg.ticketPts?1:.5,display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, "ğŸŸï¸ Comprar ", opRafQty, " boleto", opRafQty>1?"s":"")), React.createElement("div", {style:{background:"#fff",borderRadius:18,padding:16,border:"1px solid #E0E0E0"}}, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:"#BDBDBD",textTransform:"uppercase",letterSpacing:1.5,marginBottom:10}}, "Participantes este mes"), rd.participants.length===0&&React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",textAlign:"center",padding:12}}, "AÃºn no hay participantes"), rd.participants.map((p,i)=>React.createElement("div", {key:p.cid, style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:i?"1px solid #F0F0F0":"none"}}, React.createElement("span", {style:{fontSize:13,fontWeight:700,color:p.cid===cl.id?"#F0A500":"#424242"}}, p.name, p.cid===cl.id?" â†":""), React.createElement("span", {style:{fontSize:13,fontWeight:800,color:"#757575",...sMono}}, p.tickets, " ğŸŸï¸"))))));
  };

  // ===== AUTH HELPERS =====
  const iS={fontFamily:"'DM Sans'",fontSize:14,padding:"14px 16px",borderRadius:14,border:"1.5px solid #E0E0E0",background:"#FAFAFA",outline:"none",width:"100%",boxSizing:"border-box",fontWeight:600,color:"#0D0D0D"};
  const iSd={...iS,background:"#2A2A2A",border:"2px solid #3A3A3A",color:"#fff"};
  const bS={fontFamily:"'DM Sans'",fontSize:15,fontWeight:800,padding:"16px 24px",borderRadius:16,border:"none",cursor:"pointer",width:"100%",textAlign:"center"};
  const clearAuthErr=function(){if(authError)setAuthError("")};

  // ===== CLIENT LOGIN =====
  const renderClientLogin=function(){
    const doLogin=function(){
      clearAuthErr();
      if(!loginPhone||!loginPass){setAuthError("Ingresa telÃ©fono y contraseÃ±a");return}
      const found=custs.find(function(c){return c.phone===loginPhone});
      if(!found){setAuthError("NÃºmero no registrado");return}
      setMe(found);setAuthScreen("logged");fire("ğŸ‘‹ Bienvenido "+found.name);
    };
    const doGoogle=function(){
      if(sb){
        sb.auth.signInWithOAuth({provider:'google',options:{redirectTo:window.location.href}});
      }else{
        setAuthError("Supabase no disponible");
      }
    };
    const doApple=function(){
      if(sb){
        sb.auth.signInWithOAuth({provider:'apple',options:{redirectTo:window.location.href}});
      }else{
        setAuthError("Supabase no disponible");
      }
    };
    return React.createElement("div", {style:{padding:"40px 24px 120px",position:"relative",zIndex:1}}, React.createElement("div", {style:{textAlign:"center",marginBottom:32}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "â›½"), React.createElement("div", {style:{fontSize:24,fontWeight:900,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Club Turkaj"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:4}}, "Inicia sesiÃ³n para continuar")), authError&&React.createElement("div", {style:{background:"#FFEBEE",color:"#C62828",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:12,marginBottom:20}}, React.createElement("input", {placeholder:"NÃºmero de telÃ©fono", value:loginPhone, onChange:function(e){setLoginPhone(e.target.value);clearAuthErr()}, style:iS}), React.createElement("input", {placeholder:"ContraseÃ±a", type:"password", value:loginPass, onChange:function(e){setLoginPass(e.target.value);clearAuthErr()}, style:iS}), React.createElement("button", {onClick:doLogin, style:{...bS,background:"#FBBC04",color:"#0D0D0D"}}, "Iniciar SesiÃ³n")), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:12,margin:"20px 0"}}, React.createElement("div", {style:{flex:1,height:1,background:"#eee"}}), React.createElement("span", {style:{fontSize:12,color:"#9E9E9E",fontWeight:600}}, "o continuar con"), React.createElement("div", {style:{flex:1,height:1,background:"#eee"}})), React.createElement("div", {style:{display:"flex",gap:12,marginBottom:24}}, React.createElement("button", {onClick:doGoogle, style:{...bS,flex:1,background:"#fff",border:"2px solid #eee",color:"#333",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, React.createElement("svg", {width:"18", height:"18", viewBox:"0 0 24 24"}, React.createElement("path", {d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z", fill:"#4285F4"}), React.createElement("path", {d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z", fill:"#34A853"}), React.createElement("path", {d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z", fill:"#FBBC05"}), React.createElement("path", {d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z", fill:"#EA4335"})), "Google"), React.createElement("button", {onClick:doApple, style:{...bS,flex:1,background:"#000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, React.createElement("svg", {width:"18", height:"18", viewBox:"0 0 24 24", fill:"#fff"}, React.createElement("path", {d:"M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.32 2.32-2.11 4.45-3.74 4.25z"})), "Apple")), React.createElement("div", {style:{textAlign:"center"}}, React.createElement("span", {style:{fontSize:13,color:"#9E9E9E"}}, "Â¿No tienes cuenta?"), React.createElement("button", {onClick:function(){setAuthScreen("register");setAuthError("")}, style:{background:"none",border:"none",color:"#FBBC04",fontWeight:800,fontSize:13,cursor:"pointer",fontFamily:"'DM Sans'"}}, "RegÃ­strate")));
  };

  // ===== CLIENT REGISTER =====
  const renderClientRegister=function(){
    const doSend=function(){
      clearAuthErr();
      if(!regPhone){setAuthError("Ingresa tu nÃºmero");return}
      if(!regPass||regPass.length<6){setAuthError("ContraseÃ±a mÃ­nimo 6 caracteres");return}
      if(regPass!==regPass2){setAuthError("Las contraseÃ±as no coinciden");return}
      if(custs.find(function(c){return c.phone===regPhone})){setAuthError("Este nÃºmero ya estÃ¡ registrado");return}
      setRegSentCode(true);
      fire(regVerifyMethod==="whatsapp"?"ğŸ“± CÃ³digo enviado por WhatsApp":"ğŸ“± CÃ³digo enviado por SMS");
    };
    const doVerify=function(){
      if(regCode.length>=4){
        setAuthScreen("profile");fire("âœ… NÃºmero verificado");
      }else{setAuthError("CÃ³digo invÃ¡lido")}
    };
    if(regSentCode){
      return React.createElement("div", {style:{padding:"40px 24px 120px",position:"relative",zIndex:1}}, React.createElement("button", {onClick:function(){setRegSentCode(false);setAuthScreen("register");setAuthError("")}, style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:4,color:"#9E9E9E",fontFamily:"'DM Sans'",fontSize:14,fontWeight:600,marginBottom:20}}, React.createElement(IC.Back, null), "AtrÃ¡s"), React.createElement("div", {style:{textAlign:"center",marginBottom:24}}, React.createElement("div", {style:{fontSize:48,marginBottom:8}}, regVerifyMethod==="whatsapp"?"ğŸ’¬":"ğŸ“±"), React.createElement("div", {style:{fontSize:20,fontWeight:900}}, "Verificar NÃºmero"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:8}}, "Enviamos un cÃ³digo a ", regPhone, " por ", regVerifyMethod==="whatsapp"?"WhatsApp":"SMS")), authError&&React.createElement("div", {style:{background:"#FFEBEE",color:"#C62828",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("input", {placeholder:"CÃ³digo de verificaciÃ³n", value:regCode, onChange:function(e){setRegCode(e.target.value);clearAuthErr()}, style:{...iS,textAlign:"center",fontSize:24,fontWeight:800,letterSpacing:8,marginBottom:16}, maxLength:6}), React.createElement("button", {onClick:doVerify, style:{...bS,background:"#FBBC04",color:"#0D0D0D"}}, "Verificar"), React.createElement("div", {style:{textAlign:"center",marginTop:16}}, React.createElement("button", {onClick:doSend, style:{background:"none",border:"none",color:"#FBBC04",fontWeight:700,fontSize:13,cursor:"pointer",fontFamily:"'DM Sans'"}}, "Reenviar cÃ³digo")));
    }
    return React.createElement("div", {style:{padding:"40px 24px 120px",position:"relative",zIndex:1}}, React.createElement("button", {onClick:function(){setAuthScreen("login");setAuthError("")}, style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:4,color:"#9E9E9E",fontFamily:"'DM Sans'",fontSize:14,fontWeight:600,marginBottom:20}}, React.createElement(IC.Back, null), "AtrÃ¡s"), React.createElement("div", {style:{textAlign:"center",marginBottom:24}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ†•"), React.createElement("div", {style:{fontSize:22,fontWeight:900}}, "Crear Cuenta"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:4}}, "Ãšnete a Club Turkaj")), authError&&React.createElement("div", {style:{background:"#FFEBEE",color:"#C62828",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:12,marginBottom:20}}, React.createElement("input", {placeholder:"NÃºmero de telÃ©fono", value:regPhone, onChange:function(e){setRegPhone(e.target.value);clearAuthErr()}, style:iS}), React.createElement("input", {placeholder:"Crear contraseÃ±a", type:"password", value:regPass, onChange:function(e){setRegPass(e.target.value);clearAuthErr()}, style:iS}), React.createElement("input", {placeholder:"Confirmar contraseÃ±a", type:"password", value:regPass2, onChange:function(e){setRegPass2(e.target.value);clearAuthErr()}, style:iS})), React.createElement("div", {style:{marginBottom:20}}, React.createElement("div", {style:{fontSize:13,fontWeight:700,marginBottom:10,color:"#424242"}}, "Verificar nÃºmero por:"), React.createElement("div", {style:{display:"flex",gap:10}}, ["whatsapp","sms"].map(function(m){return React.createElement("button", {key:m, onClick:function(){setRegVerifyMethod(m)}, style:{flex:1,padding:"14px 16px",borderRadius:14,border:regVerifyMethod===m?"2px solid #FBBC04":"2px solid #eee",background:regVerifyMethod===m?"#FFF8E1":"#fff",cursor:"pointer",fontFamily:"'DM Sans'",fontWeight:700,fontSize:13,color:regVerifyMethod===m?"#F0A500":"#9E9E9E",display:"flex",alignItems:"center",justifyContent:"center",gap:8}}, m==="whatsapp"?"ğŸ’¬ WhatsApp":"ğŸ“± SMS")}))), React.createElement("button", {onClick:doSend, style:{...bS,background:"#FBBC04",color:"#0D0D0D"}}, "Enviar CÃ³digo"));
  };


  // ===== CLIENT PROFILE (post-register) =====
  const renderClientProfile=function(){
    var maxBday=new Date(new Date().getFullYear()-18,new Date().getMonth(),new Date().getDate()).toISOString().split("T")[0];
    const fields=[
      {k:"name",l:"Nombre completo",icon:"ğŸ‘¤",req:true,noBonus:true},
      {k:"dpi",l:"DPI (13 dÃ­gitos)",icon:"ğŸªª",req:true,maxLen:13,numOnly:true},
      {k:"plate",l:"Placa vehÃ­culo (opcional)",icon:"ğŸš—"},
      {k:"email",l:"Correo electrÃ³nico (opcional)",icon:"ğŸ“§",type:"email"},
      {k:"bday",l:"Fecha de nacimiento (opcional)",icon:"ğŸ‚",type:"date"},
      {k:"nit",l:"NIT (opcional)",icon:"ğŸ§¾"},
    ];
    const optFilled=["dpi","plate","email","bday","nit"].filter(function(k){return regProfile[k]&&regProfile[k].trim()}).length+(regPhone?1:0);
    const bonusPts=optFilled*cfg.regOptional;
    const doFinish=function(){
      if(!regProfile.name.trim()){setAuthError("Ingresa tu nombre");return}
      if(!regProfile.dpi.trim()){setAuthError("El DPI es obligatorio");return}
      if(!/^\d{13}$/.test(regProfile.dpi.trim())){setAuthError("El DPI debe tener exactamente 13 dÃ­gitos");return}
      // Validate bday if provided
      if(regProfile.bday){
        var bd=new Date(regProfile.bday);
        var age=Math.floor((new Date()-bd)/(365.25*24*60*60*1000));
        if(age<18){setAuthError("Debes tener al menos 18 aÃ±os");return}
        if(age>120){setAuthError("Fecha de nacimiento invÃ¡lida");return}
      }
      // Convert to MM-DD for storage
      var bdayStored="";
      if(regProfile.bday){var bp=regProfile.bday.split("-");if(bp.length===3)bdayStored=bp[1]+"-"+bp[2];}
      const nc={id:"CT-"+String(custs.length+1).padStart(3,"0"),name:regProfile.name,phone:regPhone,dpi:regProfile.dpi,plate:regProfile.plate,email:regProfile.email,bday:bdayStored,nit:regProfile.nit,points:cfg.regBase+bonusPts,gallons:0,spent:0,visits:0,registered:new Date().toISOString().split("T")[0],lastBuy:"",station:"",tickets:0,redeemed:0,referrals:0,cardId:""};
      setCusts(function(p){return [...p,nc]});
      setMe(nc);
      setAuthScreen("logged");
      fire("ğŸ‰ Â¡Bienvenido! +"+(cfg.regBase+bonusPts)+" pts de registro");
    };
    return React.createElement("div", {style:{padding:"40px 24px 120px",position:"relative",zIndex:1}}, React.createElement("div", {style:{textAlign:"center",marginBottom:24}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ“"), React.createElement("div", {style:{fontSize:22,fontWeight:900}}, "Completa tu Perfil"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:4}}, "Gana +", cfg.regBase, " pts base Â· +", cfg.regOptional, " pts por cada dato opcional")), authError&&React.createElement("div", {style:{background:"#FFEBEE",color:"#C62828",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:12,marginBottom:20}}, fields.map(function(f){var baseStyle=Object.assign({},iS,{paddingLeft:42});return React.createElement("div", {key:f.k, style:{position:"relative"}}, React.createElement("div", {style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",fontSize:16,zIndex:1}}, f.icon), f.type==="date"?React.createElement(React.Fragment, null, React.createElement("input", {type:"date", value:regProfile[f.k]||"", max:maxBday, min:"1930-01-01", onFocus:function(){if(!regProfile[f.k]){setRegProfile(function(p){var n=Object.assign({},p);n[f.k]="2000-01-01";return n})}}, onChange:function(e){setRegProfile(function(p){var n=Object.assign({},p);n[f.k]=e.target.value;return n});clearAuthErr()}, style:Object.assign({},baseStyle,{color:regProfile[f.k]?"#0D0D0D":"transparent"})}), !regProfile[f.k]&&React.createElement("div", {style:{position:"absolute",left:42,top:"50%",transform:"translateY(-50%)",fontSize:14,color:"#9E9E9E",pointerEvents:"none",fontFamily:"'DM Sans'",fontWeight:600}}, f.l), regProfile[f.k]&&React.createElement("div", {style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:800,color:"#4CAF50",background:"#E8F5E9",padding:"2px 8px",borderRadius:8}}, "+", cfg.regOptional, "pts")):React.createElement(React.Fragment, null, React.createElement("input", {placeholder:f.l, type:f.type||"text", inputMode:f.numOnly?"numeric":undefined, maxLength:f.maxLen||undefined, value:regProfile[f.k]||"", onChange:function(e){var v=e.target.value;if(f.numOnly)v=v.replace(/\D/g,"");if(f.maxLen&&v.length>f.maxLen)v=v.slice(0,f.maxLen);setRegProfile(function(p){var n=Object.assign({},p);n[f.k]=v;return n});clearAuthErr()}, style:baseStyle}), !f.noBonus&&regProfile[f.k]&&regProfile[f.k].trim()&&React.createElement("div", {style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:800,color:"#4CAF50",background:"#E8F5E9",padding:"2px 8px",borderRadius:8}}, "+", cfg.regOptional, "pts")))})), React.createElement("div", {style:{background:"#FFF8E1",borderRadius:14,padding:16,marginBottom:20,textAlign:"center"}}, React.createElement("div", {style:{fontSize:13,fontWeight:600,color:"#9E9E9E"}}, "Puntos al registrarte"), React.createElement("div", {style:{fontSize:28,fontWeight:900,color:"#F0A500"}}, cfg.regBase+bonusPts), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, "Base: ", cfg.regBase, " + Datos opcionales: ", bonusPts)), React.createElement("button", {onClick:doFinish, style:{...bS,background:"#FBBC04",color:"#0D0D0D"}}, "Completar Registro"));
  };

  // ===== GOOGLE USER WELCOME + PROFILE =====
  const [googleStep,setGoogleStep]=useState("welcome"); // welcome | profile
  const renderGoogleProfile=function(){
    if(googleStep==="welcome"){
      var doBackToLogin=function(){
        setMe(null);setAuthScreen("login");setGoogleStep("welcome");setRegProfile({name:"",dpi:"",plate:"",email:"",bday:"",nit:""});
        if(sb){sb.auth.signOut({scope:"local"}).catch(function(){});}
      };
      return React.createElement("div", {style:{padding:"40px 24px 120px",position:"relative",zIndex:1}}, React.createElement("button", {onClick:doBackToLogin, style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:4,color:"#9E9E9E",fontFamily:"'DM Sans'",fontSize:14,fontWeight:600,marginBottom:20}}, React.createElement(IC.Back, null), "Volver al inicio"), React.createElement("div", {style:{textAlign:"center",marginBottom:24}}, me.avatar&&React.createElement("img", {src:me.avatar, style:{width:72,height:72,borderRadius:"50%",border:"3px solid #FBBC04",marginBottom:12}, alt:""}), !me.avatar&&React.createElement("div", {style:{fontSize:48,marginBottom:12}}, "â›½"), React.createElement("div", {style:{fontSize:24,fontWeight:900,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Â¡Hola, ", me.name.split(" ")[0], "!"), React.createElement("div", {style:{fontSize:14,color:"#9E9E9E",marginTop:6}}, "Bienvenido a Club Turkaj")), React.createElement("div", {style:{background:cTier.name==="BLACK"?"rgba(255,255,255,.05)":"#FFF8E1",borderRadius:20,padding:24,marginBottom:20}}, React.createElement("div", {style:{fontSize:15,fontWeight:800,color:cTier.name==="BLACK"?"#FBBC04":"#F0A500",marginBottom:16,textAlign:"center"}}, "Â¿CÃ³mo funciona?"), [
            {icon:"â›½",title:"AcumulÃ¡ puntos",desc:"GanÃ¡s 1 punto por cada Q"+cfg.qPerPt+" en combustible"},
            {icon:"ğŸ",title:"CanjeÃ¡ premios",desc:"Desde cafÃ© gratis hasta un PlayStation 5"},
            {icon:"ğŸŸï¸",title:"Rifas mensuales",desc:"Cada mes un premio diferente â€” este mes un premio especial"},
            {icon:"â­",title:"SubÃ­ de nivel",desc:"ORO â†’ PLATINO (150 gal) â†’ BLACK (500 gal) con mÃ¡s beneficios"},
          ].map(function(item,i){return React.createElement("div", {key:i, style:{display:"flex",alignItems:"flex-start",gap:12,padding:"10px 0",borderBottom:i<3?("1px solid "+(cTier.name==="BLACK"?"rgba(255,255,255,.06)":"rgba(0,0,0,.06)")):"none"}}, React.createElement("div", {style:{fontSize:24,flexShrink:0,marginTop:2}}, item.icon), React.createElement("div", null, React.createElement("div", {style:{fontSize:13,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, item.title), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginTop:2}}, item.desc)))})), React.createElement("div", {style:{background:cTier.name==="BLACK"?"rgba(255,255,255,.05)":"#E8F5E9",borderRadius:16,padding:16,marginBottom:24,textAlign:"center"}}, React.createElement("div", {style:{fontSize:11,fontWeight:700,color:"#4CAF50",textTransform:"uppercase",letterSpacing:1}}, "Bonus de registro"), React.createElement("div", {style:{fontSize:32,fontWeight:900,color:"#4CAF50",marginTop:4}}, cfg.regBase, "+"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E"}}, "puntos base + ", cfg.regOptional, " por cada dato opcional")), React.createElement("button", {onClick:function(){setGoogleStep("profile")}, style:{...bS,background:"#FBBC04",color:"#0D0D0D",width:"100%"}}, "Completar mi perfil â†’"));
    }
    // Step 2: Profile form (reuse fields from register)
    var maxBday=new Date(new Date().getFullYear()-18,new Date().getMonth(),new Date().getDate()).toISOString().split("T")[0];
    var fields=[
      {k:"name",l:"Nombre completo",icon:"ğŸ‘¤",req:true,type:"text",noBonus:true},
      {k:"phone",l:"TelÃ©fono 8 dÃ­gitos (opcional)",icon:"ğŸ“±",type:"tel",maxLen:8,numOnly:true},
      {k:"dpi",l:"DPI (13 dÃ­gitos)",icon:"ğŸªª",type:"text",req:true,maxLen:13,numOnly:true},
      {k:"plate",l:"Placa vehÃ­culo (opcional)",icon:"ğŸš—",type:"text"},
      {k:"email",l:"Correo electrÃ³nico",icon:"ğŸ“§",type:"email"},
      {k:"bday",l:"Fecha de nacimiento (opcional)",icon:"ğŸ‚",type:"date"},
      {k:"nit",l:"NIT (opcional)",icon:"ğŸ§¾",type:"text"},
    ];
    var optFilled=["phone","dpi","plate","bday","nit"].filter(function(k){return regProfile[k]&&regProfile[k].trim()}).length+(regProfile.email&&regProfile.email.trim()?1:0);
    var bonusPts=optFilled*cfg.regOptional;
    var doFinishGoogle=function(){
      if(!regProfile.name.trim()){setAuthError("Ingresa tu nombre");return}
      if(!regProfile.dpi||!regProfile.dpi.trim()){setAuthError("El DPI es obligatorio");return}
      if(!/^\d{13}$/.test(regProfile.dpi.trim())){setAuthError("El DPI debe tener exactamente 13 dÃ­gitos");return}
      if(regProfile.phone&&regProfile.phone.trim()&&!/^\d{8}$/.test(regProfile.phone.trim())){setAuthError("El telÃ©fono debe tener exactamente 8 dÃ­gitos");return}
      // Validate bday if provided
      if(regProfile.bday){
        var bd=new Date(regProfile.bday);
        var age=Math.floor((new Date()-bd)/(365.25*24*60*60*1000));
        if(age<18){setAuthError("Debes tener al menos 18 aÃ±os");return}
        if(age>120){setAuthError("Fecha de nacimiento invÃ¡lida");return}
      }
      var totalPts=cfg.regBase+bonusPts;
      // Convert date to MM-DD format for storage
      var bdayStored="";
      if(regProfile.bday){var parts=regProfile.bday.split("-");if(parts.length===3)bdayStored=parts[1]+"-"+parts[2];}

      // Generate sequential card code: CTOD-XXXXX (Club Turkaj Oro Digital)
      // Query the max existing correlative from members table
      var generateCardAndFinish=function(){
        var fallbackCard="CTOD-"+String(Date.now()).slice(-5);
        if(sb&&sbConnected){
          // Find highest CTOD- number in members
          sb.from('members').select('phone').like('phone','goog_%').then(function(){
            // Query all members to find max card code
            sb.from('members').select('card_id').then(function(r){
              var maxNum=0;
              if(r.data){
                r.data.forEach(function(m){
                  if(m.card_id&&typeof m.card_id==='string'){
                    var match=m.card_id.match(/^CTOD-(\d+)$/);
                    if(match){var n=parseInt(match[1],10);if(n>maxNum)maxNum=n;}
                  }
                });
              }
              // Also check custs in local state
              custs.forEach(function(c){
                if(c.cardId&&typeof c.cardId==='string'){
                  var match=c.cardId.match(/^CTOD-(\d+)$/);
                  if(match){var n=parseInt(match[1],10);if(n>maxNum)maxNum=n;}
                }
              });
              var nextNum=maxNum+1;
              var autoCardId="CTOD-"+String(nextNum).padStart(5,"0");
              doInsertMember(autoCardId);
            }).catch(function(){doInsertMember(fallbackCard)});
          }).catch(function(){doInsertMember(fallbackCard)});
        }else{
          // Offline: use local custs count
          var maxNum=0;
          custs.forEach(function(c){
            if(c.cardId&&typeof c.cardId==='string'){
              var match=c.cardId.match(/^CTOD-(\d+)$/);
              if(match){var n=parseInt(match[1],10);if(n>maxNum)maxNum=n;}
            }
          });
          doInsertMember("CTOD-"+String(maxNum+1).padStart(5,"0"));
        }
      };

      var doInsertMember=function(autoCardId){

      // Save to Supabase members table
      var uniquePhone=regProfile.phone&&regProfile.phone.trim()?regProfile.phone.trim():"goog_"+me.id.substring(0,12);
      var memberData={
        phone:uniquePhone,
        password_hash:"google-oauth",
        auth_provider:"google",
        auth_provider_id:me.id,
        name:regProfile.name,
        dpi:regProfile.dpi||null,
        plate:regProfile.plate||null,
        nit:regProfile.nit||null,
        email:regProfile.email||me.email,
        birthday:bdayStored||null,
        points:totalPts,
        gallons:0,spent:0,visits:0,tickets:0,
        redeemed_count:0,referral_count:0
      };

      var nc=Object.assign({},me,{
        name:regProfile.name,phone:regProfile.phone||"",dpi:regProfile.dpi||"",
        plate:regProfile.plate||"",email:regProfile.email||me.email,
        bday:bdayStored,nit:regProfile.nit||"",
        points:totalPts,gallons:0,spent:0,visits:0,tickets:0,
        redeemed:0,referrals:0,registered:new Date().toISOString().split("T")[0],
        lastBuy:"",station:"",cardId:autoCardId
      });

      if(sb&&sbConnected){
        // First create physical card entry
        sb.from('physical_cards').insert({card_code:autoCardId,tier:"ORO",status:"active"}).select().then(function(cardRes){
          var cardUuid=cardRes.data&&cardRes.data[0]?cardRes.data[0].id:null;
          if(cardUuid)memberData.card_id=cardUuid;

          sb.from('members').insert(memberData).select().then(function(r){
          if(r.error){
            console.error("[Supabase] Insert member error:",r.error);
            // Retry with truly unique phone on conflict
            if(r.error.code==="23505"){
              memberData.phone="goog_"+Date.now()+"_"+Math.random().toString(36).substring(2,6);
              sb.from('members').insert(memberData).select().then(function(r2){
                if(r2.data&&r2.data[0]){nc.id=r2.data[0].id;}
                else{console.error("[Supabase] Retry also failed:",r2.error);}
                finishRegistration(nc,totalPts);
              }).catch(function(){finishRegistration(nc,totalPts)});
              return;
            }
            // Other error - still finish registration locally
            finishRegistration(nc,totalPts);
          }else if(r.data&&r.data[0]){
            nc.id=r.data[0].id;
            finishRegistration(nc,totalPts);
          }else{
            finishRegistration(nc,totalPts);
          }
        }).catch(function(e){console.error("[Supabase] Insert catch:",e);finishRegistration(nc,totalPts)});
        }).catch(function(e){console.error("[Supabase] Card insert catch:",e);finishRegistration(nc,totalPts)});
      }else{
        finishRegistration(nc,totalPts);
      }
      }; // end doInsertMember

      generateCardAndFinish();
    }; // end doFinishGoogle

    var finishRegistration=function(nc,totalPts){
      setCusts(function(p){return [].concat(p,[nc])});
      setMe(nc);
      setAuthScreen("logged");
      setGoogleStep("welcome");
      fire("ğŸ‰ Â¡Bienvenido a Club Turkaj! +"+totalPts+" pts de registro");
      logActivity(nc.id,'registro','Registro vÃ­a Google OAuth con '+totalPts+' pts',totalPts);
    };
    return React.createElement("div", {style:{padding:"40px 24px 120px",position:"relative",zIndex:1}}, React.createElement("button", {onClick:function(){setGoogleStep("welcome")}, style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:4,color:"#9E9E9E",fontFamily:"'DM Sans'",fontSize:14,fontWeight:600,marginBottom:20}}, React.createElement(IC.Back, null), "AtrÃ¡s"), React.createElement("div", {style:{textAlign:"center",marginBottom:24}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ“"), React.createElement("div", {style:{fontSize:22,fontWeight:900,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Completa tu Perfil"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:4}}, "Gana +", cfg.regBase, " pts base Â· +", cfg.regOptional, " pts por cada dato opcional")), authError&&React.createElement("div", {style:{background:"#FFEBEE",color:"#C62828",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:12,marginBottom:20}}, fields.map(function(f){var isDark=cTier.name==="BLACK";var fieldBg=isDark?"rgba(255,255,255,.06)":"#FAFAFA";var fieldBorder=isDark?"rgba(255,255,255,.15)":"#E0E0E0";var fieldColor=isDark?"#fff":"#0D0D0D";var baseStyle=Object.assign({},iS,{paddingLeft:42,background:fieldBg,border:"1.5px solid "+fieldBorder,color:fieldColor});return React.createElement("div", {key:f.k, style:{position:"relative"}}, React.createElement("div", {style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",fontSize:16,zIndex:1}}, f.icon), f.type==="date"?React.createElement(React.Fragment, null, React.createElement("input", {type:"date", value:regProfile[f.k]||"", max:maxBday, min:"1930-01-01", onFocus:function(){if(!regProfile[f.k]){setRegProfile(function(p){var n=Object.assign({},p);n[f.k]="2000-01-01";return n})}}, onChange:function(e){setRegProfile(function(p){var n=Object.assign({},p);n[f.k]=e.target.value;return n});clearAuthErr()}, style:Object.assign({},baseStyle,{color:regProfile[f.k]?fieldColor:"transparent"})}), !regProfile[f.k]&&React.createElement("div", {style:{position:"absolute",left:42,top:"50%",transform:"translateY(-50%)",fontSize:14,color:"#9E9E9E",pointerEvents:"none",fontFamily:"'DM Sans'",fontWeight:600}}, f.l), regProfile[f.k]&&React.createElement("div", {style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:800,color:"#4CAF50",background:"#E8F5E9",padding:"2px 8px",borderRadius:8}}, "+", cfg.regOptional, "pts")):React.createElement(React.Fragment, null, React.createElement("input", {placeholder:f.l, type:f.type||"text", inputMode:f.numOnly?"numeric":undefined, maxLength:f.maxLen||undefined, value:regProfile[f.k]||"", onChange:function(e){var v=e.target.value;if(f.numOnly)v=v.replace(/\D/g,"");if(f.maxLen&&v.length>f.maxLen)v=v.slice(0,f.maxLen);setRegProfile(function(p){var n=Object.assign({},p);n[f.k]=v;return n});clearAuthErr()}, style:baseStyle}), !f.noBonus&&regProfile[f.k]&&regProfile[f.k].trim()&&React.createElement("div", {style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:800,color:"#4CAF50",background:"#E8F5E9",padding:"2px 8px",borderRadius:8}}, "+", cfg.regOptional, "pts")))})), React.createElement("div", {style:{background:"#FFF8E1",borderRadius:14,padding:16,marginBottom:20,textAlign:"center"}}, React.createElement("div", {style:{fontSize:13,fontWeight:600,color:"#9E9E9E"}}, "Puntos al registrarte"), React.createElement("div", {style:{fontSize:28,fontWeight:900,color:"#F0A500"}}, cfg.regBase+bonusPts), React.createElement("div", {style:{fontSize:11,color:"#9E9E9E"}}, "Base: ", cfg.regBase, " + Datos opcionales: ", bonusPts)), React.createElement("button", {onClick:doFinishGoogle, style:{...bS,background:"#FBBC04",color:"#0D0D0D",width:"100%"}}, "ğŸ‰ Unirme a Club Turkaj"));
  };

  // ===== OPERATOR LOGIN =====
  const renderOperatorLogin=function(){
    const doLogin=function(){
      clearAuthErr();
      if(!opLoginGafete||!opLoginDpi||!opLoginUser||!opLoginPass){setAuthError("Completa todos los campos");return}
      const found=operators.find(function(o){return o.gafete===opLoginGafete&&o.dpi===opLoginDpi&&o.user===opLoginUser&&o.password===opLoginPass});
      if(!found){setAuthError("Credenciales incorrectas");return}
      if(!found.active){setAuthError("Operador inactivo, contacta a gerencia");return}
      setAuthOp("logged");fire("ğŸ‘‹ Bienvenido "+found.name);
    };
    return React.createElement("div", {style:{padding:"40px 24px 120px"}}, React.createElement("div", {style:{textAlign:"center",marginBottom:32}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "â›½"), React.createElement("div", {style:{fontSize:22,fontWeight:900,color:"#333"}}, "Operador"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:4}}, "Ingresa tus credenciales")), authError&&React.createElement("div", {style:{background:"#FFEBEE",color:"#C62828",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24}}, React.createElement("input", {placeholder:"NÃºmero de gafete", value:opLoginGafete, onChange:function(e){setOpLoginGafete(e.target.value);clearAuthErr()}, style:iS}), React.createElement("input", {placeholder:"DPI", value:opLoginDpi, onChange:function(e){setOpLoginDpi(e.target.value);clearAuthErr()}, style:iS}), React.createElement("input", {placeholder:"Usuario", value:opLoginUser, onChange:function(e){setOpLoginUser(e.target.value);clearAuthErr()}, style:iS}), React.createElement("input", {placeholder:"ContraseÃ±a", type:"password", value:opLoginPass, onChange:function(e){setOpLoginPass(e.target.value);clearAuthErr()}, style:iS}), React.createElement("button", {onClick:doLogin, style:{...bS,background:"#FBBC04",color:"#0D0D0D"}}, "Iniciar SesiÃ³n")), React.createElement("div", {style:{textAlign:"center",fontSize:12,color:"#BDBDBD"}}, "Gafete otorgado por gerencia"));
  };

  // ===== ADMIN LOGIN =====
  const renderAdminLogin=function(){
    const doLogin=function(){
      clearAuthErr();
      if(!adLoginDpi||!adLoginGafete||!adLoginEmail||!adLoginPass){setAuthError("Completa todos los campos");return}
      if(adLoginDpi===ADMIN_CRED.dpi&&adLoginGafete===ADMIN_CRED.gafete&&adLoginEmail===ADMIN_CRED.email&&adLoginPass===ADMIN_CRED.password){
        setAuthAdmin("logged");fire("ğŸ”§ SesiÃ³n de administrador");
      }else{setAuthError("Credenciales incorrectas")}
    };
    return React.createElement("div", {style:{padding:"40px 24px 120px",background:"#1E1E1E",minHeight:"80vh"}}, React.createElement("div", {style:{textAlign:"center",marginBottom:32}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ”§"), React.createElement("div", {style:{fontSize:22,fontWeight:900,color:"#FBBC04"}}, "Administrador"), React.createElement("div", {style:{fontSize:13,color:"#777",marginTop:4}}, "Acceso restringido")), authError&&React.createElement("div", {style:{background:"rgba(198,40,40,.15)",color:"#EF9A9A",padding:"10px 14px",borderRadius:12,fontSize:12,fontWeight:700,marginBottom:16,textAlign:"center"}}, authError), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24}}, React.createElement("input", {placeholder:"DPI", value:adLoginDpi, onChange:function(e){setAdLoginDpi(e.target.value);clearAuthErr()}, style:iSd}), React.createElement("input", {placeholder:"NÃºmero de gafete", value:adLoginGafete, onChange:function(e){setAdLoginGafete(e.target.value);clearAuthErr()}, style:iSd}), React.createElement("input", {placeholder:"Correo electrÃ³nico", value:adLoginEmail, onChange:function(e){setAdLoginEmail(e.target.value);clearAuthErr()}, style:iSd}), React.createElement("input", {placeholder:"ContraseÃ±a", type:"password", value:adLoginPass, onChange:function(e){setAdLoginPass(e.target.value);clearAuthErr()}, style:iSd}), React.createElement("button", {onClick:doLogin, style:{...bS,background:"#FBBC04",color:"#0D0D0D"}}, "Iniciar SesiÃ³n")));
  };

  // ===== OPERATOR MANAGEMENT (Admin) =====
  const renderOpManagement=function(){
    const stns=["Turkaj I","Turkaj II","Turkaj III"];
    const turnos=["Matutino","Vespertino","Nocturno"];
    const saveOp=function(){
      if(!newOp.name||!newOp.user||!newOp.password||!newOp.dpi||!newOp.gafete){fire("âŒ Campos obligatorios incompletos");return}
      if(editOp){
        setOperators(function(p){return p.map(function(o){return o.id===editOp.id?Object.assign({},o,newOp):o})});
        fire("âœ… Operador actualizado");
      }else{
        var nid="OP-"+String(operators.length+1).padStart(3,"0");
        setOperators(function(p){return [...p,Object.assign({id:nid,registered:new Date().toISOString().split("T")[0],active:true},newOp)]});
        fire("âœ… Operador registrado");
      }
      setNewOp({name:"",user:"",password:"",dpi:"",gafete:"",phone:"",station:"Turkaj I",bomba:"",turno:"Matutino",email:""});
      setEditOp(null);setShowOpReg(false);
    };
    return React.createElement("div", {style:{padding:"12px 0 120px"}}, React.createElement("button", {onClick:function(){setScr("dash")}, style:{background:"none",border:"none",color:"#9E9E9E",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontFamily:"'DM Sans'",fontSize:14,fontWeight:600,padding:"0 20px 12px"}}, React.createElement(IC.Back, null), "Inicio"), React.createElement("div", {style:{padding:"0 20px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"}}, React.createElement("div", null, React.createElement("div", {style:{fontSize:22,fontWeight:900,color:"#FBBC04"}}, "Operadores"), React.createElement("div", {style:{fontSize:12,color:"#777"}}, operators.length, " registrados")), React.createElement("button", {onClick:function(){setShowOpReg(true);setEditOp(null);setNewOp({name:"",user:"",password:"",dpi:"",gafete:"",phone:"",station:"Turkaj I",bomba:"",turno:"Matutino",email:""})}, style:{background:"#FBBC04",border:"none",borderRadius:12,padding:"10px 16px",fontFamily:"'DM Sans'",fontSize:12,fontWeight:800,color:"#0D0D0D",cursor:"pointer",display:"flex",alignItems:"center",gap:6}}, React.createElement(IC.Plus, null), "Nuevo")), operators.map(function(op){return React.createElement("div", {key:op.id, style:{margin:"0 20px 10px",background:adminCard,borderRadius:16,border:"1px solid "+adminBorder,padding:16}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}, React.createElement("div", null, React.createElement("div", {style:{fontSize:15,fontWeight:800,color:"#fff"}}, op.name), React.createElement("div", {style:{fontSize:12,color:"#777",marginTop:2}}, "@", op.user, " Â· ", op.gafete)), React.createElement("div", {style:{display:"flex",gap:6}}, React.createElement("button", {onClick:function(){setEditOp(op);setNewOp({name:op.name,user:op.user,password:op.password,dpi:op.dpi,gafete:op.gafete,phone:op.phone,station:op.station,bomba:op.bomba,turno:op.turno,email:op.email||""});setShowOpReg(true)}, style:{background:"rgba(251,188,4,.15)",border:"none",borderRadius:8,padding:"6px 10px",fontSize:11,fontWeight:700,color:"#FBBC04",cursor:"pointer",fontFamily:"'DM Sans'"}}, "Editar"), React.createElement("button", {onClick:function(){setOperators(function(p){return p.map(function(o){return o.id===op.id?Object.assign({},o,{active:!o.active}):o})})}, style:{background:op.active?"rgba(76,175,80,.15)":"rgba(198,40,40,.15)",border:"none",borderRadius:8,padding:"6px 10px",fontSize:11,fontWeight:700,color:op.active?"#4CAF50":"#EF9A9A",cursor:"pointer",fontFamily:"'DM Sans'"}}, op.active?"Activo":"Inactivo"))), React.createElement("div", {style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:10}}, React.createElement("span", {style:{background:"rgba(255,255,255,.06)",padding:"4px 10px",borderRadius:8,fontSize:11,color:"#aaa"}}, op.station), React.createElement("span", {style:{background:"rgba(255,255,255,.06)",padding:"4px 10px",borderRadius:8,fontSize:11,color:"#aaa"}}, "Bomba ", op.bomba), React.createElement("span", {style:{background:"rgba(255,255,255,.06)",padding:"4px 10px",borderRadius:8,fontSize:11,color:"#aaa"}}, op.turno), React.createElement("span", {style:{background:"rgba(255,255,255,.06)",padding:"4px 10px",borderRadius:8,fontSize:11,color:"#aaa"}}, op.phone)), (function(){var rats=opRatings[op.id]||[];if(!rats.length)return React.createElement("div", {style:{marginTop:10,fontSize:11,color:"#555",fontStyle:"italic"}}, "Sin calificaciones aÃºn");var avg=(rats.reduce(function(s,r){return s+r.stars},0)/rats.length).toFixed(1);return React.createElement("div", {style:{marginTop:10,display:"flex",alignItems:"center",gap:10}}, React.createElement("div", {style:{display:"flex",gap:2}}, [1,2,3,4,5].map(function(s){return React.createElement("span", {key:s, style:{fontSize:14,filter:s<=Math.round(avg)?"none":"grayscale(1) opacity(0.2)"}}, "â­")})), React.createElement("span", {style:{fontSize:13,fontWeight:800,color:avg>=4?"#4CAF50":avg>=3?"#FF9800":"#F44336"}}, avg), React.createElement("span", {style:{fontSize:11,color:"#777"}}, "(", rats.length, " calificaciones)"))})())}), showOpReg&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.7)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",padding:20}, onClick:function(){setShowOpReg(false)}}, React.createElement("div", {style:{background:"#2A2A2A",borderRadius:24,maxWidth:400,width:"100%",padding:24,maxHeight:"85vh",overflowY:"auto",border:"1px solid #3A3A3A"}, onClick:function(e){e.stopPropagation()}}, React.createElement("div", {style:{fontSize:18,fontWeight:900,color:"#FBBC04",marginBottom:16}}, editOp?"Editar":"Registrar", " Operador"), React.createElement("div", {style:{display:"flex",flexDirection:"column",gap:10}}, React.createElement("input", {placeholder:"Nombre completo *", value:newOp.name, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{name:e.target.value})})}, style:iSd}), React.createElement("input", {placeholder:"Usuario *", value:newOp.user, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{user:e.target.value})})}, style:iSd}), React.createElement("input", {placeholder:"ContraseÃ±a *", value:newOp.password, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{password:e.target.value})})}, style:iSd}), React.createElement("input", {placeholder:"DPI *", value:newOp.dpi, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{dpi:e.target.value})})}, style:iSd}), React.createElement("input", {placeholder:"NÃºmero de gafete *", value:newOp.gafete, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{gafete:e.target.value})})}, style:iSd}), React.createElement("input", {placeholder:"TelÃ©fono", value:newOp.phone, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{phone:e.target.value})})}, style:iSd}), React.createElement("input", {placeholder:"Correo electrÃ³nico", value:newOp.email, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{email:e.target.value})})}, style:iSd}), React.createElement("div", {style:{display:"flex",gap:8}}, React.createElement("select", {value:newOp.station, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{station:e.target.value})})}, style:{...iSd,flex:1}}, stns.map(function(s){return React.createElement("option", {key:s, value:s}, s)})), React.createElement("input", {placeholder:"Bomba", value:newOp.bomba, onChange:function(e){setNewOp(function(p){return Object.assign({},p,{bomba:e.target.value})})}, style:{...iSd,width:70}})), React.createElement("div", {style:{display:"flex",gap:8}}, turnos.map(function(t){return React.createElement("button", {key:t, onClick:function(){setNewOp(function(p){return Object.assign({},p,{turno:t})})}, style:{flex:1,padding:"10px 8px",borderRadius:10,border:newOp.turno===t?"2px solid #FBBC04":"2px solid #3A3A3A",background:newOp.turno===t?"rgba(251,188,4,.15)":"#2A2A2A",color:newOp.turno===t?"#FBBC04":"#777",fontSize:11,fontWeight:700,cursor:"pointer",fontFamily:"'DM Sans'"}}, t)}))), React.createElement("div", {style:{display:"flex",gap:10,marginTop:20}}, React.createElement("button", {onClick:function(){setShowOpReg(false)}, style:{...bS,flex:1,background:"#3A3A3A",color:"#9E9E9E"}}, "Cancelar"), React.createElement("button", {onClick:saveOp, style:{...bS,flex:1,background:"#FBBC04",color:"#0D0D0D"}}, editOp?"Guardar":"Registrar")))));
  };

  // ===== NAV =====
  const aN=[{id:"dash",l:"Inicio",i:React.createElement(IC.Fuel, null)},{id:"mem",l:"Miembros",i:React.createElement(IC.Users, null)},{id:"ops",l:"Operadores",i:React.createElement(IC.Gear, null)},{id:"cat",l:"Premios",i:React.createElement(IC.Gift, null)},{id:"raf",l:"Rifa",i:React.createElement(IC.Ticket, null)}];
  const oN=[{id:"ohome",l:"Inicio",i:React.createElement(IC.Fuel, null)},{id:"oclients",l:"Clientes",i:React.createElement(IC.Users, null)},{id:"oredeem",l:"Premios",i:React.createElement(IC.Gift, null)},{id:"oraffle",l:"Rifa",i:React.createElement(IC.Ticket, null)}];
  const cN=[{id:"home",l:"Inicio",i:React.createElement(IC.Fuel, null)},{id:"cat",l:"Canjear",i:React.createElement(IC.Gift, null)},{id:"raf",l:"Rifa",i:React.createElement(IC.Ticket, null)},{id:"rules",l:"Reglas",i:React.createElement(IC.Clock, null)}];
  const renderScreen=function(){
    // Auth gates
    if(isC&&authScreen!=="logged"){
      if(authScreen==="register"||authScreen==="verify")return renderClientRegister();
      if(authScreen==="profile")return renderClientProfile();
      if(authScreen==="googleProfile")return renderGoogleProfile();
      return renderClientLogin();
    }
    if(isO&&authOp!=="logged")return renderOperatorLogin();
    if(isA&&authAdmin!=="logged")return renderAdminLogin();
    // Normal screens
    if(isA){if(scr==="mem")return React.createElement(Members, null);if(scr==="det")return React.createElement(Detail, null);if(scr==="rules")return React.createElement(Rules, null);if(scr==="cat")return React.createElement(Catalog, {client:false});if(scr==="raf")return React.createElement(AdminRaffle, null);if(scr==="cfg")return React.createElement(Settings, null);if(scr==="ops")return renderOpManagement();return React.createElement(Dash, null)}
    if(isO){if(oScr==="oclients")return OpClients();if(oScr==="odet")return OpDetail();if(oScr==="oredeem")return OpRedeem();if(oScr==="oraffle")return OpRaffle();return OpHome()}
    if(cScr==="cat")return React.createElement(Catalog, {client:true});if(cScr==="raf")return React.createElement(ClientRaffle, null);if(cScr==="rules")return React.createElement(Rules, null);return React.createElement(CHome, null);
  };
  const cur=view==="admin"?scr:view==="operator"?oScr:cScr;
  const nav=view==="admin"?aN:view==="operator"?oN:cN;

  const adminBg="#1E1E1E";
  const adminCard="#2A2A2A";
  const adminBorder="#3A3A3A";
  const adminTxt="#E0E0E0";
  const adminSub="#9E9E9E";
  const isA=view==="admin";
  const isO=view==="operator";
  const isC=view==="client";
  const isLoggedIn=(isC&&authScreen==="logged")||(isO&&authOp==="logged")||(isA&&authAdmin==="logged");

  return React.createElement(React.Fragment, null, React.createElement("style", null, css), React.createElement("div", {style:{maxWidth:480,margin:"0 auto",minHeight:"100vh",background:isA?adminBg:isO?"#FAFAFA":cTier.name==="BLACK"?"#06060C":cTier.name==="PLATINO"?"#E8E8E8":"#fff",position:"relative",overflowX:"hidden",boxShadow:"0 0 60px rgba(0,0,0,.08)"}}, isC&&cTier.name==="BLACK"&&authScreen==="logged"&&React.createElement("div", {style:{position:"fixed",top:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:480,height:"100vh",pointerEvents:"none",zIndex:0,overflow:"hidden"}}, React.createElement("div", {style:{position:"absolute",inset:0,background:"radial-gradient(ellipse at 15% 20%, rgba(40,20,80,.35) 0%, transparent 50%), radial-gradient(ellipse at 80% 15%, rgba(20,30,70,.25) 0%, transparent 45%), radial-gradient(ellipse at 50% 70%, rgba(50,15,60,.2) 0%, transparent 55%), radial-gradient(ellipse at 85% 80%, rgba(15,25,60,.2) 0%, transparent 40%)"}}), React.createElement("div", {style:{position:"absolute",inset:0,background:"radial-gradient(ellipse at 30% 45%, rgba(60,30,90,.12) 0%, transparent 40%), radial-gradient(ellipse at 70% 30%, rgba(30,50,100,.1) 0%, transparent 35%)"}}), [...Array(60)].map((_,i)=>React.createElement("div", {key:"s"+i, style:{position:"absolute",width:i%7===0?2:i%4===0?1.3:0.6,height:i%7===0?2:i%4===0?1.3:0.6,borderRadius:"50%",background:i%11===0?"rgba(180,200,255,.9)":i%7===0?"rgba(255,230,200,.8)":i%4===0?"rgba(200,210,255,.6)":`rgba(255,255,255,${i%3===0?.5:.25})`,left:`${(i*17.3+5.7)%100}%`,top:`${(i*23.7+3.1)%100}%`,boxShadow:i%7===0?"0 0 3px rgba(180,200,255,.5)":i%11===0?"0 0 2px rgba(255,230,200,.4)":"none",animation:i%5===0?`twinkle ${3+i%4}s ${i*.3}s ease-in-out infinite`:"none"}}))), React.createElement("div", {style:{display:"flex",background:isA?"#2A2A2A":isO?"#FFF8E1":cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"#D6D6D6":"#F5F5F5",borderRadius:14,padding:4,margin:"12px 20px",border:isA?"1px solid #3A3A3A":isO?"1px solid #FBBC04":cTier.name==="BLACK"?"1px solid rgba(255,255,255,.08)":cTier.name==="PLATINO"?"1px solid #BDBDBD":"1px solid #eee"}}, [{k:"admin",l:"ğŸ”§ Admin"},{k:"operator",l:"â›½ Operador"},{k:"client",l:"ğŸ“± Miembro"}].map(v=>
          React.createElement("button", {key:v.k, onClick:()=>{setView(v.k);setAuthError("");if(v.k==="admin")setScr("dash");else if(v.k==="operator")setOScr("ohome");else setCScr("home")}, style:{flex:1,padding:10,background:view===v.k?(v.k==="admin"?"#FBBC04":v.k==="operator"?"#FBBC04":TH.btnBg):"none",border:"none",borderRadius:11,color:view===v.k?(v.k==="admin"?"#0D0D0D":v.k==="operator"?"#0D0D0D":TH.btnTxt):(isA?"#777":isO?"#9E9E9E":cTier.name==="BLACK"?"#aaa":"#9E9E9E"),fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer",position:"relative",overflow:"hidden"}}, view===v.k&&v.k==="client"&&cTier.name==="BLACK"&&authScreen==="logged"&&React.createElement("span", {style:{position:"absolute",inset:0,background:GAL,borderRadius:11,zIndex:0}}), React.createElement("span", {style:{position:"relative",zIndex:1}}, v.l))
        )), renderScreen(), isLoggedIn&&React.createElement("div", {style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:480,background:isA?adminBg:isO?"#fff":cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"#DADADA":"#fff",borderTop:`1px solid ${isA?adminBorder:isO?"#eee":cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,display:"flex",justifyContent:"space-around",padding:"6px 0 10px",zIndex:100,overflow:"hidden"}}, nav.map(n=>React.createElement("button", {key:n.id, onClick:()=>{if(isA){setScr(n.id);setSel(null)}else if(isO){setOScr(n.id);setOSel(null)}else setCScr(n.id)}, style:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,padding:"6px 8px",background:"none",border:"none",color:cur===n.id?(isC?TH.accent:isO?"#F0A500":"#FBBC04"):(isA?"#666":isO?"#9E9E9E":cTier.name==="BLACK"?"#aaa":cTier.name==="PLATINO"?"#9E9E9E":"#9E9E9E"),cursor:"pointer",fontFamily:"'DM Sans'",fontSize:9,fontWeight:600,letterSpacing:.3,textTransform:"uppercase",position:"relative",zIndex:1}}, n.i, n.l))), renderModal(), showRating&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:1000,display:"flex",alignItems:"center",justifyContent:"center",padding:20}, onClick:function(){setShowRating(null)}}, React.createElement("div", {style:{background:cTier.name==="BLACK"?"#1a1a2e":"#fff",borderRadius:24,maxWidth:340,width:"100%",padding:"32px 24px",textAlign:"center",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":"none"}, onClick:function(e){e.stopPropagation()}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "â›½"), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Â¿CÃ³mo fue el servicio?"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginTop:4}}, "Califica a ", showRating.opName), React.createElement("div", {style:{display:"flex",justifyContent:"center",gap:12,margin:"24px 0"}}, [1,2,3,4,5].map(function(s){return React.createElement("div", {key:s, onClick:function(){
              setRatingStars(s);
              setOpRatings(function(p){
                var nr=Object.assign({},p);
                var arr=nr[showRating.opId]||[];
                nr[showRating.opId]=[...arr,{stars:s,custId:showRating.custId,date:new Date().toISOString().split("T")[0]}];
                return nr;
              });
              // Save rating to Supabase
              if(sb&&sbConnected){
                sb.from('operator_ratings').insert({operator_id:showRating.opId,member_id:showRating.custId,stars:s}).then(function(r){
                  if(r.error)console.error("[Rating]",r.error);
                });
              }
              fire((s===5?"Â¡Excelente!":s===4?"Muy bien":s===3?"Regular":s===2?"Puede mejorar":"Gracias")+" Â· "+s+"â­");
              setTimeout(function(){setShowRating(null);setRatingStars(0)},400);
            }, style:{fontSize:42,cursor:"pointer",transition:"all .15s",transform:s<=ratingStars?"scale(1.2)":"scale(1)",lineHeight:1,userSelect:"none"}}, s<=ratingStars?"â­":"â˜†")})), React.createElement("button", {onClick:function(){setShowRating(null)}, style:{padding:"10px 24px",borderRadius:12,border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":"1px solid #eee",background:"none",fontFamily:"'DM Sans'",fontSize:12,fontWeight:600,color:"#9E9E9E",cursor:"pointer"}}, "Omitir"))), redeemConfirm&&(()=>{
        const r=redeemConfirm;
        const t=gT(me.gallons);
        const cs=CAT_S[r.cat]||{bg:"#F5F5F5",c:"#616161"};
        const cost=Math.round(r.pts*(1-t.redeemDisc));
        const hasDisc=t.redeemDisc>0;
        return React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn .2s",padding:20}, onClick:()=>setRedeemConfirm(null)}, React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"linear-gradient(135deg,#D0D0D0,#E0E0E0,#D0D0D0)":"#fff",borderRadius:24,maxWidth:360,width:"100%",padding:"28px 24px",animation:"pop .3s ease",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":cTier.name==="PLATINO"?"1px solid #BDBDBD":"none",position:"relative",overflow:"hidden"}, onClick:e=>e.stopPropagation()}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:20}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{textAlign:"center",marginBottom:20}}, React.createElement("div", {style:{width:72,height:72,borderRadius:20,background:cs.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:36,margin:"0 auto 14px"}}, r.icon), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, r.name), React.createElement("span", {style:{display:"inline-block",padding:"3px 10px",borderRadius:8,fontSize:10,fontWeight:800,letterSpacing:.8,textTransform:"uppercase",marginTop:8,background:cs.bg,color:cs.c}}, CAT_L[r.cat]||r.cat)), React.createElement("div", {style:{background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"rgba(255,255,255,.4)":"#F5F5F5",borderRadius:16,padding:16,marginBottom:20}}, React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:hasDisc?10:0}}, React.createElement("span", {style:{fontSize:13,fontWeight:700,color:cTier.name==="BLACK"?"#ccc":"#757575"}}, "Costo"), React.createElement("span", {style:{...sMono,fontSize:20,fontWeight:800,color:cTier.name==="BLACK"?"#FBBC04":cTier.name==="PLATINO"?"#1565C0":"#F0A500"}}, cost, "pts")), hasDisc&&React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:10,borderTop:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`}}, React.createElement("span", {style:{fontSize:12,color:cTier.name==="BLACK"?"#aaa":"#9E9E9E"}}, "Precio original"), React.createElement("span", {style:{fontSize:13,textDecoration:"line-through",color:cTier.name==="BLACK"?"#999":"#BDBDBD"}}, r.pts, "pts")), React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`}}, React.createElement("span", {style:{fontSize:12,color:cTier.name==="BLACK"?"#aaa":"#9E9E9E"}}, "Tu saldo"), React.createElement("span", {style:{...sMono,fontSize:13,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, me.points, "pts")), React.createElement("div", {style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10,paddingTop:10,borderTop:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`}}, React.createElement("span", {style:{fontSize:12,color:cTier.name==="BLACK"?"#aaa":"#9E9E9E"}}, "Saldo despuÃ©s"), React.createElement("span", {style:{...sMono,fontSize:13,fontWeight:800,color:cTier.name==="BLACK"?"#81C784":"#2E7D32"}}, me.points-cost, "pts"))), React.createElement("div", {style:{fontSize:14,fontWeight:700,textAlign:"center",color:cTier.name==="BLACK"?"#fff":"#0D0D0D",marginBottom:16}}, "Â¿DeseÃ¡s canjear este premio?"), React.createElement("div", {style:{display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setRedeemConfirm(null), style:{flex:1,padding:14,borderRadius:14,border:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.1)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"rgba(255,255,255,.4)":"#F5F5F5",fontFamily:"'DM Sans'",fontSize:14,fontWeight:700,cursor:"pointer",color:cTier.name==="BLACK"?"#ccc":"#757575"}}, "Cancelar"), React.createElement("button", {onClick:()=>{redeem(redeemConfirm);setRedeemConfirm(null)}, style:{flex:1,padding:14,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#0D0D0D"}}, "Confirmar")))));
      })(), showCardSwap&&(()=>{const c=showCardSwap;const t=gT(c.gallons);const curCard=getCard(c.id);const targetTier=t.name;
        const doSwapScan=()=>{
          setSwapScan("scanning");
          const avail=cards.filter(cd=>cd.status==="available"&&cd.tier===targetTier);
          if(avail.length>0){
            const pick=avail[Math.floor(Math.random()*avail.length)];
            setTimeout(()=>setSwapScan({id:pick.id,tier:pick.tier}),1500);
          } else { setTimeout(()=>setSwapScan("nocard"),1500); }
        };
        return React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",padding:20}, onClick:()=>{setShowCardSwap(null);setSwapScan(null)}}, React.createElement("div", {style:{background:"#fff",borderRadius:24,maxWidth:400,width:"100%",padding:"28px 24px",maxHeight:"85vh",overflowY:"auto"}, onClick:e=>e.stopPropagation()}, React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:4}}, "ğŸ”„ Cambiar Tarjeta"), React.createElement("div", {style:{fontSize:13,color:"#9E9E9E",marginBottom:16}}, c.name, "Â·", React.createElement(Badge, {t:t})), curCard&&React.createElement("div", {style:{background:"#F5F5F5",borderRadius:14,padding:14,marginBottom:16,border:"1px solid #eee"}}, React.createElement("div", {style:{fontSize:10,fontWeight:800,color:"#9E9E9E",textTransform:"uppercase",letterSpacing:1,marginBottom:4}}, "Tarjeta actual (se desactivarÃ¡)"), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:10}}, React.createElement("div", {style:{...sMono,fontSize:15,fontWeight:800,color:"#424242"}}, curCard.id), React.createElement("span", {style:{fontSize:11,padding:"2px 8px",borderRadius:6,background:curCard.tier==="BLACK"?"#212121":curCard.tier==="PLATINO"?"#E0E0E0":"#FFF8E1",color:curCard.tier==="BLACK"?"#fff":curCard.tier==="PLATINO"?"#616161":"#F0A500",fontWeight:700}}, curCard.tier))), React.createElement("div", {style:{fontSize:12,fontWeight:800,color:"#424242",marginBottom:12}}, "Escanear nueva tarjeta ", React.createElement("strong", null, targetTier)), !swapScan&&React.createElement("button", {onClick:doSwapScan, style:{width:"100%",padding:"18px",borderRadius:14,border:"2px dashed #FBBC04",background:"#FFF8E1",fontFamily:"'DM Sans'",fontSize:15,fontWeight:800,cursor:"pointer",color:"#F0A500",display:"flex",alignItems:"center",justifyContent:"center",gap:10}}, "ğŸ“· Escanear QR de Nueva Tarjeta"), swapScan==="scanning"&&React.createElement("div", {style:{textAlign:"center",padding:24,background:"#FFF8E1",borderRadius:14,border:"2px solid #FBBC04"}}, React.createElement("div", {style:{fontSize:36,marginBottom:8,animation:"pulse 1s infinite"}}, "ğŸ“·"), React.createElement("div", {style:{fontSize:14,fontWeight:700,color:"#F0A500"}}, "Escaneando tarjeta", targetTier, "..."), React.createElement("div", {style:{marginTop:12,height:4,borderRadius:2,background:"#eee",overflow:"hidden"}}, React.createElement("div", {style:{height:"100%",background:"#FBBC04",borderRadius:2,animation:"scanBar 1.5s ease forwards"}}))), swapScan==="nocard"&&React.createElement("div", {style:{padding:16,background:"#FFEBEE",borderRadius:14,textAlign:"center",border:"1px solid #EF9A9A"}}, React.createElement("div", {style:{fontSize:13,fontWeight:700,color:"#C62828",marginBottom:8}}, "âš ï¸ No se reconociÃ³ la tarjeta o no hay disponibles"), React.createElement("button", {onClick:()=>setSwapScan(null), style:{padding:"8px 16px",borderRadius:10,border:"1px solid #eee",background:"#fff",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,cursor:"pointer",color:"#757575"}}, "Reintentar")), swapScan&&swapScan.id&&React.createElement(React.Fragment, null, React.createElement("div", {style:{padding:16,background:"#E8F5E9",borderRadius:14,border:"2px solid #2E7D32",marginBottom:16}}, React.createElement("div", {style:{fontSize:12,fontWeight:800,color:"#2E7D32",marginBottom:4}}, "âœ… Tarjeta escaneada"), React.createElement("div", {style:{...sMono,fontSize:18,fontWeight:800,color:"#0D0D0D"}}, swapScan.id), React.createElement("div", {style:{fontSize:11,color:"#2E7D32",marginTop:2}}, "Tarjeta ", swapScan.tier, " Â· Disponible")), React.createElement("div", {style:{fontSize:12,color:"#757575",marginBottom:16,padding:"12px 14px",background:"#F5F5F5",borderRadius:12,lineHeight:1.6}}, "La tarjeta anterior ", React.createElement("strong", null, curCard?.id), " se desactivarÃ¡. PodÃ©s reciclarla para un nuevo cliente o destruirla."), React.createElement("div", {style:{display:"flex",gap:10}}, React.createElement("button", {onClick:()=>setSwapScan(null), style:{flex:1,padding:14,borderRadius:14,border:"1px solid #eee",background:"#F5F5F5",fontFamily:"'DM Sans'",fontSize:13,fontWeight:700,cursor:"pointer",color:"#757575"}}, "Cancelar"), React.createElement("button", {onClick:()=>{swapCard(c.id,swapScan.id);setShowCardSwap(null);setSwapScan(null);setToast("ğŸ’³ Tarjeta cambiada: "+swapScan.id)}, style:{flex:2,padding:14,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#0D0D0D"}}, "âœ“ Confirmar Cambio")))))})(), editReward&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.5)",backdropFilter:"blur(6px)",zIndex:200,display:"flex",alignItems:"flex-end",justifyContent:"center",animation:"fadeIn .2s"}, onClick:()=>setEditReward(null)}, React.createElement("div", {onClick:e=>e.stopPropagation(), style:{background:"#fff",borderRadius:"28px 28px 0 0",padding:"28px 24px 32px",maxWidth:480,width:"100%",maxHeight:"85vh",overflowY:"auto",animation:"fadeUp .3s"}}, React.createElement("div", {style:{width:40,height:4,background:"#E0E0E0",borderRadius:2,margin:"0 auto 20px"}}), React.createElement("div", {style:{fontSize:20,fontWeight:800,marginBottom:4}}, editReward.isNew?"Nuevo Premio":"Editar Premio"), React.createElement("div", {style:{fontSize:12,color:"#9E9E9E",marginBottom:20}}, "ConfigurÃ¡ el premio del catÃ¡logo"), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "Emoji / Icono"), React.createElement("div", {style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8}}, ["â›½","â˜•","ğŸ¥¤","ğŸš¿","ğŸ”‘","âš½","ğŸ‘•","ğŸ§´","ğŸ’","ğŸï¸","ğŸº","ğŸ¨","ğŸ”Š","ğŸ§","ğŸ“º","ğŸ®","ğŸ","ğŸŸï¸","ğŸ§¢","ğŸ’"].map(e=>
                React.createElement("button", {key:e, onClick:()=>setEditReward(p=>({...p,icon:e})), style:{width:40,height:40,borderRadius:10,border:`2px solid ${editReward.icon===e?"#FBBC04":"#eee"}`,background:editReward.icon===e?"#FFF8E1":"#fff",fontSize:20,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"}}, e)
              ))), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "Nombre del premio *"), React.createElement("input", {value:editReward.name, onChange:e=>setEditReward(p=>({...p,name:e.target.value})), placeholder:"Ej: Vale Q25 Combustible", style:sInput})), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "Puntos *"), React.createElement("input", {type:"number", value:editReward.pts, onChange:e=>setEditReward(p=>({...p,pts:+e.target.value||0})), placeholder:"100", style:sInput})), React.createElement("div", {style:{marginBottom:14}}, React.createElement("label", {style:sLbl}, "CategorÃ­a *"), React.createElement("div", {style:{display:"flex",gap:6,flexWrap:"wrap"}}, ["combustible","servicio","merch","cultural","shell","premium","apple"].map(c=>{
                const cs=CAT_S[c]||{bg:"#F5F5F5",c:"#616161"};
                return React.createElement("button", {key:c, onClick:()=>setEditReward(p=>({...p,cat:c})), style:{padding:"8px 14px",borderRadius:12,border:`2px solid ${editReward.cat===c?"#FBBC04":"#eee"}`,background:editReward.cat===c?cs.bg:"#fff",fontFamily:"'DM Sans'",fontSize:12,fontWeight:700,color:editReward.cat===c?cs.c:"#757575",cursor:"pointer"}}, CAT_L[c]||c);
              })), React.createElement("div", {style:{marginTop:10,display:"flex",gap:8,alignItems:"center"}}, React.createElement("input", {id:"newCatInput", placeholder:"Nueva categorÃ­a...", style:{...sInput,marginBottom:0,flex:1}}), React.createElement("button", {onClick:()=>{const v=document.getElementById("newCatInput").value.trim().toLowerCase();if(v){setEditReward(p=>({...p,cat:v}));if(!CAT_L[v]){CAT_L[v]=v.charAt(0).toUpperCase()+v.slice(1);CAT_S[v]={bg:"#E0F7FA",c:"#00695C"}}}}, style:{...sYBtn,padding:"10px 16px",fontSize:12,whiteSpace:"nowrap"}}, "+ Agregar"))), React.createElement("div", {style:{display:"flex",gap:10,marginTop:20}}, !editReward.isNew&&React.createElement("button", {onClick:()=>{setRewards(p=>p.filter(r=>r.id!==editReward.id));setEditReward(null);fire("ğŸ—‘ï¸ Premio eliminado")}, style:{padding:"14px 20px",borderRadius:14,border:"2px solid #FFCDD2",background:"#FFEBEE",fontFamily:"'DM Sans'",fontSize:14,fontWeight:700,cursor:"pointer",color:"#C62828"}}, "Eliminar"), React.createElement("button", {onClick:()=>setEditReward(null), style:{...sDBtn,flex:1}}, "Cancelar"), React.createElement("button", {onClick:()=>{
              if(!editReward.name||!editReward.pts)return fire("âš ï¸ CompletÃ¡ nombre y puntos");
              const {isNew,...data}=editReward;
              if(isNew){setRewards(p=>[...p,data])}
              else{setRewards(p=>p.map(r=>r.id===data.id?data:r))}
              setEditReward(null);
              fire(isNew?"âœ… Premio agregado":"âœ… Premio actualizado");
            }, style:{...sYBtn,flex:2}}, editReward.isNew?"Agregar":"Guardar")))), showWifi&&React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn .2s",padding:20}, onClick:()=>setShowWifi(false)}, React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"linear-gradient(135deg,#D0D0D0,#E0E0E0,#D0D0D0)":"#fff",borderRadius:24,maxWidth:340,width:"100%",padding:"28px 24px",animation:"pop .3s ease",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":cTier.name==="PLATINO"?"1px solid #BDBDBD":"none",position:"relative",overflow:"hidden"}, onClick:e=>e.stopPropagation()}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:20}), React.createElement("div", {style:{position:"relative",zIndex:1,textAlign:"center"}}, React.createElement("div", {style:{fontSize:48,marginBottom:8}}, "ğŸ“¶"), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "WiFi Club Turkaj"), React.createElement("div", {style:{fontSize:12,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E",marginTop:4,marginBottom:20}}, "Conectate gratis en cualquier estaciÃ³n"), React.createElement("div", {style:{background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"rgba(255,255,255,.4)":"#F5F5F5",borderRadius:16,padding:20,marginBottom:12}}, React.createElement("div", {style:{fontSize:11,fontWeight:700,color:cTier.name==="BLACK"?"#aaa":"#757575",textTransform:"uppercase",letterSpacing:2,marginBottom:10}}, "Red"), React.createElement("div", {style:{...sMono,fontSize:20,fontWeight:800,color:cTier.name==="BLACK"?"#64B5F6":"#1565C0",letterSpacing:2}}, "Club_Turkaj_WiFi")), React.createElement("div", {style:{background:cTier.name==="BLACK"?"rgba(255,255,255,.06)":cTier.name==="PLATINO"?"rgba(255,255,255,.4)":"#F5F5F5",borderRadius:16,padding:20,marginBottom:20}}, React.createElement("div", {style:{fontSize:11,fontWeight:700,color:cTier.name==="BLACK"?"#aaa":"#757575",textTransform:"uppercase",letterSpacing:2,marginBottom:10}}, "ContraseÃ±a"), React.createElement("div", {onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText("Turkaj2026!");fire("ğŸ“‹ ContraseÃ±a copiada")}, style:{...sMono,fontSize:24,fontWeight:800,color:cTier.name==="BLACK"?"#FBBC04":"#F0A500",letterSpacing:3,cursor:"pointer"}}, "Turkaj2026!"), React.createElement("div", {style:{fontSize:10,color:cTier.name==="BLACK"?"#999":"#BDBDBD",marginTop:6}}, "TocÃ¡ para copiar")), React.createElement("button", {onClick:()=>setShowWifi(false), style:{width:"100%",padding:14,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#0D0D0D"}}, "Cerrar")))), showMap&&(()=>{
        const stations=[
          {name:"Turkaj I",addr:"5a Calle, Chichicastenango",lat:14.9433,lng:-91.1119},
          {name:"Turkaj II",addr:"Carretera a Santa Cruz, Chichi",lat:14.9380,lng:-91.1050},
          {name:"Turkaj III",addr:"Salida a Los Encuentros, Chichi",lat:14.9500,lng:-91.1180},
        ];
        return React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn .2s",padding:20}, onClick:()=>setShowMap(false)}, React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"linear-gradient(135deg,#D0D0D0,#E0E0E0,#D0D0D0)":"#fff",borderRadius:24,maxWidth:380,width:"100%",padding:"28px 24px",animation:"pop .3s ease",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":cTier.name==="PLATINO"?"1px solid #BDBDBD":"none",position:"relative",overflow:"hidden"}, onClick:e=>e.stopPropagation()}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:20}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{textAlign:"center",marginBottom:20}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ“"), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Nuestras Estaciones"), React.createElement("div", {style:{fontSize:12,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E",marginTop:4}}, "Chichicastenango, QuichÃ©")), stations.map((s,i)=>React.createElement("div", {key:i, style:{marginBottom:10,background:cTier.name==="BLACK"?"rgba(255,255,255,.05)":cTier.name==="PLATINO"?"rgba(255,255,255,.3)":"#F5F5F5",borderRadius:16,padding:16,border:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`}}, React.createElement("div", {style:{fontWeight:800,fontSize:15,color:cTier.name==="BLACK"?"#fff":"#0D0D0D",marginBottom:4}}, "â›½", s.name), React.createElement("div", {style:{fontSize:12,color:cTier.name==="BLACK"?"#aaa":"#757575",marginBottom:12}}, s.addr), React.createElement("div", {style:{display:"flex",gap:8}}, React.createElement("a", {href:`https://www.google.com/maps/dir/?api=1&destination=${s.lat},${s.lng}`, target:"_blank", rel:"noopener noreferrer", style:{flex:1,padding:"10px 0",borderRadius:12,background:"#4285F4",color:"#fff",fontFamily:"'DM Sans'",fontSize:12,fontWeight:800,textDecoration:"none",textAlign:"center",display:"block"}}, "ğŸ“ Google Maps"), React.createElement("a", {href:`https://waze.com/ul?ll=${s.lat},${s.lng}&navigate=yes`, target:"_blank", rel:"noopener noreferrer", style:{flex:1,padding:"10px 0",borderRadius:12,background:"#33CCFF",color:"#fff",fontFamily:"'DM Sans'",fontSize:12,fontWeight:800,textDecoration:"none",textAlign:"center",display:"block"}}, "ğŸ—ºï¸ Waze")))), React.createElement("button", {onClick:()=>setShowMap(false), style:{width:"100%",marginTop:8,padding:14,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#0D0D0D"}}, "Cerrar"))));
      })(), showRedeemed&&(()=>{
        const QR=({code,color})=>{
          const s=code.split("").reduce((a,c)=>a+c.charCodeAt(0),0);
          const cells=[];
          for(let r=0;r<9;r++)for(let c=0;c<9;c++){
            const isFinder=(r<3&&c<3)||(r<3&&c>5)||(r>5&&c<3);
            const fill=isFinder||((s*(r*9+c+1)*7+r*13+c*17)%3!==0);
            if(fill)cells.push(React.createElement("rect", {key:`${r}-${c}`, x:c*10+5, y:r*10+5, width:8, height:8, rx:1.5, fill:color}));
          }
          return React.createElement("svg", {viewBox:"0 0 100 100", width:"100%", height:"100%"}, cells, React.createElement("rect", {x:0, y:0, width:100, height:100, fill:"none", stroke:color, strokeWidth:2, rx:8}));
        };
        return React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn .2s",padding:20}, onClick:()=>{setShowRedeemed(false);setExpandedRD(null)}}, React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"linear-gradient(135deg,#D0D0D0,#E0E0E0,#D0D0D0)":"#fff",borderRadius:24,maxWidth:380,width:"100%",padding:"24px 20px",animation:"pop .3s ease",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":cTier.name==="PLATINO"?"1px solid #BDBDBD":"none",position:"relative",overflow:"hidden",maxHeight:"85vh",overflowY:"auto"}, onClick:e=>e.stopPropagation()}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:20}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{textAlign:"center",marginBottom:20}}, React.createElement("div", {style:{fontSize:36,marginBottom:6}}, "ğŸ"), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Mis Canjes"), React.createElement("div", {style:{fontSize:12,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E",marginTop:4}}, "Premios canjeados Â· MostrÃ¡ el QR para cobrar")), redeemedList.length===0&&React.createElement("div", {style:{textAlign:"center",padding:30,opacity:.5}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ“¦"), React.createElement("div", {style:{fontSize:14,fontWeight:700,color:cTier.name==="BLACK"?"#aaa":undefined}}, "AÃºn no has canjeado premios")), redeemedList.map((rd,i)=>{
                const cs=CAT_S[rd.reward.cat]||{bg:"#F5F5F5",c:"#616161"};
                const isExp=expandedRD===rd.id;
                const qrColor=rd.collected?"#BDBDBD":"#2E7D32";
                return React.createElement("div", {key:rd.id, style:{marginBottom:8}}, React.createElement("div", {onClick:()=>setExpandedRD(isExp?null:rd.id), style:{display:"flex",alignItems:"center",gap:12,padding:"14px 16px",background:cTier.name==="BLACK"?"rgba(255,255,255,.05)":cTier.name==="PLATINO"?"rgba(255,255,255,.3)":"#F5F5F5",borderRadius:isExp?"16px 16px 0 0":16,cursor:"pointer",border:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,borderBottom:isExp?"none":undefined}}, React.createElement("div", {style:{width:40,height:40,borderRadius:12,background:cs.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,flexShrink:0}}, rd.reward.icon), React.createElement("div", {style:{flex:1,minWidth:0}}, React.createElement("div", {style:{fontWeight:700,fontSize:13,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, rd.reward.name), React.createElement("div", {style:{fontSize:11,color:cTier.name==="BLACK"?"#aaa":"#9E9E9E",marginTop:2}}, rd.date, "Â·", rd.cost, "pts")), React.createElement("div", {style:{display:"flex",alignItems:"center",gap:6,flexShrink:0}}, React.createElement("div", {style:{width:8,height:8,borderRadius:4,background:rd.collected?"#BDBDBD":"#2E7D32"}}), React.createElement("span", {style:{fontSize:10,fontWeight:700,color:rd.collected?(cTier.name==="BLACK"?"#999":"#BDBDBD"):(cTier.name==="BLACK"?"#81C784":"#2E7D32")}}, rd.collected?"Cobrado":"Pendiente"))), isExp&&React.createElement("div", {style:{padding:20,background:cTier.name==="BLACK"?"rgba(255,255,255,.03)":cTier.name==="PLATINO"?"rgba(255,255,255,.2)":"#FAFAFA",borderRadius:"0 0 16px 16px",border:`1px solid ${cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"#BDBDBD":"#eee"}`,borderTop:"none",animation:"bounce .5s ease",textAlign:"center"}}, React.createElement("div", {style:{width:140,height:140,margin:"0 auto 14px",padding:10,background:"#fff",borderRadius:16,border:`3px solid ${qrColor}`,boxShadow:`0 0 20px ${rd.collected?"rgba(0,0,0,.05)":"rgba(46,125,50,.15)"}`}}, React.createElement(QR, {code:rd.code, color:qrColor})), React.createElement("div", {style:{...sMono,fontSize:16,fontWeight:800,letterSpacing:3,color:cTier.name==="BLACK"?"#fff":"#0D0D0D",marginBottom:4}}, rd.code), React.createElement("div", {style:{fontSize:11,fontWeight:700,color:rd.collected?(cTier.name==="BLACK"?"#999":"#BDBDBD"):(cTier.name==="BLACK"?"#81C784":"#2E7D32"),display:"flex",alignItems:"center",justifyContent:"center",gap:6}}, React.createElement("div", {style:{width:8,height:8,borderRadius:4,background:rd.collected?"#BDBDBD":"#2E7D32"}}), rd.collected?"Ya fue cobrado":"MostrÃ¡ este QR para cobrar tu premio")));
              }), React.createElement("button", {onClick:()=>{setShowRedeemed(false);setExpandedRD(null)}, style:{width:"100%",marginTop:12,padding:14,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#0D0D0D"}}, "Cerrar"))));
      })(), toast&&React.createElement("div", {style:{position:"fixed",top:20,left:"50%",transform:"translateX(-50%)",background:"#0D0D0D",color:"#fff",padding:"14px 24px",borderRadius:14,fontWeight:700,fontSize:14,zIndex:300,animation:"fadeUp .3s",display:"flex",alignItems:"center",gap:8,boxShadow:"0 8px 32px rgba(0,0,0,.2)",maxWidth:"90%"}}, React.createElement(IC.Check, null), toast), sbConnected&&!sbLoading&&React.createElement("div", {style:{position:"fixed",bottom:8,right:8,background:"rgba(22,163,74,.9)",color:"#fff",padding:"4px 10px",borderRadius:20,fontSize:10,fontWeight:700,zIndex:200,display:"flex",alignItems:"center",gap:4}}, "â— Supabase"), sbLoading&&React.createElement("div", {style:{position:"fixed",bottom:8,right:8,background:"rgba(251,188,4,.9)",color:"#000",padding:"4px 10px",borderRadius:20,fontSize:10,fontWeight:700,zIndex:200}}, "â³ Cargando..."), showInvite&&(()=>{
        const myCode=me.id.replace("CT-","T");
        const refs=custs.filter(c=>c.referredBy===me.id);
        return React.createElement("div", {style:{position:"fixed",inset:0,background:"rgba(0,0,0,.6)",zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn .2s",padding:20}, onClick:()=>setShowInvite(false)}, React.createElement("div", {style:{background:cTier.name==="BLACK"?GAL:cTier.name==="PLATINO"?"linear-gradient(135deg,#D0D0D0,#E0E0E0,#D0D0D0)":"#fff",borderRadius:24,maxWidth:360,width:"100%",padding:"28px 24px",animation:"pop .3s ease",border:cTier.name==="BLACK"?"1px solid rgba(255,255,255,.1)":cTier.name==="PLATINO"?"1px solid #BDBDBD":"none",position:"relative",overflow:"hidden",maxHeight:"80vh",overflowY:"auto"}, onClick:e=>e.stopPropagation()}, cTier.name==="BLACK"&&React.createElement(GalaxyDust, {n:20}), React.createElement("div", {style:{position:"relative",zIndex:1}}, React.createElement("div", {style:{textAlign:"center",marginBottom:20}}, React.createElement("div", {style:{fontSize:40,marginBottom:8}}, "ğŸ‘¥"), React.createElement("div", {style:{fontSize:18,fontWeight:800,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, "Invitar Amigo"), React.createElement("div", {style:{fontSize:12,color:cTier.name==="BLACK"?"rgba(255,255,255,.5)":"#9E9E9E",marginTop:4}}, "Ambos ganan +", cfg.referralPts, "pts con la primera compra")), React.createElement("div", {style:{textAlign:"center",marginBottom:20}}, React.createElement("div", {style:{fontSize:11,fontWeight:700,color:cTier.name==="BLACK"?"#aaa":"#757575",textTransform:"uppercase",letterSpacing:2,marginBottom:8}}, "Este es mi cÃ³digo"), React.createElement("div", {onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(myCode);fire(`ğŸ“‹ CÃ³digo copiado: ${myCode}`)}, style:{display:"inline-flex",alignItems:"center",gap:10,background:cTier.name==="BLACK"?"rgba(255,255,255,.08)":cTier.name==="PLATINO"?"rgba(255,255,255,.4)":"#FFF8E1",border:`2px dashed ${cTier.name==="BLACK"?"rgba(255,255,255,.2)":cTier.name==="PLATINO"?"#BDBDBD":"#FBBC04"}`,borderRadius:16,padding:"14px 28px",cursor:"pointer"}}, React.createElement("span", {style:{...sMono,fontSize:28,fontWeight:800,letterSpacing:4,color:cTier.name==="BLACK"?"#FBBC04":cTier.name==="PLATINO"?"#1565C0":"#F0A500"}}, myCode), React.createElement("span", {style:{fontSize:18}}, "ğŸ“‹")), React.createElement("div", {style:{fontSize:11,color:cTier.name==="BLACK"?"#999":"#BDBDBD",marginTop:8}}, "TocÃ¡ para copiar")), refs.length>0&&React.createElement(React.Fragment, null, React.createElement("div", {style:{fontSize:11,fontWeight:800,color:cTier.name==="BLACK"?"#aaa":"#757575",textTransform:"uppercase",letterSpacing:2,marginBottom:10}}, "Mis invitados (", refs.length, ")"), refs.map((r,i)=>{
                  const hasBought=!!r.lastBuy;
                  return React.createElement("div", {key:i, style:{display:"flex",alignItems:"center",gap:12,padding:"12px 14px",marginBottom:6,background:cTier.name==="BLACK"?"rgba(255,255,255,.05)":cTier.name==="PLATINO"?"rgba(255,255,255,.3)":"#F5F5F5",borderRadius:14}}, React.createElement("div", {style:{width:36,height:36,borderRadius:10,background:hasBought?"#E8F5E9":"#FFF3E0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16}}, hasBought?"âœ…":"â³"), React.createElement("div", {style:{flex:1}}, React.createElement("div", {style:{fontWeight:700,fontSize:13,color:cTier.name==="BLACK"?"#fff":"#0D0D0D"}}, r.name), React.createElement("div", {style:{fontSize:11,color:hasBought?(cTier.name==="BLACK"?"#81C784":"#2E7D32"):(cTier.name==="BLACK"?"#FBBC04":"#E65100"),fontWeight:700,marginTop:2}}, hasBought?`âœ“ Completado Â· +${cfg.referralPts} pts`:"â³ Pendiente 1ra compra")), React.createElement("div", {style:{fontSize:11,...sMono,fontWeight:800,color:hasBought?(cTier.name==="BLACK"?"#81C784":"#2E7D32"):(cTier.name==="BLACK"?"#999":"#BDBDBD")}}, hasBought?"+25":"..."));
                })), refs.length===0&&React.createElement("div", {style:{textAlign:"center",padding:20,opacity:.5}}, React.createElement("div", {style:{fontSize:13,fontWeight:700,color:cTier.name==="BLACK"?"#aaa":undefined}}, "AÃºn no tenÃ©s invitados"), React.createElement("div", {style:{fontSize:12,marginTop:4,color:cTier.name==="BLACK"?"#999":undefined}}, "CompartÃ­ tu cÃ³digo y ganÃ¡ +", cfg.referralPts, "pts")), React.createElement("button", {onClick:()=>setShowInvite(false), style:{width:"100%",marginTop:16,padding:14,borderRadius:14,border:"none",background:"#FBBC04",fontFamily:"'DM Sans'",fontSize:14,fontWeight:800,cursor:"pointer",color:"#0D0D0D"}}, "Cerrar"))));
      })()));
}

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
</script>
</body>
</html>